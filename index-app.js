!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=52)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONST={url:{tmTypes:{followingT:"FOLLOWING",followingSubT:["FOLLOWING_BY_LIST","FOLLOWING_BY_ACTIVE_AUDIENCE"],unfollowingT:"UNFOLLOWING",unfollowingSubT:["UNFOLLOWING_BY_LIST","UNFOLLOWING_BY_ALL","UNFOLLOWING_BY_NON_RECIPROCAL"],chatBotT:"CHAT_BOT",chatBotSubT:["DEFAULT_CHAT_BOT"],autoanswerT:"AUTO_ANSWER",autoanswerSubT:["DEFAULT_AUTO_ANSWER"],autogreetT:"AUTO_GREETING",autogreetSubT:["DEFAULT_AUTO_GREETING"],storiesT:"STORIES",storiesSubT:["STORIES_BY_LIST","STORIES_BY_FOLLOWERS","STORIES_BY_ACTIVE_AUDIENCE"]},base:"http://api.luxgram.ru/v1/",registration:"registration/basic/",login:"registration/basic/login",confirmation:"registration/basic/confirmation?token",instagram_addAccount:"instagram-accounts/",instagramAccount_getMetaData:"instagram-accounts/meta",instagram_getAccountByUser:function(e){return"instagram-accounts/meta/"+e},instagram_modifyAccount:function(e){return"instagram-accounts/"+e},instagramTaskManager_getPosts:function(e){return"instagram-accounts/"+e+"/posts"},instagramAccount_checkpoint:"instagram-accounts/checkpoint/",instagramAccount_confirmKey:"instagram-accounts/checkpoint/",instagramDirect_Basic:"instagram-direct",instagramDirect_postMessage:"instagram-direct/",instagramDirect_getMetaData:"instagram-direct/meta",instagramTaskManager:"instagram-task-manager/",instagramTaskManager_getMetaData:"instagram-task-manager/meta",instagramTaskManager_getTaskByTypes:"instagram-task-manager/meta/type/",instagramTaskManager_getDefaultConfigs:"instagram-task-manager/config/type",instagramTaskManager_postStartFollowingList:"instagram-task-manager/task",instagramTaskManager_postStartTask:"instagram-task-manager/task",instagramTaskManager_getTaskTypes:"instagram-task-manager/task/types",instagramTaskManager_putStopTaskByID:function(e){return"instagram-task-manager/task/"+e},instagramTaskManager_delRemoveTaskByID:function(e){return"instagram-task-manager/task/"+e},instagramTaskManager_postImageAttachment:"instagram-task-manager/task/attachment/image",instagramTaskManager_postTextAttachment:"instagram-task-manager/task/attachment/users_list",instagramTaskManager_getLogsChatBot:"instagram-task-manager/logs/type/"},user:{defaulAvatar:"https://i.imgur.com/jNNT4LE.png",email:"",password:"",token:""},cookieStorage:{token:"user_logged",emailConfirmed:"email_confirmed"},uiSelectors:{headerLoginBox:"nav .login-box",headerNavLoginBtn:"nav ul li .js_login",headerRegBox:"nav .register-box",headerRegBtn:"nav ul li .js_register",instagram:{addAccountBtnSelector:"#js_show-login-box",addAccountBtnId:"js_show-login-box"}},events:{USER_LOGGED:"user_logged",USER_LOGOUT:"user_logout",USER_EMAIL_CONFIRMED:"user_email_confirmed",STOP_FIXED_SPINNER:"stop_fixed_spinner",messages:{RECIEVE_NEW_MESSAGE:"receive_new_message"},instagramAccouns:{INSTAGRAM_ACCOUNS_NEED_REFRESH:"instagram_accouns_need_refresh",INSTAGRAM_ACCOUNS_RENDERED:"instagram_accouns_rendered",INSTAGRAM_ACCOUNS_RENDERED_LAZY:"instagram_accouns_rendered_lazy"},modal:{IMAGE_POST_SELECTED:"image_post_selected",IMAGE_UPLOADED_AVATAR:"IMAGE_UPLOADED_AVATAR"},autoarnswer:{IMAGE_UPLOADED:"image_loaded",TEXT_FILE_UPLOADED:"text_file_uploaded"},tasks:{NEW_TASK_CREATED:"new_task_created"},logs:{STOP_LOGS:"stop_logs"}},logsState:{selectCls:"js_logs-accounts",selectClsLogsTaskType:"js_logs-subtypes",wrapperSubtype:".log-subype"},getPath:function(e,t){return"function"==typeof this.url[e]&&t?this.url.base+this.url[e](t):this.url.base+this.url[e]},getPathTypeSubtype:function(e,t,n){var i=t.type,a=t.subtype,o=t.username;return"function"==typeof this.url[e]&&i&&a?o&&n?this.url.base+this.url[e](t,n):o?this.url.base+this.url[e](t):this.url.base+this.url[e](i,a):this.url.base+this.url[e]},getPathByArr:function(e,t,n){var i=this.url.base+this.url[e],a=function(e,t){return e+"/"+t},o=i+t.reduce(a);return n?o+"?page="+n:o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t,n){$(e).empty().append(t?"<p>status: "+t+"</p>":"").append("<p>"+n+" </p>")}function t(e,t){var n=t,i=e;i.empty(),n.forEach(function(e,t){var n=$('<li class="list-group-item"></li>').appendTo(i);$("<a/>").addClass("ui-all").text(e.username).appendTo(n)})}function n(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function i(e,t){var n=new Date(e),i=n.getMonth()+1,a=n.getDate(),o=n.getHours(),r=n.getMinutes();i=(i<10?"0":"")+i,a=(a<10?"0":"")+a,o=(o<10?"0":"")+o,r=(r<10?"0":"")+r;return t?a+"-"+i+"-"+n.getFullYear()+" "+o+":"+r:o+":"+r}function a(e){return!e||0===Object.keys(e).length}function o(e,t,n){a(t);var i=n||"подписок";e.empty();for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&$('<div class="custom-control custom-radio">\n                '+function(e,t){switch(e){case"AGGRESSIVE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Агрессивный:</strong> '+t+" "+i+" в час</label>";case"MIDDLE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Средний:</strong> '+t+" "+i+" в час</label>";case"SAFE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input" checked>\n                    <label class="custom-control-label" for="'+e+'"><strong>Безопасный:</strong> '+t+" "+i+" в час</label>"}}(o,t[o])+"\n            </div>").appendTo(e)}function r(e){return e.val().trim().split(",").map(function(e){return e.trim().replace("↵","")}).filter(function(e){return e.length>0})}function s(e,t,n){var i=n.textRusArray,a=n.logsState,o=a.selectClsLogsTaskType,r=function(e){var t=i&&!!i.length;switch(e){case 0:return t?i[e]:"По подписчикам";case 1:return t?i[e]:"По активной аудитории конкурентов";case 2:return t?i[e]:"default - (3)";default:return"default"}};e.empty().addClass("border-light-color"),$('<div class="">Выберите тип</div><select name="task-subtype" class="'+o+'"></select>').appendTo(e),t.length&&(n.isRenderEmptyOption&&$('<option class="list-group-item py-2 js_empty-subtype" value="---">---</option>').appendTo($("."+o)),t.forEach(function(e,t){$('<option class="list-group-item py-2" value="'+e+'">\n                '+r(t)+"\n            </option>").appendTo($("."+o))}),n.dropdownOnSelectCb&&$("."+o).on("change",function(){n.dropdownOnSelectCb()}))}return{showInfoMessage:e,fillList:t,fillRadioGroupList:o,isEmail:n,getFormattedDateUtil:i,getValByCommaSeparator:r,addDropdown:s}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=n(13),u=i(l),c=n(4),d=i(c),p=function(e){return e&&e.subtype&&(e.subtype.includes("subtype/")||(e.subtype="subtype/"+e.subtype)),Object.values(e)},f=function(){function e(){a(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},this.postStartFollowingList=this.postStartFollowingList,this.postStartTask=this.postStartTask}return r(e,[{key:"getToken",value:function(e){var t=this.cookieStorage.get(s.CONST.cookieStorage.token);return e?{headers:{token:t}}:t}},{key:"getMetadata",value:function(e,t){var n=p(e);return this.network.sendRequest(""+s.CONST.getPathByArr("instagramTaskManager_getTaskByTypes",n),this.getToken("asHeader"),t)}},{key:"getMetadataLazy",value:function(e,t){var n=p(e);return n.push("?lazy=true"),this.network.sendRequest(""+s.CONST.getPathByArr("instagramTaskManager_getTaskByTypes",n),this.getToken("asHeader"),t)}},{key:"getTaskTypes",value:function(e,t){return this.network.sendRequest(""+s.CONST.getPath("instagramTaskManager_getTaskTypes"),this.getToken("asHeader"),t)}},{key:"stopTaskByID",value:function(e,t){var n=o({},this.settingPost,{method:"PUT",headers:o({},this.settingPost.headers,{token:this.getToken()})}),i=s.CONST.getPath("instagramTaskManager_putStopTaskByID",e);return this.network.sendRequest(i,n,t)}},{key:"deleteTaskByID",value:function(e,t){var n=o({},this.settingPost,{method:"DELETE",headers:o({},this.settingPost.headers,{token:this.getToken()})}),i=s.CONST.getPath("instagramTaskManager_delRemoveTaskByID",e);return this.network.sendRequest(i,n,t)}},{key:"getDefaultConfigs",value:function(e,t){var n=s.CONST.getPath("instagramTaskManager_getDefaultConfigs")+"/"+e.type+"/subtype/"+e.subtype;return this.network.sendRequest(n,this.getToken("asHeader"),t)}},{key:"postStartFollowingList",value:function(e,t,n){var i=o({},this.settingPost,{headers:o({},this.settingPost.headers,{token:this.getToken(),"X-Auth-Token":"e2f4336abea440489c51c5c10294ea12"})});i.body=JSON.stringify(e);var a=n?""+s.CONST.getPath(n):""+s.CONST.getPath("instagramTaskManager_postStartFollowingList");return this.network.sendRequest(a,i,t)}},{key:"postStartTask",value:function(e,t){return this.postStartFollowingList(e,t,"instagramTaskManager_postStartTask")}},{key:"postImageAutoanswer",value:function(e,t){var n={method:"POST",headers:{token:this.getToken(),Accept:"application/json","Content-type":"multipart/form-data"}};n.body=JSON.stringify(e);var i=""+s.CONST.getPath("instagramTaskManager_postImageAttachment");return this.network.sendRequest(i,n,t)}},{key:"getLogsChatBot",value:function(e,t,n){return this.network.sendRequest(""+s.CONST.getPathByArr("instagramTaskManager_getLogsChatBot",e,t),this.getToken("asHeader"),n)}},{key:"getPostsAutoanswer",value:function(e,t){var n=e.cursor?"?cursor="+e.cursor:"",i=""+s.CONST.getPath("instagramTaskManager_getPosts",e.userName||"user_not_selected")+n;return this.network.sendRequest(i,this.getToken("asHeader"),t)}},{key:"getStoriesConfig",value:function(e,t){var n=s.CONST.getPath("instagramTaskManager_getDefaultConfigs")+"/"+e.type+"/subtype/"+e.subtype;return this.network.sendRequest(n,this.getToken("asHeader"),t)}}]),e}(),m=null;m||(m=new f),t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=n(13),u=i(l),c=n(4),d=i(c),p=function(){function e(){a(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}}return r(e,[{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"isEmailConfirmed",value:function(){return"confirmed"===this.cookieStorage.get(s.CONST.cookieStorage.emailConfirmed)}},{key:"getToken",value:function(e){var t=this.cookieStorage.get(s.CONST.cookieStorage.token);return e?{headers:{token:t}}:t}},{key:"login",value:function(e,t){var n=o({},this.settingPost,{body:JSON.stringify(e)});return this.network.sendRequest(s.CONST.getPath("login"),n,t)}},{key:"addInstagramAccount",value:function(e,t){var n=e.username,i=e.password,a=e.ip,r=e.port,l=e.usernameProxy,u=e.passwordProxy,c={proxy:{host:a,port:r,username:l,password:u}},d=JSON.stringify(o({username:n,password:i},c)),p=o({},this.settingPost,{body:d,headers:o({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(s.CONST.getPath("instagram_addAccount"),p,t)}},{key:"editInstagramAccount",value:function(e,t){var n={method:"PUT",headers:o({},this.settingPost.headers,{token:this.getToken()}),body:t};s.CONST.getPath("instagram_modifyAccount",e);return this.network.sendRequest(""+s.CONST.getPath("instagram_modifyAccount",e),n)}},{key:"updateInstagramAccount",value:function(e,t){var n={headers:o({},this.settingPost.headers,{token:this.getToken()}),body:t};return this.network.sendRequest(""+s.CONST.getPath("instagram_getAccountByUser",e),n)}},{key:"delInstagramAccount",value:function(e){var t={method:"DELETE",headers:o({},this.settingPost.headers,{token:this.getToken()})};return this.network.sendRequest(""+s.CONST.getPath("instagram_modifyAccount",e),t)}},{key:"confirm",value:function(e){return this.network.sendRequest(""+(s.CONST.getPath("confirmation")+e))}},{key:"register",value:function(e){var t=o({},this.settingPost,{body:JSON.stringify(e)});return this.network.sendRequest(s.CONST.getPath("registration"),t)}},{key:"getMetadata",value:function(e){return this.network.sendRequest(""+s.CONST.getPath("instagramAccount_getMetaData"),this.getToken("asHeader"),e)}},{key:"getMetadataLazy",value:function(e){return this.network.sendRequest(s.CONST.getPath("instagramAccount_getMetaData")+"?lazy=true",this.getToken("asHeader"),e)}},{key:"getSecurityKey",value:function(e,t){var n=o({},this.settingPost,{body:JSON.stringify({type:t}),headers:o({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(""+s.CONST.getPath("instagramAccount_checkpoint")+e,n)}},{key:"confirmSecurityKey",value:function(e,t){var n={method:"DELETE",body:JSON.stringify({security_code:e}),headers:o({},this.settingPost.headers,{token:this.getToken()})};return this.network.sendRequest(""+s.CONST.getPath("instagramAccount_confirmKey")+t,n)}}]),e}(),f=null;f||(f=new p),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o={get:function(e){var t=document.cookie.match("(?:(?:^|.*; *)"+e+" *= *([^;]*).*$)|^.*$")[1];if(t)return decodeURIComponent(t)},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/",days:365};n.days&&(n["max-age"]=60*n.days*60*24,delete n.days),n=Object.entries(n).reduce(function(e,t){var n=a(t,2);return e+"; "+n[0]+"="+n[1]},""),document.cookie=e+"="+(encodeURIComponent(t)+n)},remove:function(e,t){return o.set(e,"",i({"max-age":-1,path:"/",days:0},t))}};t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var i=n.progress,a=n.created_at,o=n.task_id,r=n.type,s=n.status,l=n.username,u=n.mode,c=function(e){$('<li class="list-group-item p-0 py-2" data-type="'+r+'" data-task-id="'+o+'">\n                '+e+"\n            </li>").appendTo(t)},d='<div class="card-block">\n        <h4 class="card-title">На паузе</h4>\n        <div class="text-right">\n            '+(i&&i.timestamp?'<span class="text-muted">'+p.default.getFormattedDateUtil(i.timestamp)+"</span>":"")+"\n            "+(a?'<span class="text-muted">'+p.default.getFormattedDateUtil(a)+"</span>":"")+'\n        </div>\n        <span class="text-success">10%</span>\n        <div class="progress mb-3">\n            <div class="progress-bar bg-success" role="progressbar" style="width: 10%; height: 6px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>\n        </div>\n        <button class="btn btn-warning js_btn-delete-task">Удалить</button>',f='<div class="no-gutters px-2 row task-progress">\n            <div class="col-6 align-items-center d-flex">\n                <img src="'+sessionStorage.getItem(l)+'" class="rounded-circle avatar" alt="аватар"/>\n                <h2 class="mt-0 mb-1 ml-2">'+l+'</h2>\n            </div>\n            <div class="col-6 col-6--with-borders">\n                <p class="pb-1 name"><b>ID:</b> '+o+"</p>\n                "+(a?'<p class="pb-1"><b>Запущено:</b> '+p.default.getFormattedDateUtil(a,"showFullTime")+"</p>":"")+"\n                "+(u?'<p class="pb-1"><b>Режим:</b> '+m(u)+"</p>":"")+'\n                <div class="text-center">\n                    <button class="btn btn-outline-primary js_btn-stop-task"><i class="far fa-pause-circle fa-lg"></i></button>\n                    \x3c!--button class="btn btn-warning js_btn-delete-task ml-3"><i class="far fa-trash-alt fa-lg"></i></button--\x3e\n                </div>\n            </div>\n        </div>',h='<div class="no-gutters px-2 row task-stopped">\n            <div class="col-6 align-items-center d-flex">\n                <img src="'+sessionStorage.getItem(l)+'" class="rounded-circle avatar" alt="аватар"/>\n                <h2 class="mt-0 mb-1 ml-2">'+l+'</h2>\n            </div>\n            <div class="col-6 col-6--with-borders">\n                <p class="pb-1 name"><b>ID:</b> '+o+"</p>\n                "+(n.status.reason?'<p class="my-1">'+s.reason+"</p>":"")+"\n                "+(a?'<p class="pb-1"><b>Запущено:</b> '+p.default.getFormattedDateUtil(a,"showFullTime")+"</p>":"")+"\n                "+(u?'<p class="pb-1"><b>Режим:</b> '+m(u)+"</p>":"")+'\n                <div class="text-center">\n                    <button class="btn btn-warning js_btn-delete-task"><i class="far fa-trash-alt fa-lg"></i></button>\n                </div>\n            </div>\n\n        </div>',g='<div class="no-gutters px-2 row task-progress">\n            <div class="col-6 align-items-center d-flex">\n                <img src="'+sessionStorage.getItem(l)+'" class="rounded-circle avatar" alt="аватар"/>\n                <h2 class="mt-0 mb-1 ml-2">'+l+'</h2>\n            </div>\n            <div class="col-6 col-6--with-borders">\n                <p class="pb-1 name"><b>ID:</b> '+o+"</p>\n                "+(a?'<p class="pb-1"><b>Запущено:</b> '+p.default.getFormattedDateUtil(a,"showFullTime")+"</p>":"")+"\n                "+(u?'<p class="pb-1"><b>Режим:</b> '+m(u)+"</p>":"")+'\n                <div class="text-center">\n                    \x3c!--<button class="btn btn-outline-primary js_btn-stop-task"><i class="far fa-pause-circle fa-lg"></i></button>--\x3e\n                    <button class="btn btn-warning js_btn-delete-task ml-3"><i class="far fa-trash-alt fa-lg"></i></button>\n                </div>\n            </div>\n        </div>';switch(e){case"PAUSED":c(d);break;case"IN_PROGRESS":case"GLOBAL_PAUSE":c(f);break;case"STOPPED":c(h);break;case"FINISHED":c(g)}}function o(e,t){if(e.empty(),!t.length)return void $('<li class="list-group-item py-2">\n                <p>Нет ни одной задачи.</p>\n            </li>').appendTo(e);t.forEach(function(t){a(t.status.state,e,t)}),$("li",e).length||$('<li class="list-group-item py-2">\n            <p>Нет ни одной задачи.</p>\n        </li>').appendTo(e)}function r(e,t){var n=t||{type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]},i=$(".js_btn-stop-task"),a=$(".js_btn-delete-task"),o=function(e){return $(e.target).closest("li").data("task-id")};i.on("click",function(t){var i=o(t);c.default.stopTaskByID(i).then(function(t){s(e,n)})}),a.on("click",function(t){var i=o(t);c.default.deleteTaskByID(i).then(function(t){s(e,n)})})}function s(e,t){var n=e.$all,i=t||{type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]};c.default.getMetadata(i).then(function(i){"ok"===i.status.state&&(o(n,i.data.meta,"isAll"),r(e,t))})}function l(){var e={$runs:$(".follow-tasks-runs"),$stopped:$(".follow-tasks-stopped"),$all:$(".follow-tasks-all")};s(e),window.PubSub.subscribe(f.CONST.events.tasks.NEW_TASK_CREATED,function(t,n){var i={type:f.CONST.url.tmTypes.followingT,subtype:f.CONST.url.tmTypes.followingSubT[0]};s(e,i)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getTasksData=s,t.init=l;var u=n(2),c=i(u),d=n(1),p=i(d),f=n(0),m=function(e){switch(e){case"AGGRESSIVE":return"Агрессивный";case"MIDDLE":return"Средний";case"SAFE":return" Безопасный"}}},function(e,t,n){"use strict";function i(e,t){var n=$(e),i=t.stepReducer,a=t.onSubmitHandler;$(".js_profile-user-follow>.container").removeClass("container"),n.find("fieldset:first-child").fadeIn("slow"),n.find('input[type="text"]').on("focus",function(){$(this).removeClass("input-error")}),n.find(".btn-next").on("click",function(){var e=$(this).parents("fieldset"),t=!0,n=e.find('input[name="userAccountRadio"]:checked');n.length>0&&(s.username=n.parents("li").data("username")),i&&i(e.index(),s),e.find('input[type="text"],input[type="email"]').each(function(){""===$(this).val()?($(this).addClass("input-error"),t=!1):$(this).removeClass("input-error")}),t&&e.fadeOut(400,function(){$(this).next().fadeIn()})}),n.find(".btn-previous").on("click",function(){$(this).parents("fieldset").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".js_follow-speed input[type=radio]").on("click",function(){}),n.on("submit",function(e){$(this).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),a&&a(e)}),$(".form-submit-finish .close").on("click",function(e){$(this).closest(".form-submit-finish").removeClass("d-block"),e.stopPropagation()}),$("#v-pills-create-task-tab").on("click",function(e){"none"===$("fieldset:first-child").css("display")&&n.find("fieldset").hide("fast",function(){n.find("fieldset:first-child").show("slow")}),$(".form-submit-finish").removeClass("d-block"),$("fieldset",l).find('input:not([type="radio"]), textarea').val("")})}function a(){var e=$(".accounts-list"),t=e.find("li.media");t.addClass("js_user-radio").removeClass("py-3 media");for(var n=0;n<t.length;n++){var i=$(t[n]);i.wrapInner(function(e){return'<label class="accounts-list--label-wrapper col mb-0 media py-3" for="customRadio-'+e+'"></label>'}(n)).append(function(e){return'<div class="">\n            <input type="radio" name="userAccountRadio" id="customRadio-'+e+'" class="custom-control-input d-none" value="">\n        </div>'}(n)),i.find(".user-checkpoint .text-danger").length&&i.remove()}$(".js_user-radio").on("click","input[type=radio]",function(e){var t=$(this).parents("fieldset");$("li.active",t).removeClass("active"),$(this).closest("li").addClass("active"),$(".btn-next",t).prop("disabled",!1)})}function o(e){$(".wizard-form").length&&(i(l,e),window.PubSub.subscribe(r.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){a()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=o;var r=n(0),s={username:""},l=".wizard-form"},function(e,t,n){"use strict";function i(e){var t=e.find("input");t.replaceWith(t.clone()),e.find(g).hide(),e.find(".image-upload-wrap").show()}function a(e,t){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:case e.target.error.NOT_READABLE_ERR:case e.target.error.ABORT_ERR:}}function o(e,t){if(e.lengthComputable){Math.round(e.loaded/e.total*100)}}function r(e){return"image/jpeg"===e.type}function s(e){var t=Math.round(e.size);return m>t}function l(e,t){var n=d.CONST.getPath("instagramTaskManager_postImageAttachment"),i=f.default.getToken(),a=e.files[0],o=new FormData,r=new XMLHttpRequest;if(t&&t.replaceWith){o.append("photo",a,a.name);var s=t.username;return r.open("PUT","http://api.luxgram.ru/v1/instagram-accounts/"+s+"/photo"),r.setRequestHeader("token",i),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("cache-control","no-cache"),r.send(o),void r.addEventListener("readystatechange",function(){4===this.readyState&&window.PubSub.publish(d.CONST.events.autoarnswer.IMAGE_UPLOADED_AVATAR,{response:this.response})})}o.append("image",a,a.name),r.open("POST",n),r.setRequestHeader("token",i),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("cache-control","no-cache"),r.send(o),r.addEventListener("readystatechange",function(){4===this.readyState&&window.PubSub.publish(d.CONST.events.autoarnswer.IMAGE_UPLOADED,{response:this.responseText,el:e})})}function u(e,t,n){var u=t.replaceWith,c=t.holderCls,d=c||h,p=$(e).closest(d);if(e.files&&e.files[0]){var v=new FileReader;if(!s(e.files[0])||!r(e.files[0]))return $(h).find("warning-image").remove(),$(h).append('\n                <div class="warning-image text-danger">\n                    <p>Доступный формат изображения jpeg или jpg</p>\n                    <p class="msg-max-size-img text-danger">Максимальный допустимый размер картинки '+m/1024/1024+"MB</p>\n                </div>\n            "),void setTimeout(function(){$(".warning-image").addClass("d-none")},5e3);v.onload=function(n){if(u){var i=t.imageCls;p.find(i).attr("src",n.target.result)}else p.find(".image-upload-wrap").hide(),p.find(".file-upload-image").attr("src",n.target.result),p.find(g).show(),p.find(".image-title").html(e.files[0].name)},v.onerror=a,v.onprogress=o,v.readAsDataURL(e.files[0]),setTimeout(function(){if("function"==typeof n){var i=f.default.getToken();n(e,i)}else l(e,t)},2e3)}else i(p)}function c(e,t){var n=e&&e.replaceWith?e.uploadBtnCls:".file-upload-btn",a=$(n),o=$(".file-upload-input"),r=$(".remove-image");a.off(),o.off(),r.off(),a.on("click",function(t){var n=e&&e.replaceWith?e.holderCls:".col";$(t.target).closest(n).find(h).find("input.file-upload-input").trigger("click"),t.stopPropagation()}),o.on("change",function(n){u(n.target,e,t)}),r.on("click",function(e){var t=$(e.target).closest(".col").find(h);i(t),t.removeAttr("attached-img-id")})}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(0),p=n(2),f=function(e){return e&&e.__esModule?e:{default:e}}(p),m=1048576,h=".file-upload",g=".file-upload-content",v=$(".image-upload-wrap");v.bind("dragover",function(){$(".image-upload-wrap").addClass("image-dropping")}),v.bind("dragleave",function(){$(".image-upload-wrap").removeClass("image-dropping")})},function(e,t,n){"use strict";function i(e,t,n){var i=$(f.pagination),a=n.settings.pagination;e.on("click",function(t){var n=i.find("li.page-number.active"),o=a.previous;if(!a.previous)return void e.addClass("disabled").prop("disabled","disabled");q=a.previous,n.removeClass("active"),l(m,v,o)}),t.on("click",function(t){var n=i.find("li.page-number.active"),o=n.index(),r=a.next;a.next&&(q=a.next,n.removeClass("active"),o&&e.hasClass("disabled")&&e.removeClass("disabled"),l(m,v,r))}),$(f.logsTabBtn).on("click",function(e){q=1}),$(f.pagination+" "+f.paginationPgNumber).on("click",function(e){e.preventDefault();var t=$(e.target).text();q=parseInt(t,10),l(m,v,q)})}function a(e,t){var n=e.settings.pagination,a=$('<li class="page-item '+(n.previous?"":"disabled")+'"><a class="page-link" href="#" '+(n.previous?"":'tabindex="-1"')+">Назад</a></li>"),r=$('<li class="page-item '+(n.next?"":"disabled")+'"><a class="page-link" href="#" '+(n.next?"":'tabindex="-1"')+">Вперед</a></li>");o(t),(n.next||n.pages&&n.current===n.pages[n.pages.length-1])&&(t.append(a),n&&n.pages&&n.pages.forEach(function(e){$('<li class="page-item page-number '+(n.current===e?"active":"")+'"><a class="page-link" href="#">'+e+"</a></li>").appendTo(t)}),t.append(r)),i(a,r,e)}function o(e){e.empty()}function r(e,t,n){var i=$(".logs-pagination"),r=t.logs;if(e.empty(),!r.length)return $('<li class="list-group-item py-2">\n            <p>Нет ни одного лога.</p>\n        </li>').appendTo(e),void o(i);a(t,i),r.forEach(function(t){var n=t.level,i=t.value;$('<li class="list-group-item p-0 py-2">\n              <div class="media-body d-flex">\n                  <div class="col task-type '+("ERROR"===n?"text-danger":"")+" "+("WARN"===n?"text-warning":"")+'">\n                      '+(i?""+i:"")+"\n                  </div>\n              </div>\n          </li>").appendTo(e),$("li",e).length||$('<li class="list-group-item py-2" >\n                <p>Нет ни одного лога.</p>\n            </li>').appendTo(e)})}function s(){var e=$("#v-pills-tab");e.off(),e.on("click","a",function(e){e.preventDefault(),"v-pills-logs-tab"!==$(e.target).attr("id")&&b&&clearInterval(b)})}function l(e,t,n){t.username=g(h);var i=[t.type,"subtype/"+t.subtype,"account/"+t.username];p.default.getLogsChatBot(i,n).then(function(n){if("ok"===n.status.state){r(e,n.data),s();var i=n.data.settings.invoke_in_millis;b&&clearInterval(b),q<=1&&(b=setInterval(function(){l(e,t,q)},i))}else $('<li class="list-group-item py-2">\n                <p>Нет доступа</p>\n            </li>').appendTo(e)})}function u(e){f=e,m=$(f.tasksList),v.type=e.pathType,v.subtype=e.pathSubType}function c(e,t){$(t.currentPageCls).length&&(h=e,u(t),g()&&l(m,v))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=c;var d=n(2),p=function(e){return e&&e.__esModule?e:{default:e}}(d),f={currentPageCls:"",tasksList:"",logsTabBtn:"",pagination:"",paginationPgNumber:""},m="$(clsConst.tasksList)",h="someClass",g=function(){return $("."+h+" option:selected").val()},v={username:g()},q=null,b=""},function(e,t,n){"use strict";function i(e,t){var n=e.$wrapper,i=e.logsState,a=e.OnChangeSelectCb,o=i.selectCls;n.empty().addClass("border-light-color"),$('<div class="">Выберите аккаунт</div><select name="task-type" class="'+o+'"></select>').appendTo(n),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+o))}),a()}function a(){u.default.getMetadataLazy().then(function(e){if("ok"===e.status.state&&e.data&&e.data.accounts){i(c,e.data.accounts),window.PubSub.publish(s.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,e.data.accounts)}})}function o(e){$("#v-pills-logs-tab").on("click",function(e){a()})}function r(e,t){var n=$(".log-users-list");Object.assign(c,{$wrapper:n,OnChangeSelectCb:e,logsState:t}),o()}Object.defineProperty(t,"__esModule",{value:!0}),t.init=r;var s=n(0),l=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c={}},function(e,t,n){(function(e){!function(n,i){"use strict";var a={};n.PubSub=a;var o=n.define;!function(e){function t(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function n(e){return function(){throw e}}function i(e,t,i){try{e(t,i)}catch(e){setTimeout(n(e),0)}}function a(e,t,n){e(t,n)}function o(e,t,n,o){var r,s=u[t],l=o?a:i;if(u.hasOwnProperty(t))for(r in s)s.hasOwnProperty(r)&&l(s[r],e,n)}function r(e,t,n){return function(){var i=String(e),a=i.lastIndexOf(".");for(o(e,e,t,n);-1!==a;)i=i.substr(0,a),a=i.lastIndexOf("."),o(e,i,t,n)}}function s(e){for(var n=String(e),i=Boolean(u.hasOwnProperty(n)&&t(u[n])),a=n.lastIndexOf(".");!i&&-1!==a;)n=n.substr(0,a),a=n.lastIndexOf("."),i=Boolean(u.hasOwnProperty(n)&&t(u[n]));return i}function l(e,t,n,i){e="symbol"==typeof e?e.toString():e;var a=r(e,t,i);return!!s(e)&&(!0===n?a():setTimeout(a,0),!0)}var u={},c=-1;e.publish=function(t,n){return l(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return l(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,t){if("function"!=typeof t)return!1;e="symbol"==typeof e?e.toString():e,u.hasOwnProperty(e)||(u[e]={});var n="uid_"+String(++c);return u[e][n]=t,n},e.subscribeOnce=function(t,n){var i=e.subscribe(t,function(){e.unsubscribe(i),n.apply(this,arguments)});return e},e.clearAllSubscriptions=function(){u={}},e.clearSubscriptions=function(e){var t;for(t in u)u.hasOwnProperty(t)&&0===t.indexOf(e)&&delete u[t]},e.unsubscribe=function(t){var n,i,a,o="string"==typeof t&&(u.hasOwnProperty(t)||function(e){var t;for(t in u)if(u.hasOwnProperty(t)&&0===t.indexOf(e))return!0;return!1}(t)),r=!o&&"string"==typeof t,s="function"==typeof t,l=!1;if(o)return void e.clearSubscriptions(t);for(n in u)if(u.hasOwnProperty(n)){if(i=u[n],r&&i[t]){delete i[t],l=t;break}if(s)for(a in i)i.hasOwnProperty(a)&&i[a]===t&&(delete i[a],l=!0)}return l}}(a),"function"==typeof o&&o.amd?o(function(){return a}):(void 0!==e&&e.exports&&(t=e.exports=a),t.PubSub=a,e.exports=t=a)}("object"==typeof window&&window||this)}).call(t,n(50)(e))},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){t.length&&e.length&&(e.appendTo(t),e.addClass("col"),t.addClass("row"),t.find(".log-subype").addClass("col-auto"))}function o(e){function t(e){l.pathSubType=$("."+m+" option:selected").val(),$(".js_logs-container").addClass("d-block"),$("option.js_empty-subtype").remove()}function n(){var e=$("."+f+" option:selected").val();c(e),u.init(f,l)}function i(){t(),n(),$("."+m).on("change",function(){t(),u.init(f,l)}),$("."+f).on("change",function(){n()})}var o=e.logsState,r=e.logsSubtypes,l=e.clsConst,c=e.setUserNameCb,p=e.textRusArray,f=o.selectCls,m=o.selectClsLogsTaskType;s.default.addDropdown($(o.wrapperSubtype),r,{logsState:o,isRenderEmptyOption:!1,textRusArray:p}),d.init(i,o),a($(".log-users-list "),$(".log-subype--box"))}Object.defineProperty(t,"__esModule",{value:!0}),t.initLogsTab=o;var r=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(r),l=n(8),u=i(l),c=n(9),d=i(c)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return"text/plain"===e.type}function o(e){var t=Math.round(e.size);return h>t}function r(e){var t=u.CONST.getPath("instagramTaskManager_postTextAttachment"),n=d.default.getToken(),i=e.files[0],a=new FormData;a.append("file",i,i.name);var o=new XMLHttpRequest;o.open("POST",t),o.setRequestHeader("token",n),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("cache-control","no-cache"),o.send(a),o.addEventListener("readystatechange",function(){4===this.readyState&&window.PubSub.publish(u.CONST.events.autoarnswer.TEXT_FILE_UPLOADED,{response:this.responseText,el:e})}),f.default.add($(".add-file"),"")}function s(e){var t=$(e).closest(m);if(e.files&&e.files[0]){var n=new FileReader;if(!o(e.files[0])||!a(e.files[0]))return $(m).append('\n                <div class="warning-image text-danger">\n                    <p>Доступный формат изображения '+g+'</p>\n                    <p class="msg-max-size-img text-danger">Максимальный допустимый размер картинки 100 MB</p>\n                </div>\n            '),void setTimeout(function(){$(".warning-image").addClass("d-none")},5e3);n.onload=function(n){t.find(".image-upload-wrap").hide(),t.find(".file-upload-image").attr("src",n.target.result),t.find(".image-title").html(e.files[0].name)},n.readAsDataURL(e.files[0]),setTimeout(function(){return r(e)},2e3)}}function l(e,t){m=e,$(".input-txt-file").change(function(){""!==$(this).val()?($(this).prev().text("Выбрано файлов: "+$(this)[0].files.length),s($(this)[0])):$(this).prev().text("Выберете файл")}),window.PubSub.subscribe(u.CONST.events.autoarnswer.TEXT_FILE_UPLOADED,function(e,n){var i=n.response,a=i.length?JSON.parse(i):"",o=a&&a.data&&a.data.list_id;$(n.el).closest(m).attr("attached-txt-id",o),t&&"function"==typeof t&&t();var r=$(".js_add-new-task fieldset").get(2);$(r).find(".btn-next").removeAttr("disabled"),f.default.remove()})}Object.defineProperty(t,"__esModule",{value:!0}),t.attachTxtFileHandler=l;var u=n(0),c=n(2),d=i(c),p=n(14),f=i(p),m="",h=104857600,g="txt"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){i(this,e)}return o(e,[{key:"cbErrorDefault",value:function(e){var t=$("#description").length?$("#description"):$(".error-msg");s.default.showInfoMessage(t,e.status.state,e.status.message||"error")}},{key:"checkStatus",value:function(e){if(e.status&&e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"sendRequest",value:function(e,t,n){var i=this;return fetch(e,t).then(function(e){return Promise.all([e,e.json()])}).then(function(e){var t=a(e,2),o=t[0],r=t[1];return o.ok||(n?n(r):i.cbErrorDefault(r),i.checkStatus(o)),r})}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o={inline:"global-inline-spinner",overlay:"global-overlay-spinner",fixed:"global-fixed-spinner",button:"button--load"},r=function(){function e(t){i(this,e),this.startButtonSpinner=function(e,t){e.addClass(o.button),e.find(".spinner-box--button").length||e.prepend('<div class="spinner-box spinner-box--button justify-content-center position-relative p-0 m-0 bg-transparent '+t+'">\n            <div class="spin-animation">\n                <svg aria-hidden="true" data-prefix="far" data-icon="sync-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" \n                    class="fa-fw">\n                    <path fill="currentColor" d="M483.515 28.485L431.35 80.65C386.475 35.767 324.485 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h28.045c6.353 0 11.613-4.952 11.973-11.294C66.161 141.649 151.453 60 256 60c54.163 0 103.157 21.923 138.614 57.386l-54.128 54.129c-7.56 7.56-2.206 20.485 8.485 20.485H492c6.627 0 12-5.373 12-12V36.971c0-10.691-12.926-16.045-20.485-8.486zM491.699 256h-28.045c-6.353 0-11.613 4.952-11.973 11.294C445.839 370.351 360.547 452 256 452c-54.163 0-103.157-21.923-138.614-57.386l54.128-54.129c7.56-7.56 2.206-20.485-8.485-20.485H20c-6.627 0-12 5.373-12 12v143.029c0 10.691 12.926 16.045 20.485 8.485L80.65 431.35C125.525 476.233 187.516 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z" class=""></path></svg>\n            </div>\n        </div>')},this.stopButtonSpinner=function(e){e.removeClass(o.button)},this.cfg=t||{},$.extend(o,this.cfg.classes)}return a(e,[{key:"start",value:function(e,t){e.find("i").toggleClass(t).addClass("fa-spin fa-spinner")}},{key:"stop",value:function(e,t){e.find("i").toggleClass(t).removeClass("fa-spin fa-spinner")}},{key:"add",value:function(e,t){this.$el=e,e.prepend('<div class="spinner-box justify-content-center '+t+'">\n            <div class="spin-animation">\n                <svg aria-hidden="true" data-prefix="far" data-icon="sync-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-sync-alt fa-w-16 fa-fw fa-2x"><path fill="currentColor" d="M483.515 28.485L431.35 80.65C386.475 35.767 324.485 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h28.045c6.353 0 11.613-4.952 11.973-11.294C66.161 141.649 151.453 60 256 60c54.163 0 103.157 21.923 138.614 57.386l-54.128 54.129c-7.56 7.56-2.206 20.485 8.485 20.485H492c6.627 0 12-5.373 12-12V36.971c0-10.691-12.926-16.045-20.485-8.486zM491.699 256h-28.045c-6.353 0-11.613 4.952-11.973 11.294C445.839 370.351 360.547 452 256 452c-54.163 0-103.157-21.923-138.614-57.386l54.128-54.129c7.56-7.56 2.206-20.485-8.485-20.485H20c-6.627 0-12 5.373-12 12v143.029c0 10.691 12.926 16.045 20.485 8.485L80.65 431.35C125.525 476.233 187.516 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z" class=""></path></svg>\n            </div>\n        </div>')}},{key:"remove",value:function(){this.$el.find(".spinner-box").remove()}}]),e}(),s=null;s||(s=new r),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t,n){var i=n.textRusArray,a=n.logsState,o=a.selectClsLogsTaskType,r=function(e){var t=i&&!!i.length;switch(e){case 0:return t?i[e]:"По списку";case 1:return t?i[e]:"По активной аудитории конкурентов";case 2:return t?i[e]:"default - (3)";default:return"default"}};e.empty().addClass("border-light-color"),$('<div class="">Выберите тип</div><select name="task-subtype" class="'+o+'"></select>').appendTo(e),t.length&&($('<option class="list-group-item py-2 js_empty-subtype" value="---">---</option>').appendTo($("."+o)),t.forEach(function(e,t){$('<option class="list-group-item py-2" value="'+e+'">\n                '+r(t)+"\n            </option>").appendTo($("."+o))}),$("."+o).on("change",function(e){n.dropdownOnSelectCb(e)}))}return{addDropdown:e}}()},function(e,t,n){"use strict";function i(e,t,n){var i=function(e,t,n){e?t.insertAfter(n.find("li:last-child")):t.appendTo(n)};n||e.empty(),t.forEach(function(t,a){var o=t.id,r=t.type,s=$('<li class="col-4 list-group list-inline-item m-0 p-0" data-post-id="'+o+'" data-post-type="'+r+'">\n            '+("photo"===t.type?'<img src="'+t.url+'" class="img-responsive p-2" alt="image" style="max-height: 230px;"/>':'<div class="'+t.type+' h-100">\n                    \x3c!--style="background-image: url('+t.url+');"--\x3e\n                    <img src="'+t.url+'" class="img-responsive p-2 w-100" alt="video-cover" style="max-height: 200px;"/>\n                    <i class="fas fa-video fa-2x position-absolute text-white align-self-start"></i>\n                  </div>')+"\n        </li>");i(n,s,e)})}function a(e,t){$("#load-more").attr("cursor",t),e.removeClass("d-none")}function o(e){e.addClass("d-none")}function r(e,t,n){$("li",e).on("click",function(e){var i=$(e.target).closest("li"),a=i.attr("data-post-id"),o=i.attr("data-post-type"),r=n.closest(".col");window.PubSub.publish(l.CONST.events.modal.IMAGE_POST_SELECTED,{$btnLi:i,closestCol:r}),t.modal("hide"),n.closest(".col").find(".js_uploaded-img-from-posts").length&&n.closest(".col").find(".js_uploaded-img-from-posts").remove();var s=$('<div class="js_uploaded-img-from-posts uploaded-img-from-posts" \n                data-post-id="'+a+'" data-post-type="'+o+'">\n                    <button class="btn btn-warning uploaded-img-from-posts--remove-btn ml-2 js_delete-post-img">Удалить</button>\n                </div').prepend(i.find("img"));n.closest(".col").append(s),$(".js_delete-post-img").off().on("click",function(e){$(e.target).closest(".col").find(".js_uploaded-img-from-posts").remove()})})}function s(e,t,n){var l=n.loadMoreHandler,u=n.targetButton;c.default.getPostsAutoanswer(t).then(function(t){if("ok"===t.status.state){var n=t.data,c=e?$(".modal-footer",e):null,d=$(".modal-body .posts-list",e);if(!n.posts.length)return u.popover({container:"body",content:"У текущего аккаунта нет ни одного поста",placement:"bottom"}),void setTimeout(function(){u.popover("destroy")},4e3);e?(i(d,n.posts),e.modal("show"),e.modal("handleUpdate"),r(d,e,u)):n.posts&&(i(d,n.posts,"appendToList"),r(d,$("#postsGridModal"),u)),n.pagination&&n.pagination.cursor?(a(c,n.pagination.cursor),l(s)):o($(".modal-footer",e))}})}Object.defineProperty(t,"__esModule",{value:!0}),t.fillPosts=i,t.getPosts=s;var l=n(0),u=n(2),c=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function i(e){var t=$(e.target).find("option:selected").val(),n=o({},c,{subtype:t});$(".js_logs-container").addClass("d-block"),$("option.js_empty-subtype").remove(),(0,s.getTasksData)(d,n)}function a(e){var t=e.isInCorrectPage,n=e.initialPath,a=e.textRusArray;t&&(c={type:n.type,subtype:n.subtype},u.default.addDropdown(p.wrapperSubtype,n.subtypes,{logsState:p,dropdownOnSelectCb:i,textRusArray:a}),window.PubSub.subscribe(r.CONST.events.tasks.NEW_TASK_CREATED,function(e,t){(0,s.getTasksData)(d,c)}))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.init=a;var r=n(0),s=n(5),l=n(15),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c={type:"",subtype:""},d={$all:$(".tasks-all"),$stopped:$(".tasks-stopped")},p={wrapperSubtype:$(".subtype--box")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){var t=$(e.target);t.find(".first-step").removeClass("d-none"),t.find(".second-step").addClass("d-none"),$(".js_confirm-key").val(""),$(".js_success-feedback",t).removeAttr("style").empty()}var t="";$(".js_pass-checkpoint-btn").on("click",function(e){var n=$(e.target),i=n.data("username");t=n.data("checkpointType")||t;var a="PHONE"===t?"телефон":"email";if("EMAIL_OR_PHONE"===t)return e.stopPropagation(),void $("#security-code-phoneOremail").modal({show:!0,username:i});p.default.getSecurityKey(i,t).then(function(e){if("ok"===e.status.state){var t=$("#security-code");$(".js_success-feedback",t).empty().text("Ключ подтверждения был отправлен Вам на "+a),$("#security-code").attr("data-username",i)}})}),$(".js_confirm-security-code").on("click",function(e){var t=$(e.target),n=t.closest("#security-code").data("username"),i=t.closest(".modal").find(".modal-dialog form input.js_confirm-key"),a=i.val().trim(),o=t.closest(".modal");e.stopPropagation(),6===a.length&&p.default.confirmSecurityKey(a,n).then(function(e){"ok"===e.status.state&&o.modal("hide")}).catch(function(e){$(".js_success-feedback",o).text("Запрос не отправлен").css("color","red")})}),$("form input[minlength]").on("blur",function(){var e=$(this).val().trim().length;Number($(this).attr("minlength"))!==e?$(this).css("borderColor","red"):$(this).css("borderColor","#ced4da")}),$("#security-code-phoneOremail").on("hide.bs.modal",e),$("#security-code").on("hide.bs.modal",e),$(".js_get-security-code-phoneOremail").on("click",function(e){var t=$("#security-code-phoneOremail"),n=$(e.target).closest(t).find(".js_btn-type-switcher input:checked"),i=n.val(),a="PHONE"===i?"телефон":"email",o=t.data()["bs.modal"]._config,r=o.username;p.default.getSecurityKey(r,i).then(function(e){"ok"===e.status.state&&($(".first-step",t).addClass("d-none"),$(".second-step",t).removeClass("d-none"),$(".js_success-feedback",t).empty().text("Ключ подтверждения был отправлен Вам на "+a))})})}function o(e,t){var n=t,i=e,a=h.CONST.user.defaulAvatar;i.empty().addClass("border-light-color"),n.forEach(function(e){S(e,i,a).appendTo(i)}),window.PubSub.publish(h.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,{name:name,dataArray:t})}function r(e){$(".profile-user .spinner-box").addClass("d-none"),o(q,e.data.accounts),a()}function s(){m.default.showInfoMessage($(".error-msg"),"",C)}function l(){var e=$(".accounts-list");$(".profile-user .spinner-box").removeClass("d-none"),p.default.getMetadata(s).then(function(t){e.empty(),r(t)}).catch(function(e){setTimeout(function(){m.default.showInfoMessage($(".error-msg"),e.status||"",C)},3e3),$(".spinner-box").addClass("d-none")});var t={deleteBtnCls:".js_acc-delete",updateBtnCls:".js_acc-refresh",editBtnCls:".js_acc-edit"};(0,g.settingButtonsHandler)(t)}function u(){$(".js_add-instagram-account").on("click",function(e){var t=$(e.target),n=t.closest(".modal").find(".modal-dialog .modal-body"),i=n.find('input[name="username"]').val().trim(),a=n.find('input[name="pass"]').val().trim(),o=n.find('input[name="ip"]').val().trim(),r=n.find('input[name="port"]').val().trim(),s=n.find('input[name="usernameProxy"]').val().trim(),l=n.find('input[name="passProxy"]').val().trim(),u=$("form",n),c=u.get(0);if(e.preventDefault(),c.checkValidity()?T({username:i,password:a,usernameProxy:s,passwordProxy:l,ip:o,port:r}):(c.reportValidity&&c.reportValidity(),u.addClass("form-validation")),!(i&&a&&o&&function(e){return/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e)}(o)&&r&&function(e){return/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/.test(e)}(r)&&s&&l))return void e.stopPropagation()})}function c(){if(q.length){var e=p.default.getMetadata(s);q.length&&(u(),e.then(function(e){r(e);var t={deleteBtnCls:".js_acc-delete",updateBtnCls:".js_acc-refresh",editBtnCls:".js_acc-edit"};(0,g.settingButtonsHandler)(t)}).catch(function(e){setTimeout(function(){m.default.showInfoMessage($(".error-msg"),e.status||"","Не получилось загрузить доступные Instagram аккаунты")},3e3),$(".spinner-box").addClass("d-none")}),window.PubSub.subscribe(h.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_NEED_REFRESH,function(e,t){l()}),window.PubSub.subscribe(h.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){t.dataArray.forEach(function(e){var t=e.info&&e.info.profile_pic_url||h.CONST.user.defaulAvatar;sessionStorage.setItem(e.username,t)})}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=void 0,t.init=c;var d=n(3),p=i(d),f=n(1),m=i(f),h=n(0),g=n(34),v=$(".instagram-accounts-page").length,q=$(".accounts-list"),b=function(e,t,n){return e?'<li class="list-inline-item '+n+'"><span class="figure">'+e+"</span><span>"+t+"</span></li>":'<li class="list-inline-item '+n+'"><span class="figure">0</span><span>'+t+"</span></li>"},_=function(e){return'<div class="col">\n        <ul class="list-inline text-center counts-list">\n        '+(e?b(e.media_count,"Публикации","media-count")+"\n            "+b(e.follower_count,"Подписчики","follower-count")+"\n            "+b(e.following_count,"Подписки","following-count"):b(!1,"Публикации","media-count")+"\n            "+b(!1,"Подписчики","follower-count")+"\n            "+b(!1,"Подписки","following-count"))+"\n        </ul>\n    </div>"},y=function(e,t){return"TRIGGERED"===e.status?'<button class="btn btn-outline-secondary js_pass-checkpoint-btn d-block mx-auto" \n            data-checkpoint-type="'+(e.type||"EMAIL")+'"\n            data-username="'+(t.username||"")+'"\n            data-toggle="modal" data-target="#security-code">\n            <i class="fas fa-key"></i>Пройти чекпоинт</button>':"FAIL"===t.status?'<span class="text-danger">Ошибка при добавлении</span>':void 0},w=function(e){var t=e.username,n=void 0===t?"":t,i=e.info,a=i.name,o=void 0===a?"":a,r=i.email,s=void 0===r?"":r,l=i.url,u=void 0===l?"":l,c=i.biography,d=void 0===c?"":c,p=i.profile_pic_url,f=void 0===p?"":p,m=i.follower_count,h=i.following_count,g=i.media_count,q=i.is_business,b=i.is_private;if(v||window.location.href.includes("instagram-accounts"))return'<div class="account-setting col-1 d-flex flex-column">\n            <button class="btn btn-outline-success p-1 mb-1 js_acc-edit" \n                data-username="'+n+'"\n                data-name="'+o+'"\n                data-email="'+s+'"\n                data-url="'+u+'"\n                data-biography="'+d+'"\n                data-img="'+f+'"\n                data-follower_count="'+m+'"\n                data-following_count="'+h+'"\n                data-media_count="'+g+'"\n                data-is_business="'+q+'"\n                data-is_private="'+b+'"\n            ><i class="fas fa-pen m-0"></i></button>\n            <button class="btn btn-outline-secondary p-1 mb-1 js_acc-refresh" data-username="'+n+'"><i class="fas fa-retweet m-0"></i></button>\n            <button class="btn btn-outline-danger p-1 js_acc-delete" data-username="'+n+'"><i class="fas fa-trash m-0"></i></button>\n        </div>'},S=t.renderItem=function(e,t,n){var i=e.info,a=e.checkpoint||e,o=n||h.CONST.user.defaulAvatar;return i?$('<li class="media py-3" data-username="'+e.username+'">\n        '+(i.profile_pic_url?'<img class="ml-3 rounded" alt="User photo" src="'+i.profile_pic_url+'">':'<img class="ml-3 rounded" alt="default avatar" src="'+o+'">')+'\n        <div class="media-body d-flex">\n            <div class="col user-info">\n                '+(e.username?'<p class="mt-0 mb-1 name lead">'+e.username+"</p>":"")+"\n                "+(i.name?'<h4 class="mt-0 mb-1">'+i.name+"</h4>":"")+"\n                "+(i.name,"")+'\n\n            </div>\n            <div class="col user-checkpoint">\n                '+("TRIGGERED"===a.status?'<button class="btn btn-outline-secondary js_pass-checkpoint-btn d-block mx-auto"\n                        data-checkpoint-type="'+(a.type||"EMAIL")+'"\n                        data-username="'+(e.username||"")+'"\n                        data-toggle="modal" data-target="#security-code">\n                    <i class="fas fa-key"></i>Пройти чекпоинт</button>':"")+"\n            </div>\n            "+_(i)+"\n            "+(w(e)||"")+"\n        </div>\n    </li>"):$('<li class="media py-3" data-username="'+e.username+'">\n            <img class="ml-3 rounded" alt="default avatar" src="'+o+'">\n            <div class="media-body d-flex">\n                <div class="col user-info">\n                    '+(e.username?'<h4 class="mt-0 mb-1 name">'+e.username+"</h4>":"")+'\n                </div>\n                <div class="col user-checkpoint">\n                    '+y(a,e)+"\n                </div>\n                "+_()+"\n                "+(w(e)||"")+"\n            </div>\n        </li>").appendTo(t)},C="Не получилось загрузить доступные Instagram аккаунты",T=function(e){var t=function(e){m.default.showInfoMessage($(".error-msg"),e.status.state,e.status.message||"Login error")};p.default.addInstagramAccount(e,t).then(function(e){e&&e.status&&l()}).catch(function(e){})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emoji=void 0;var i=n(20),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.emoji=function(e){if($(e.page).length){var t=(new a.default,$('textarea[data-emoji-picker="true"] ~ div')),n=t.attr("style"),i=n.replace(e.styles.old,e.styles.new);t.attr("style",i)}}},function(e,t,n){var i,i;!function(t){e.exports=t()}(function(){var e;return function e(t,n,a){function o(s,l){if(!n[s]){if(!t[s]){var u="function"==typeof i&&i;if(!l&&u)return i(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,n,a)}return n[s].exports}for(var r="function"==typeof i&&i,s=0;s<a.length;s++)o(a[s]);return o}({1:[function(t,n,i){!function(t,a){if("function"==typeof e&&e.amd)e(["module"],a);else if(void 0!==i)a(n);else{var o={exports:{}};a(o),t.emojiPicker=o.exports}}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(){t(this,e),this.initiate()}return n(e,[{key:"initiate",value:function(){var e=this;document.querySelectorAll('[data-emoji-picker="true"]').forEach(function(t){e.generateElements(t)})}},{key:"generateElements",value:function(e){var t=function(t){t.preventDefault();var n=e.selectionStart;e.value=e.value.substring(0,n)+" "+t.target.innerHTML+e.value.substring(n),i.style.display="none",e.focus(),"undefined"!=typeof angular&&angular.element(e).triggerHandler("change")};e.style.width="100%";var n=document.createElement("div");n.style.position="relative",e.parentNode.replaceChild(n,e),n.appendChild(e);var i=document.createElement("div");i.tabIndex=0,i.addEventListener("blur",function(e){i.style.display="none"},!1),i.style.position="absolute",i.style.right="2px",i.style.outline="none",i.style.top="20px",i.style.zIndex="999",i.style.display="none",i.style.width="264px",i.style.padding="7px 7px 7px 7px",i.style.marginTop="5px",i.style.overflow="hidden",i.style.background="#fff",i.style.height="200px",i.style.overflowY="auto",i.style.boxShadow="0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",i.style.borderRadius="2px;";var a=document.createElement("a");a.style.position="absolute",a.style.top="2px",a.style.right="2px",a.style.textDecoration="none",a.setAttribute("href","javascript:void(0)"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 12 14"><path d="M8.9 8.4q-0.3 0.9-1.1 1.5t-1.8 0.6-1.8-0.6-1.1-1.5q-0.1-0.2 0-0.4t0.3-0.2q0.2-0.1 0.4 0t0.2 0.3q0.2 0.6 0.7 1t1.2 0.4 1.2-0.4 0.7-1q0.1-0.2 0.3-0.3t0.4 0 0.3 0.2 0 0.4zM5 5q0 0.4-0.3 0.7t-0.7 0.3-0.7-0.3-0.3-0.7 0.3-0.7 0.7-0.3 0.7 0.3 0.3 0.7zM9 5q0 0.4-0.3 0.7t-0.7 0.3-0.7-0.3-0.3-0.7 0.3-0.7 0.7-0.3 0.7 0.3 0.3 0.7zM11 7q0-1-0.4-1.9t-1.1-1.6-1.6-1.1-1.9-0.4-1.9 0.4-1.6 1.1-1.1 1.6-0.4 1.9 0.4 1.9 1.1 1.6 1.6 1.1 1.9 0.4 1.9-0.4 1.6-1.1 1.1-1.6 0.4-1.9zM12 7q0 1.6-0.8 3t-2.2 2.2-3 0.8-3-0.8-2.2-2.2-0.8-3 0.8-3 2.2-2.2 3-0.8 3 0.8 2.2 2.2 0.8 3z"/></svg>',a.onclick=function(){"none"===i.style.display&&(i.style.display="block"),i.focus()},n.appendChild(a);var o=document.createElement("ul");o.style.padding="0",o.style.margin="0",o.style.listStyle="none",[128512,128513,128514,129315,128515,128516,128517,128518,128521,128522,128523,128526,128525,128536,128535,128537,128538,128578,129303,129321,129300,129320,128528,128529,128566,128580,128527,128547,128549,128558,129296,128559,128554,128555,128564,128524,128539,128540,128541,129316,128530,128531,128532,128533,128579,129297,128562,9785,128577,128534,128542,128543,128548,128546,128557,128550,128551,128552,128553,129327,128556,128560,128561,128563,129322,128565,128545,128544,129324,128567,129298,129301,129314,129326,129319,128519,129312,129317,129323,129325,129488,129299,128520,128127,129313,128121,128122,128128,9760,128123,128125,128126,129302,128169,128570,128568,128569,128571,128572,128573,128576,128575,128574,128584,128585,128586,128118,129490,128102,128103,129489,128104,128105,129491,128116,128117,128110,128373,128130,128119,129332,128120,128115,128114,129493,129492,128113,129333,128112,129328,129329,128124,127877,129334,129497,129498,129499,129500,129501,129502,129503,128589,128590,128581,128582,128129,128587,128583,129318,129335,128134,128135,128694,127939,128131,128378,128111,129494,129495,129496,128704,128716,128372,128483,128100,128101,129338,127943,9975,127938,127948,127940,128675,127946,9977,127947,128692,128693,127950,127949,129336,129340,129341,129342,129337,128107,128108,128109,128143,128145,128106,129331,128170,128072,128073,9757,128070,128405,128071,9996,129310,128406,129304,129305,128400,9995,128076,128077,128078,9994,128074,129307,129308,129306,128075,129311,9997,128079,128080,128588,129330,128591,129309,128133,128066,128067,128099,128064,128065,129504,128069,128068,128139,128152,10084,128147,128148,128149,128150,128151,128153,128154,128155,129505,128156,128420,128157,128158,128159,10083,128140,128164,128162,128163,128165,128166,128168,128171,128172,128488,128495,128173,128371,128083,128374,128084,128085,128086,129507,129508,129509,129510,128087,128088,128089,128090,128091,128092,128093,128717,127890,128094,128095,128096,128097,128098,128081,128082,127913,127891,129506,9937,128255,128132,128141,128142,128053,128018,129421,128054,128021,128041,128058,129418,128049,128008,129409,128047,128005,128006,128052,128014,129412,129427,129420,128046,128002,128003,128004,128055,128022,128023,128061,128015,128017,128016,128042,128043,129426,128024,129423,128045,128001,128e3,128057,128048,128007,128063,129428,129415,128059,128040,128060,128062,129411,128020,128019,128035,128036,128037,128038,128039,128330,129413,129414,129417,128056,128010,128034,129422,128013,128050,128009,129429,129430,128051,128011,128044,128031,128032,128033,129416,128025,128026,129408,129424,129425,128012,129419,128027,128028,128029,128030,129431,128375,128376,129410,128144,127800,128174,127989,127801,129344,127802,127803,127804,127799,127793,127794,127795,127796,127797,127806,127807,9752,127808,127809,127810,127811,127815,127816,127817,127818,127819,127820,127821,127822,127823,127824,127825,127826,127827,129373,127813,129381,129361,127814,129364,129365,127805,127798,129362,129382,127812,129372,127792,127838,129360,129366,129384,129374,129472,127830,127831,129385,129363,127828,127839,127829,127789,129386,127790,127791,129369,129370,127859,129368,127858,129379,129367,127871,129387,127857,127832,127833,127834,127835,127836,127837,127840,127842,127843,127844,127845,127841,129375,129376,129377,127846,127847,127848,127849,127850,127874,127856,129383,127851,127852,127853,127854,127855,127868,129371,9749,127861,127862,127870,127863,127864,127865,127866,127867,129346,129347,129380,129378,127869,127860,129348,128298,127994,127757,127758,127759,127760,128506,128510,127956,9968,127755,128507,127957,127958,127964,127965,127966,127967,127963,127959,127960,127962,127968,127969,127970,127971,127972,127973,127974,127976,127977,127978,127979,127980,127981,127983,127984,128146,128508,128509,9962,128332,128333,9961,128331,9970,9978,127745,127747,127961,127748,127749,127750,127751,127753,9832,127756,127904,127905,127906,128136,127914,128642,128643,128644,128645,128646,128647,128648,128649,128650,128669,128670,128651,128652,128653,128654,128656,128657,128658,128659,128660,128661,128662,128663,128664,128665,128666,128667,128668,128690,128756,128757,128655,128739,128740,128738,9981,128680,128677,128678,128721,128679,9875,9973,128758,128676,128755,9972,128741,128674,9992,128745,128747,128748,128186,128641,128671,128672,128673,128752,128640,128760,128718,8987,9203,8986,9200,9201,9202,128368,128347,128359,128336,128348,128337,128349,128338,128350,128339,128351,128340,128352,128341,128353,128342,128354,128343,128355,128344,128356,128345,128357,128346,128358,127761,127762,127763,127764,127765,127766,127767,127768,127769,127770,127771,127772,127777,9728,127773,127774,11088,127775,127776,9729,9925,9928,127780,127781,127782,127783,127784,127785,127786,127787,127788,127744,127752,127746,9730,9748,9969,9889,10052,9731,9924,9732,128293,128167,127754,127875,127876,127878,127879,10024,127880,127881,127882,127883,127885,127886,127887,127888,127889,127872,127873,127895,127903,127915,127894,127942,127941,129351,129352,129353,9917,9918,129358,127936,127952,127944,127945,127934,127923,127951,127953,127954,127955,127992,129354,129349,9971,9976,127907,127933,127935,128759,129356,127919,127921,128302,127918,128377,127920,127922,9824,9829,9830,9827,9823,127183,126980,127924,127917,128444,127912,128263,128264,128265,128266,128226,128227,128239,128276,128277,127932,127925,127926,127897,127898,127899,127908,127911,128251,127927,127928,127929,127930,127931,129345,128241,128242,9742,128222,128223,128224,128267,128268,128187,128421,128424,9e3,128433,128434,128189,128190,128191,128192,127909,127902,128253,127916,128250,128247,128248,128249,128252,128269,128270,128367,128161,128294,127982,128212,128213,128214,128215,128216,128217,128218,128211,128210,128195,128220,128196,128240,128478,128209,128278,127991,128176,128180,128181,128182,128183,128184,128179,128185,128177,128178,9993,128231,128232,128233,128228,128229,128230,128235,128234,128236,128237,128238,128499,9999,10002,128395,128394,128396,128397,128221,128188,128193,128194,128450,128197,128198,128466,128467,128199,128200,128201,128202,128203,128204,128205,128206,128391,128207,128208,9986,128451,128452,128465,128274,128275,128271,128272,128273,128477,128296,9935,9874,128736,128481,9876,128299,127993,128737,128295,128297,9881,128476,9878,128279,9939,9879,128300,128301,128225,128137,128138,128682,128719,128715,128701,128703,128705,128722,128684,9904,9905,128511,127975,128686,128688,9855,128697,128698,128699,128700,128702,128706,128707,128708,128709,9888,128696,9940,128683,128691,128685,128687,128689,128695,128245,128286,9762,9763,11014,8599,10145,8600,11015,8601,11013,8598,8597,8596,8617,8618,10548,10549,128259,128260,128281,128282,128283,128284,128285].map(function(e){var n=document.createElement("li");n.style.display="inline-block",n.style.margin="5px";var i=document.createElement("a");i.style.textDecoration="none",i.style.margin="5px",i.style.position="initial",i.style.fontSize="24px",i.setAttribute("href","javascript:void(0)"),i.innerHTML=String.fromCodePoint(e),i.onmousedown=t,o.appendChild(i)}),i.appendChild(o),n.appendChild(i)}}]),e}();e.exports=i})},{}]},{},[1])(1)})},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){window.PubSub=e}function r(){$('[data-toggle="tooltip"]').tooltip()}n(47),n(51);var s=n(10),l=a(s),u=n(35),c=n(38),d=a(c),p=n(45),f=n(30),m=n(33),h=i(m),g=n(39),v=i(g),q=n(32),b=i(q),_=n(18),y=i(_),w=n(36),S=i(w),C=n(31),T=i(C),x=n(42),k=i(x),E=n(23),P=i(E),O=n(28),I=i(O),F=n(26),A=i(F),D=n(40),N=i(D),R=function(){o(l.default),r(),(new d.default).init(),(0,u.LoginForm)({_loginBox:"main .login-box",_formId:"#js_instagram-add-account",_buttonSubmitId:"#js_instagram-add-account--btn",_showLoginBoxBtnId:"#js_show-login-box",isLoginInstagram:!0}).init(),(0,p.LoginPage)({_loginBox:".auth.login .card-signin",_formId:".form-signin",_buttonSubmitId:'.form-signin [type="submit"]'}).init(),(0,f.confirmationWithRedirect)().init(),h.initHeader(),v.initMenu(),b.init(),T.init(),k.init(),y.init(),S.init(),P.init(),A.init(),I.init(),N.init()};!function(){R()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.tplTextField=function(e){return $('<div class="'+e+' mt-2">\n    <div class="row">\n        <div class="col">\n            <textarea class="form-control answer-words" rows="4" placeholder="Введите ключевые слова"></textarea>\n        </div>\n        <div class="col">\n            <textarea class="form-control answer-messages" rows="4"\n                data-emoji-picker="true" style="padding: 0.25rem 1.75rem 0.25rem 0.25rem; width: 100%;min-height: 42px;"\n                placeholder="Введите сообщение"\n            ></textarea>\n            \x3c!-- file-upload --\x3e\n            <div class="file-upload-btn-box" data-toggle="tooltip" data-placement="top" title="Добавить изображение">\n                <button class="file-upload-btn btn btn-success" type="button">\n                    <i class="far fa-image fa-lg"></i>\n                </button>\n            </div>\n            \x3c!-- Button trigger modal --\x3e\n            <button type="button" class="btn btn-success post-upload-btn js_autoanswer-add-post"\n                title="Добавить публикацию"\n                data-toggle="tooltip"\n                data-placement="top"\n                data-post-info="todo: get req to user: ">\n                <span class="js_open-posts-gridModal"\n                    data-container="body" data-toggle="popover" data-placement="bottom" data-content="У текущего аккаунта нет ни одного поста">\n                <i class="far fa-images fa-lg"></i>\n                </span>\n            </button>\n\n            <div class="mt-2">\n                <div class="file-upload">\n                    <div class="image-upload-wrap">\n                        <input class="file-upload-input" type=\'file\' accept=".jpg, .jpeg" />\n                    </div>\n                    <div class="file-upload-content">\n                        <img class="file-upload-image" src="#" alt="your image" />\n                        <div class="image-title-wrap">\n                        <button type="button" class="remove-image btn btn-warning">Удалить <span class="image-title">Загрузить</span></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){(0,F.emoji)({page:U.currentPageCls,styles:{old:"bottom: 30px;",new:"top: -210px;"}})}function r(e,t){e.each(function(){if(""===$(this).val())return t.preventDefault(),void $(this).addClass("input-error");$(this).removeClass("input-error")})}function s(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(L.fields),i=[],a=!0,o=n.find(L.keyWord),s=n.find(L.answer);if(r(o,e),r(s,e),n.each(function(e,t){var n=N($(t).find(L.keyWord)),o=$(t).find(L.answer).val(),r=$(t).find(L.fileUploadBox).attr("attached-img-id"),s=$(t).find(".js_uploaded-img-from-posts"),l=s.data("postId"),u=s.data("postType");if(!n.length||!o.length)return $(t).append('\n                <p class="msg-empty-field text-danger">Пустое поле не валидно</p>\n            '),setTimeout(function(){$(".msg-empty-field").addClass("d-none")},5e3),void(a=!1);var c={key_words:n,answer:o,attachment:r?{image_id:r}:void 0};l&&(c.attachment=g({},c.attachment,{post:{id:l,type:u||"type-error"}})),i.push(c)}),a){var l={username:R,type:U.pathType,subtype:U.pathSubType,user_default_config:{},user_custom_config:{forms:i}};S.default.postStartTask(l,t).then(function(e){"ok"===e.status.state&&($(".form-submit-finish").find(".alert p").remove(),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}}function l(){function e(){var e=j.selectCls;$("."+e).on("change",function(){R=$("."+e+" option:selected").val(),P.init(e,U)})}T.init(e,j)}function u(e){$(L.fields+":not(:first-child)").removeClass("d-block"),e.stopPropagation()}function c(e){var t=this;$("#load-more").off().on("click",function(n){var i=$(n.target),a=i.attr("cursor");e(null,{userName:R,cursor:a},{loadMoreHandler:t,targetButton:M})})}function d(){$(".js_open-posts-gridModal").on("click",function(e){M=$(this);var t=$("#postsGridModal");(0,A.getPosts)(t,{userName:R},{loadMoreHandler:c,targetButton:M}),t.find(".modal-title").text("Публикации")})}function p(){$(".js_add-autoanswer").on("click",function(e){var t=$(L.fields).last();(0,D.tplTextField)(L.fields.substr(1)).insertAfter(t),o(),I.init(),$('[data-toggle="tooltip"]').tooltip(),d()}),$(".form-submit-finish .close").on("click",function(e){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(v.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(v.CONST.events.tasks.NEW_TASK_CREATED),u()}),l()}function f(e){R=e.username}function m(e,t){switch(e){case 0:f(t)}}function h(){if($(U.currentPageCls).length){var e={stepReducer:m,onSubmitHandler:s};b.init(e),p(),k.init(),d(),o(),I.init(),window.PubSub.subscribe(v.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){P.init(B,U)}),window.PubSub.subscribe(v.CONST.events.autoarnswer.IMAGE_UPLOADED,function(e,t){var n=t.response,i=n.length?JSON.parse(n):"",a=i&&i.data&&i.data.image_id;$(t.el).closest(".file-upload").attr("attached-img-id",a);var o=$(t.el).closest(".col").find(".js_uploaded-img-from-posts");o.length&&o.remove()}),window.PubSub.subscribe(v.CONST.events.modal.IMAGE_POST_SELECTED,function(e,t){var n=$(t.closestCol).find(".file-upload-content");n.length&&n.hide()})}}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.init=h;var v=n(0),q=n(6),b=a(q),_=n(1),y=i(_),w=n(2),S=i(w),C=n(9),T=a(C),x=n(24),k=a(x),E=n(8),P=a(E),O=n(7),I=a(O),F=n(19),A=n(16),D=n(22),N=y.default.getValByCommaSeparator,R="",B="js_logs-accounts",U={currentPageCls:".autoanswer-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:v.CONST.url.tmTypes.autoanswerT,pathSubType:v.CONST.url.tmTypes.autoanswerSubT[0]},L={fields:".autoanswer-text-fields",keyWord:"textarea.answer-words",answer:"textarea.answer-messages",fileUploadBox:".file-upload",addPostBtns:".js_autoanswer-add-post"},j={selectCls:"js_logs-accounts",selectClsLogsTaskType:"js_logs-subtypes",wrapperSubtype:".log-subype"},M={}},function(e,t,n){"use strict";function i(){if($(".autoanswer-page").length){var e={type:a.CONST.url.tmTypes.autoanswerT,subtype:a.CONST.url.tmTypes.autoanswerSubT[0]},t={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped"),$all:$(".tasks-all")};(0,o.getTasksData)(t,e),window.PubSub.subscribe(a.CONST.events.tasks.NEW_TASK_CREATED,function(n,i){(0,o.getTasksData)(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=i;var a=n(0),o=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.tplTextFieldGreet=function(e){return $('<div class="'+e+'">\n        <div class="row">\n            <div class="col">\n                <div>                \n                    <textarea class="form-control answer-words" rows="4" \n                        data-emoji-picker="true" placeholder="Введите сообщение"></textarea>    \n                </div>\n\n                \x3c!-- file-upload --\x3e\n                <div class="file-upload-btn-box" data-toggle="tooltip" data-placement="top" title="Добавить изображение">\n                    <button class="file-upload-btn btn btn-success" type="button">\n                        <i class="far fa-image fa-lg"></i>\n                    </button>\n                </div>\n\n                <button type="button" class="btn btn-success post-upload-btn js_autoanswer-add-post"\n                    title="Добавить публикацию"\n                    data-toggle="tooltip"\n                    data-placement="top"\n                    data-post-info="todo: get req to user: ">\n                    <span class="js_open-posts-gridModal"\n                        data-container="body" data-toggle="popover" data-placement="bottom" data-content="У текущего аккаунта нет ни одного поста">\n                    <i class="far fa-images fa-lg"></i>\n                    </span>\n                </button>\n                \n                <div class="mt-2">\n                    <div class="file-upload">\n                    \n                      <div class="image-upload-wrap">\n                        <input class="file-upload-input" type="file" accept=".jpg, .jpeg">\n                      </div>\n                      <div class="file-upload-content">\n                        <img class="file-upload-image" src="#" alt="your image">\n                        <div class="image-title-wrap">\n                          <button type="button" class="remove-image btn btn-warning">Удалить <span class="image-title">Загрузить</span></button>\n                        </div>\n                      </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>')}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(N.fields),i=[],a=function(e){var t=$(e).find(N.fileUploadBox).attr("attached-img-id"),n=$(e).find(".js_uploaded-img-from-posts"),i=n.data("postId"),a=n.data("postType"),o={id:i,type:a||"type-error"},r=null;return i?r={post:o}:t&&(r={image_id:t}),r};n.each(function(e,t){var n=$(t).find("textarea.answer-words").val(),o=a(t);i.push({answer:n,attachment:o||void 0})});var o={username:I||"the_rostyslav",type:h.CONST.url.tmTypes.autogreetT,subtype:h.CONST.url.tmTypes.autogreetSubT[0],user_default_config:{task_mode:R.user_default_config.task_mode},user_custom_config:{forms:i}};b.default.postStartTask(o,t).then(function(e){"ok"===e.status.state&&($(".form-submit-finish").find(".alert p").remove(),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function o(){function e(){var e=B.selectCls;$("."+e).on("change",function(){I=$("."+e+" option:selected").val(),T.init(e,D)})}y.init(e,B)}function r(){(0,x.emoji)({page:D.currentPageCls,styles:{old:"bottom: 30px;",new:"top: -210px;"}})}function s(){$(N.fields+":not(:first-child)").remove()}function l(e){var t=this;$("#load-more").on("click",function(n){var i=$(n.target),a=i.attr("cursor");e(null,{userName:I,cursor:a},{loadMoreHandler:t,targetButton:U})})}function u(){$(".js_open-posts-gridModal").on("click",function(e){U=$(this);var t=$("#postsGridModal");(0,P.getPosts)(t,{userName:I},{loadMoreHandler:l,targetButton:U}),t.find(".modal-title").text("Публикации")})}function c(){$(".js_add-autoanswer").on("click",function(e){var t=$(N.fields).last();(0,O.tplTextFieldGreet)(N.fields.substr(1)).insertAfter(t),r(),E.init(),$('[data-toggle="tooltip"]').tooltip(),u()}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED),s()}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(h.CONST.events.tasks.NEW_TASK_CREATED),s()}),o()}function d(e){I=e.username}function p(){var e=function(e,t){var n=t.cfg&&t.cfg.task_modes;e.empty();for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&$('<div class="custom-control custom-radio">\n                '+function(e,t){switch(e){case"AGGRESSIVE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Агрессивный:</strong> '+t+" сообщений в час</label>";case"MIDDLE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input">\n                    <label class="custom-control-label" for="'+e+'"><strong>Средний:</strong> '+t+" сообщений в час</label>";case"SAFE":return'<input type="radio" id="'+e+'" name="customRadio" value="'+e+'" class="custom-control-input" checked>\n                    <label class="custom-control-label" for="'+e+'"><strong>Безопасный:</strong> '+t+" сообщений в час</label>"}}(i,n[i])+"\n            </div>").appendTo(e)},t={type:D.pathType,subtype:D.pathSubType};b.default.getDefaultConfigs(t).then(function(t){"ok"===t.status.state&&(e($(A),t.data.found),$(A+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");R.user_default_config.task_mode=t.toUpperCase()}))})}function f(e,t){switch(e){case 0:d(t),p()}}function m(){if($(D.currentPageCls).length){var e={stepReducer:f,onSubmitHandler:a};v.init(e),c(),S.init(D),window.PubSub.subscribe(h.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){T.init(F,D)}),u(),r(),E.init(),window.PubSub.subscribe(h.CONST.events.autoarnswer.IMAGE_UPLOADED,function(e,t){var n=t.response,i=n.length?JSON.parse(n):"",a=i&&i.data&&i.data.image_id;$(t.el).closest(".file-upload").attr("attached-img-id",a);var o=$(t.el).closest(".col").find(".js_uploaded-img-from-posts");o.length&&o.remove()}),window.PubSub.subscribe(h.CONST.events.modal.IMAGE_POST_SELECTED,function(e,t){var n=$(t.closestCol).find(".file-upload-content");n.length&&n.hide()})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=m;var h=n(0),g=n(6),v=i(g),q=n(2),b=function(e){return e&&e.__esModule?e:{default:e}}(q),_=n(9),y=i(_),w=n(27),S=i(w),C=n(8),T=i(C),x=n(19),k=n(7),E=i(k),P=n(16),O=n(25),I="",F="js_logs-accounts",A=".js_autogreeting-speed",D={currentPageCls:".autogreeting-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:h.CONST.url.tmTypes.autogreetT,pathSubType:h.CONST.url.tmTypes.autogreetSubT[0]},N={fields:".autogreeting-text-fields",fileUploadBox:".file-upload"},R={user_default_config:{task_mode:"SAFE"}},B=h.CONST.logsState,U={}},function(e,t,n){"use strict";function i(e){if($(e.currentPageCls).length){var t=e.pathType,n=e.pathSubType,i={type:t,subtype:n},r={$runs:$(".tasks-runs"),$all:$(".tasks-all")};(0,o.getTasksData)(r,i),window.PubSub.subscribe(a.CONST.events.tasks.NEW_TASK_CREATED,function(e,t){(0,o.getTasksData)(r,i)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=i;var a=n(0),o=n(5)},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){function t(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}var n=$(".bot-text-fields"),i=function(e){return e.val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0})},a=[];n.each(function(e,t){var n=i($(t).find("textarea.answer-words")),o=$(t).find("textarea.answer-messages").val();a.push({key_words:n,answer:o})});var o={username:y,type:S.pathType,subtype:S.pathSubType,user_default_config:{},user_custom_config:{forms:a}};m.default.postStartTask(o,t).then(function(e){"ok"===e.status.state&&($(".form-submit-finish").find(".alert p").remove(),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function o(e,t){e.empty().addClass("border-light-color"),$('<div class="">Доступные аккаунты</div><select name="task-type" class="'+w+'"></select>').appendTo(e),t.forEach(function(e){$('<option class="list-group-item py-2" value="'+e+'">\n            '+e+"\n        </option>").appendTo($("."+w))}),$("."+w).on("change",function(){y=$("."+w+" option:selected").val(),_.init(w,S)})}function r(){var e=function(){return $('<div class="bot-text-fields mt-2">\n        <div class="row">\n            <div class="col">\n                <textarea class="form-control answer-words" rows="4" placeholder="Введите ключевые слова или фразы через запятую, при которых будет срабатывать чат-бот"></textarea>\n            </div>\n            <div class="col">\n                <textarea class="form-control answer-messages" rows="4" placeholder="Введите сообщение, которое будет отправляться, если присутствовали ключ.слова или фразы из столбца слева"></textarea>\n            </div>\n        </div>\n    </div>')};$(".js_add-bot").on("click",function(t){var n=$(".bot-text-fields").last();e().insertAfter(n)}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(c.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(c.CONST.events.tasks.NEW_TASK_CREATED)}),g.init(o)}function s(e){y=e.username}function l(e,t){switch(e){case 0:s(t)}}function u(){if($(".bot-page").length){var e={stepReducer:l,onSubmitHandler:a};p.init(e),r(),q.init(),window.PubSub.subscribe(c.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED_LAZY,function(e,t){_.init(w,S)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=u;var c=n(0),d=n(6),p=i(d),f=n(2),m=function(e){return e&&e.__esModule?e:{default:e}}(f),h=n(9),g=i(h),v=n(29),q=i(v),b=n(8),_=i(b),y="",w="js_logs-accounts",S={currentPageCls:".bot-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:c.CONST.url.tmTypes.chatBotT,pathSubType:c.CONST.url.tmTypes.chatBotSubT[0]}},function(e,t,n){"use strict";function i(){if($(".bot-page").length){var e={type:a.CONST.url.tmTypes.chatBotT,subtype:a.CONST.url.tmTypes.chatBotSubT[0]},t={$runs:$(".tasks-runs"),$stopped:$(".tasks-stopped")};(0,o.getTasksData)(t,e),window.PubSub.subscribe(a.CONST.events.tasks.NEW_TASK_CREATED,function(n,i){(0,o.getTasksData)(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=i;var a=n(0),o=n(5)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){function e(){a()}var t=r.default,n=c(),i=function(e){t.confirm(e).then(function(e){if(e.status&&"ok"===e.status.state){u.default.set(s.CONST.cookieStorage.emailConfirmed,"confirmed"),u.default.set(s.CONST.cookieStorage.token,e.data.token);sessionStorage.getItem("customersData");$(".confirm-registration").append("<p>confirmation status: "+e.status.state+"</p>"),setTimeout(function(){window.location="./profile.html"},1e3)}else e.status})},a=function(){var e=n.token;location.pathname.indexOf("confirm-registration")&&e&&i(e)};return{init:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confirmationWithRedirect=a;var o=n(3),r=i(o),s=n(0),l=n(4),u=i(l),c=function(){var e=window.location.search,t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,i){t[n]=i}),t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t;e.empty().addClass("border-light-color"),$('<li class="list-group-item py-2"><h3>UserTaskManager</h3></li>').appendTo(e),n.forEach(function(t){$('<li class="list-group-item py-2" data-username="'+t.type+'">\n                <div class="media-body d-flex">\n                    <div class="col task-type">\n                        '+(t.task_id?'<p class="mt-0 mb-1 name">'+t.task_id+"</p>":"")+'\n                    </div>\n                    <div class="col task-subtype">\n                        '+(t.subtype?'<p class="mt-0 mb-1 name">'+t.subtype+"</p>":"")+'\n                    </div>\n                    <div class="col task-progress">\n                        '+("STOPPED"===t.status.state?'<p class="mt-0 mb-1 name">Остановлено - '+t.status.reason+"</p>":"")+'\n                    </div>\n                    \x3c!--<div class="col task-progress">\n                        '+(t.progress?'<p class="mt-0 mb-1 name">Количество - '+t.progress.count+'</p>\n                                <p class="mt-0 mb-1 name">Процент - '+t.progress.percent+"</p>":"")+"\n                    </div>--\x3e\n                </div>\n            </li>").appendTo(e)})}function o(e){y.default.getMetadata(e).then(function(e){"ok"===e.status.state&&a($(".follow-tasks-list"),e.data.meta)})}function r(){o({type:b.CONST.url.tmTypes.followingT,subtype:x.subtype||b.CONST.url.tmTypes.followingSubT[0]})}function s(e){var t=S.default.fillRadioGroupList,n={type:b.CONST.url.tmTypes.followingT,subtype:x.subtype||b.CONST.url.tmTypes.followingSubT[0]};!function(t){if("FOLLOWING_BY_LIST"===n.subtype){$(".add-file").addClass("d-block"),$(".add-competitors").addClass("d-none").removeClass("d-block");var i=$(".js_add-new-task fieldset").get(e+1);$(i).find(".btn-next").attr("disabled","disabled")}else{$(".add-competitors").addClass("d-block"),$(".add-file").addClass("d-none").removeClass("d-block");var a=$(".js_add-new-task fieldset").get(e+1);$(a).find(".btn-next").removeAttr("disabled")}}(n.subtype),y.default.getDefaultConfigs(n).then(function(e){if("ok"===e.status.state){var n=e.data.found.cfg.task_modes;t($(".js_follow-speed"),n)}})}function l(){var e=$("#followers").val().trim().replace(/ /g,"").split(",").filter(function(e){return e.length>0});x.user_custom_config={competitors:e}}function u(){var e=$(".js_follow-competitors"),t=e.closest(".add-competitors").find(".btn-next"),n=/^[A-Za-z0-9,._ \n]+$/;t.attr("disabled","disabled"),e.on("input",function(){var i=e.val();t.attr("disabled","disabled"),i.length&&n.test(i)?(e.removeClass("border-danger"),t.removeAttr("disabled","disabled")):e.addClass("border-danger")})}function c(e){switch(e){case 0:r(x.username);break;case 1:s(e),u();break;case 2:l()}}function d(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")}function p(e){var t=$(e);$(".js_profile-user-follow>.container").removeClass("container"),(0,C.attachTxtFileHandler)(".file-upload-container"),t.find("fieldset:first-child").fadeIn("slow"),t.find('input[type="text"]').on("focus",function(){$(this).removeClass("input-error")}),t.find(".btn-next").on("click",function(){var e=$(this).parents("fieldset"),t=!0,n=e.find('input[name="userAccountRadio"]:checked');n.length>0&&(x.username=n.parents("li").data("username")),c(e.index(),x),e.find('input[type="text"],input[type="email"]').each(function(){""===$(this).val()?($(this).addClass("input-error"),t=!1):$(this).removeClass("input-error")}),t&&e.fadeOut(400,function(){$(this).next().fadeIn()})}),t.find(".btn-previous").on("click",function(){$(this).parents("fieldset").fadeOut(400,function(){$(this).prev().fadeIn()})}),$(".js_follow-speed input[type=radio]").on("click",function(){var e=$(this).attr("value");x.user_default_config={task_mode:e.toUpperCase()}}),$(".js_get-follow-type input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");x.subtype=t.toUpperCase()}),t.on("submit",function(e){x.user_default_config=g({},x.user_default_config,{criteria:{}});var t=document.forms["follow-form"].limit,n={from:document.forms["follow-form"].have_posts_from.value,to:document.forms["follow-form"].have_posts_to.value},i={from:document.forms["follow-form"].have_followers_from.value,to:document.forms["follow-form"].have_followers_to.value},a={from:document.forms["follow-form"].have_followings_from.value,to:document.forms["follow-form"].have_followings_to.value};if(""===t.value)return t.focus(),!1;x.user_default_config.criteria={limit:t.value,unfollow_then:!!$("#unfollow_then:checked").length,follow_on_closed_profiles:!!$("#follow_on_closed_profiles:checked").length,have_posts:n,have_followers:i,have_followings:a},$(this).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),x.type=b.CONST.url.tmTypes.followingT,"FOLLOWING_BY_LIST"===x.subtype&&(x.user_custom_config.attachment={list_id:$(".add-file .file-upload-container").attr("attached-txt-id")}),x.subtype,b.CONST.url.tmTypes.followingSubT[1],y.default.postStartFollowingList(x,d).then(function(e){"ok"===e.status.state&&($(".form-submit-finish").find(".alert p").remove(),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(b.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(b.CONST.events.tasks.NEW_TASK_CREATED)}),$(".js_follow-clear-competitors").on("click",function(){$(".js_follow-competitors").val("")})}function f(e){k=e}function m(){var e=$(".accounts-list"),t=e.find("li.media");t.addClass("js_user-radio").removeClass("py-3 media");for(var n=0;n<t.length;n++)$(t[n]).wrapInner(function(e){return'<label class="accounts-list--label-wrapper col mb-0 media py-3" for="customRadio-'+e+'"></label>'}(n)).append(function(e){return'<div class="">\n            <input type="radio" name="userAccountRadio" id="customRadio-'+e+'" class="custom-control-input d-none" value="">\n        </div>'}(n));$(".js_user-radio").on("click","input[type=radio]",function(e){var t=$(this).parents("fieldset");$("li.active",t).removeClass("active"),$(this).closest("li").addClass("active"),$(".btn-next",t).prop("disabled",!1)})}function h(){var e=$(".follow").length;if(e){var t={type:b.CONST.url.tmTypes.followingT,subtype:b.CONST.url.tmTypes.followingSubT[0],subtypes:b.CONST.url.tmTypes.followingSubT};q.init({isInCorrectPage:e,initialPath:t}),p(".follow-form");var n=["По списку","По активной аудитории конкурентов"];(0,T.initLogsTab)({logsState:b.CONST.logsState,logsSubtypes:t.subtypes,clsConst:E,setUserNameCb:f,textRusArray:n}),window.PubSub.subscribe(b.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_RENDERED,function(e,t){m()})}}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.modifyAccList=m,t.init=h;var v=n(17),q=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),b=n(0),_=n(2),y=i(_),w=n(1),S=i(w),C=n(12);n(46);var T=n(11),x={username:"",subtype:b.CONST.url.tmTypes.followingSubT[0],user_default_config:{task_mode:"SAFE"}},k="",E={currentPageCls:".follow",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:b.CONST.url.tmTypes.followingT,pathSubType:b.CONST.url.tmTypes.followingSubT[0]}},function(e,t,n){"use strict";function i(e){var t=o[e],n=t.hamburgerMenuCls,i=t.hamburgerButtonCls,a=t.hamburgerButtonCloseClass,r=t.hamburgerMenuOpenedClass;$(i).toggleClass(a),$(n).toggleClass(r)}function a(){$(o.leftMenu.hamburgerButtonCls).on("click",i.bind(this,"leftMenu")),$(o.rightMenu.hamburgerButtonCls).on("click",i.bind(this,"rightMenu")),$(o.subHeader.hamburgerButtonCls).on("click",i.bind(this,"subHeader"))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=a;var o={leftMenu:{hamburgerButtonCls:"#aside_mobile__button",hamburgerMenuCls:".aside-burger-menu",hamburgerMenuOpenedClass:"burger-menu--closed",hamburgerButtonCloseClass:"burger-menu__button--close"},rightMenu:{hamburgerButtonCls:"#header_mobile_toggler",hamburgerMenuCls:".r-side-burger-menu",hamburgerMenuOpenedClass:"r-side-burger-menu--open",hamburgerButtonCloseClass:"burger-menu-right__button--close"},subHeader:{hamburgerButtonCls:"#header_mobile_topbar_toggler",hamburgerMenuCls:".sub-header",hamburgerMenuOpenedClass:"sub-header--open",hamburgerButtonCloseClass:"sub-header-button--close"}}},function(e,t,n){"use strict";function i(){$(d).text("**emailNotConfirmed** Email не подтвержден.").css("color","lightcoral")}function a(e,t){$(u.CONST.uiSelectors.headerNavLoginBtn).addClass(p).removeClass(f),$(u.CONST.uiSelectors.headerRegBtn).addClass(p).removeClass(f),$(u.CONST.uiSelectors.headerLoginBox).addClass(p).removeClass(f),$(".nav-link.js_logOut").addClass(f).removeClass(p),$(c).text("**onLoginSubscribe** вы залогинились в Luxgram успешно").css("color","lightblue"),l.default.isEmailConfirmed()||i()}function o(){var e=l.default.isLoggedIn();(l.default.isEmailConfirmed()||i(),e)?($(".nav-link.js_logOut").parent().show(),$(".js_email-confirm--text").text("вы залогинились успешно"),document.referrer.includes("confirm-registration")&&$(".js_message_logged--text").text("вы подтвердили регистрацию"),a()):($(c).text("Привет анонимный пользователь"),$(d).empty())}function r(){o()}Object.defineProperty(t,"__esModule",{value:!0}),t.initHeader=r;var s=n(3),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(0),c=".js_message_logged--text",d=".js_email-confirm--text",p="d-none",f="d-block"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={deleteBtnCls:".js_acc-delete",updateBtnCls:".js_acc-refresh",editBtnCls:".js_acc-edit"};$(t.updateBtnCls).off(),e(t)}function o(e){var t=e.deleteBtnCls,n=e.updateBtnCls,i=e.editBtnCls,s=$("#delete-user-promt"),d="",f={},h={replaceWith:!0,holderCls:".modal-image-holder",uploadBtnCls:".js_edit-profile-img-upd",imageCls:"img.user-avatar"};m.init(h),window.PubSub.subscribe(u.CONST.events.autoarnswer.IMAGE_UPLOADED_AVATAR,function(e,t){var n=JSON.parse(t.response),i=n.data.profile.profile_pic_url;f.$li.find("img").attr("src",i)}),$(t).on("click",function(e){d=$(e.target).closest(t).data("username"),s.modal("show")}),$(".js_acc-delete-confirm").on("click",function(e){l.default.delInstagramAccount(d).then(function(e){"ok"===e.status.state&&(s.hide(),window.PubSub.publish(u.CONST.events.instagramAccouns.INSTAGRAM_ACCOUNS_NEED_REFRESH))})}),$(n).on("click",function(e){var t=$(e.target).closest("li"),i=$(e.target).closest(n).data("username"),r=u.CONST.user.defaulAvatar;p.default.add(t,""),l.default.updateInstagramAccount(i).then(function(e){var n=e.data.account;t.replaceWith((0,c.renderItem)(n,t,r)),a(o),p.default.remove()})});var g=$("#edit-user-promt");$(i).on("click",function(e){var t=$(e.target).closest("li"),n=t.find(i),a=n.data("username"),o=n.data("name"),r=n.data("url"),s=n.data("biography"),l=n.data("img"),u=n.data("is_business"),c=n.data("is_private"),d=g.find("form").get(0),p={login:d.login,username:d.username,site:d.site,about:d.biography,userAvatarImg:d.userAvatar};f={login:o,username:a,site:r,about:s,$li:t,followerC:n.data("follower_count"),followingC:n.data("following_count"),mediaC:n.data("media_count")},h.username=a,p.login.value=o,p.username.value=a,p.site.value=r,p.about.value=s,p.userAvatarImg.src=l;var m=g.find(".bussines-profile");u?m.addClass("d-none").removeClass("d-block"):(m.addClass("d-block"),c?(m.find(".js_btn-prof-type-switcher #closed-profile-on").closest("label").addClass("active").find("#closed-profile-on").attr("checked","checked"),m.find(".js_btn-prof-type-switcher #closed-profile-off").closest("label").removeClass("active").find("#closed-profile-off").attr("checked",!1)):(m.find(".js_btn-prof-type-switcher #closed-profile-off").closest("label").addClass("active").find("#closed-profile-off").attr("checked","checked"),m.find(".js_btn-prof-type-switcher #closed-profile-on").closest("label").removeClass("active").find("#closed-profile-on").attr("checked",!1))),window.PubSub.subscribe("update_data_private_on_acc_list",function(e,t){n.data("is_private","closed-profile-off"!==t)}),g.modal("show")}),$(".js_edit-profile-modify").on("click",function(e){var t=g.find("form").get(0),n={login:t.login,username:t.username,site:t.site,about:t.biography,userAvatarImg:t.userAvatar},u={},d=!1;f.username!==n.username.value&&(u.username=n.username.value,d=!0),f.login!==n.login.value&&(u.name=n.login.value),f.about!==n.about.value&&(u.biography=n.about.value),f.site!==n.site.value&&(u.url=n.site.value),n.about.value,l.default.editInstagramAccount(f.username||"",JSON.stringify(u)).then(function(e){if("ok"===e.status.state){var t=e.data.profile;if(t.info=e.data.profile,t.info=r({},t.info,{follower_count:f.followerC,following_count:f.followingC,media_count:f.mediaC}),f.$li.replaceWith((0,c.renderItem)(t,f.$li,!1)),a(o),d){f.$li.find(i).data("username",t.info.username),d=!1}s.hide()}})}),$(".js_btn-prof-type-switcher label").on("click",function(e){var t=$(e.target).find("input[type=radio]").attr("value"),n="closed-profile-off"===t,i={open:n};l.default.editInstagramAccount(f.username||"",JSON.stringify(i)).then(function(e){"ok"===e.status.state&&window.PubSub.publish("update_data_private_on_acc_list",t)})})}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.settingButtonsHandler=o;var s=n(3),l=i(s),u=n(0),c=n(18),d=n(14),p=i(d),f=n(7),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(){b()}var n=this,i=e._formId,a=e._buttonSubmitId,o=e._showLoginBoxBtnId,s=e._loginBox,u=r.default,d=$(i),m=d.find('input[name="mail"]'),h=$("#description"),g=function(e){var t=function(e){$(s).append("<p>result.status.message</p>")};return u.login(e,t).then(function(e){e&&e.data&&e.data.token?(c.default.set(f.CONST.cookieStorage.token,e.data.token),$(".nav-link.js_logOut").parent().show(),p.default.showInfoMessage(h,e.status.state,e.status.message||"Login succsess")):e.status&&p.default.showInfoMessage(n.$textAreaDescription,"<p>status: "+e.status.state+"</p><p> message: "+e.status.message+"</p>")}).then(function(e){e&&e.status&&p.default.showInfoMessage(h,e.status.state,e.status.message||"Login error")})},v=function(t){var n=m.val(),i=d.find('input[name="pass"]').val(),a=t||{email:n,password:i};e.isLoginInstagram||(m.val(m.val().toLocaleLowerCase()),g(a).then(function(){l.default.publish(f.CONST.events.USER_LOGGED,"login")}))},q=function(){c.default.remove(f.CONST.cookieStorage.token),l.default.publish(f.CONST.events.USER_LOGOUT)},b=function(){var t=$(o),n=$(s);t.on("click",function(){e.isLoginInstagram||n.css({top:0,right:0}).addClass("bg-light border mt-5 mx-auto position-absolute"),n.addClass("d-block").removeClass("d-none")});$(a).on("click",function(e){e.preventDefault();var t=d.get(0);t.checkValidity()&&p.default.isEmail(m.val())?v():(t.reportValidity&&t.reportValidity(),d.addClass("form-validation"))}),$(".nav-link.js_logOut").on("click",function(e){e.preventDefault(),q(),$(e.target).parent().hide(),p.default.showInfoMessage(h,"Logged out")}),l.default.subscribe(f.CONST.events.USER_LOGOUT,function(e){$(f.CONST.uiSelectors.headerNavLoginBtn).addClass("d-block").removeClass("d-none"),$(f.CONST.uiSelectors.headerRegBtn).addClass("d-block").removeClass("d-none"),$(".nav-link.js_logOut").addClass("d-none").removeClass("d-block"),$(".js_message_logged--text").text("Вы вышли из аккаунта")}),$(document).on("click",function(e){var t=$(e.target).closest("nav.navbar").find(n).length,i=$(e.target).attr("id")===f.CONST.uiSelectors.instagram.addAccountBtnId;t||!n.hasClass("d-block")||i||n.addClass("d-none").removeClass("d-block")})};return{init:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginForm=a;var o=n(3),r=i(o),s=n(10),l=i(s),u=n(4),c=i(u),d=n(1),p=i(d),f=n(0)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=$(".messages-list"),t=$(".messages-user-list");return!!e.length&&!!t.length}function o(e,t,n){var i=$(".messages-user-list");e&&_.default.getMetadataDetailUsers({cursor:e,username:n}).then(function(a){if(a.data){var o=a.data;(0,y.appendUserList)(i,o.meta,{cursor:e,section:t,username:n});var r=o.pagination;if(r&&r.prev_cursor);else{$("#collapse-"+t).closest("li").find(".js_load-more-box").addClass("d-none"),clearInterval(A)}}})}function r(e){var t=$(".messages-user-list"),n="";e||(n=t.find("li .collapse.show").attr("id")),_.default.getMetadata(k).then(function(i){if(i.data){var a=i.data;a.meta.sort(function(e,t){return e.username.localeCompare(t.username)}),(0,y.fillUserList)(t,a,o),a.settings&&a.settings.invoke_in_millis&&(O=a.settings.invoke_in_millis,O=O>6e3?O:1e4),e?t.find("li:first-child .collapse").addClass("show"):$("#"+n).addClass("show"),N||(A=setInterval(function(){r()},O),N=!0)}})}function s(e,t){if(!R.allMsgLoaded){R.firstLoad&&(R.cursor=e.prev_cursor,R.firstLoad=!1);var n=E.data("conversation"),i=n.username,a=n.conversationId;S.default.add($("#mainChatPart"),"my-5 py-5"),_.default.getMetadataDetailConversation(k,{username:i,conversationId:a,cursor:R.cursor}).then(function(e){var n=e.data.meta.pagination&&e.data.meta.pagination.prev_cursor;S.default.remove(),D({$list:E,dataArray:e.data.meta.messages,isAppendPrevMsg:"appentPrevMsg",stateCfg:P}),n?(R.cursor=n,E.scrollTop(E.scrollTop()+30)):R.allMsgLoaded=!0,I&&(clearInterval(I),t(e.data.meta.pagination.prev_cursor))})}}function l(e,t){function n(e){e!==F&&(F=e,a=!0)}var i=!1,a=!0;F=t&&t.prev_cursor?t.prev_cursor:null,setTimeout(function(){E.on("scroll",function(){var e=$(this).scrollTop();i||(e+$(this).innerHeight()>=this.scrollHeight||e<=45&&(t&&a?(a=!1,s(t,n)):$(".messages-list-box").find(".load-more").remove()),i=!0,window.setTimeout(function(){i=!1},50))})},e+200)}function u(e,t){var n=e.username,i=e.conversationId,a=e.useravatar;_.default.getMetadataDetailConversation(k,{username:n,conversationId:i}).then(function(e){var o={useravatar:a,username:n};(0,y.fillMassagesList)({$list:E,dataArray:e.data.meta.messages,stateCfg:P,currentUserData:o}),S.default.remove(),$(".js_send-message-box").removeClass("d-none"),$(".messages-list").attr("data-conversation",JSON.stringify({username:n,conversationId:i})),t&&(E.animate({scrollTop:E[0].scrollHeight-E[0].clientHeight},10),U&&(B=e.data.meta.messages[e.data.meta.messages.length-1],U=!1)),l(10,e.data.meta.pagination)})}function c(e,t){var n=E.data("conversation"),i=n.username,a=n.conversationId,o=C.CONST.getPath("instagramDirect_Basic")+"/"+i+"/"+a+"/photo",r=e.files[0],s=new FormData,l=new XMLHttpRequest;s.append("photo",r,r.name),l.open("POST",o),l.setRequestHeader("token",t),l.setRequestHeader("Accept","application/json"),l.setRequestHeader("cache-control","no-cache"),l.send(s),l.addEventListener("readystatechange",function(){4===this.readyState&&window.PubSub.publish(C.CONST.events.autoarnswer.IMAGE_UPLOADED,{response:this.responseText,el:e})})}function d(){var e="",t=$("#sendMessageTextArea");$("#sendMessageButton").on("click",function(e){var n=t.val(),i=E.data("conversation"),a=i.username,o=i.conversationId,r=i.useravatar;S.default.add($(e.target),"spinner-box--sendMsg"),_.default.postMetadataDetailConversation(k,{username:a,conversationId:o,value:n}).then(function(e){e&&e.status&&"ok"===e.status.state&&(u({username:a,conversationId:o,useravatar:r}),t.val(""),S.default.remove())})}),(0,y.messageAreaHendler)(t,$("#sendMessageButton")),$(document).on("click",".list-group-item .collapse",function(t){t.stopPropagation();var n=$(t.target).closest(".list-group-item").data(),i=n.username,a=n.useravatar;e=$(t.target).closest(".media").data("conversation-id"),S.default.add($("#mainChatPart"),"my-5 py-5"),u({username:i,conversationId:e,useravatar:a},"isScrollDown"),U=!0,I&&clearInterval(I),I=setInterval(function(){e=$(t.target).closest(".media").data("conversation-id"),u({username:i,conversationId:e,useravatar:a})},O)}),window.PubSub.subscribe(C.CONST.events.messages.RECIEVE_NEW_MESSAGE,function(e,t){var n=t.username,i=t.conversationId,a=t.value;t.resultFromServer;$('.messages-user-list .list-group-item[data-username="'+n+'"] div[data-conversation-id="'+i+'"]').find(".summary").text(a)}),x.init(!1,c)}function p(){a()&&(r("setActiveFirst"),d())}Object.defineProperty(t,"__esModule",{value:!0}),t.init=p;var f=n(20),m=i(f),h=n(49),g=i(h),v=n(3),q=i(v),b=n(44),_=i(b),y=n(37),w=n(14),S=i(w),C=n(0),T=n(7),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(T),k=q.default.getToken(),E=$(".messages-list"),P={pageIncrement:0,loadingFlag:!1,setSingleVal:!1},O="",I=!1,F="",A=!1,D=function(e){function t(e,t,n){n&&$("li",e).remove(),e.css({overflow:"auto"}),$("<li/>").addClass("list-group-item text-center").text(t).appendTo(i)}var n=e.dataArray,i=e.$list,a=e.stateCfg;return"FINAL_PAGE"!==a.loadingFlag&&("FAIL"===n?(t(i,"Failure, possible key not correct.",!0),!1):"STOP_LOAD"===a.loadingFlag&&0!==n.length?(a.loadingFlag="FINAL_PAGE",t(i,"No more results.",!1),!1):null!==n&&n.length?void(0,y.fillMassagesList)(e):(t(i,"No results found.",!0),!1))};$(document).ready(function(){if(a()){var e=(new m.default,$('textarea[data-emoji-picker="true"] ~ div')),t=e.attr("style"),n=t.replace("top: 20px;","top: -210px;");e.attr("style",n);new g.default.FineUploader({element:document.getElementById("fine-uploader-validation"),template:"qq-template-validation",request:{endpoint:"/server/uploads"},thumbnails:{placeholders:{waitingPath:"https://fineuploader.com/source/placeholders/waiting-generic.png",notAvailablePath:"https://fineuploader.com/server/waiting-generic.png"}},validation:{allowedExtensions:["jpeg","jpg"],itemLimit:3,sizeLimit:512e3}})}});var N=!1,R={cursor:"pagination.prev_cursor",firstLoad:!0,allMsgLoaded:!1},B="",U=!0},function(e,t,n){"use strict";function i(e,t){t.pageIncrement=0,e.empty()}function a(e){var t=e.$list,n=e.dataArray,a=e.isAppendPrevMsg,o=e.stateCfg,r=e.currentUserData,s=n,u=t,c=function(e,t,n){var i="",a="",o=t.type,s=t.username,l=t.profile_pic_url,u=t.caption,c={username:s,profile_pic_url:l};if("text-right"===n&&(c.username=r.username,c.profile_pic_url=r.useravatar),"TEXT"===o){var d=/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/gm;a=e.replace(d,'<a href=$& target="_blank">$&</a>')}switch(o.toLowerCase()){case"photo":i='<div class="chat-img">\n                    <img src="'+e+'" alt="Content Image" class="content-image">\n                </div>';break;case"video":i='<div class="chat-video">\n                    <a target="_blank" href="'+e+'" class="position-relative">\n                        <i class="fa-3x fa-play-circle far position-absolute text-white chat-video--icon"></i>\n                        <img src="'+t.preview_value+'" alt="Content Image" class="chat-video--image">\n                    </a>\n                </div>';break;case"gif":i='<div class="chat-img">\n                    <img src="'+e+'" alt="Content Image" class="content-image">\n                </div>';break;case"like":i='<div class="chat-text '+n+'" >'+e+"</div>";break;case"post":i='<div class="chat-post-message">\n                    <a target="_blank" href="'+e+'" class="text-body text-decoration-none">\n                        <div class="chat-post-message--header">\n                            <img src="'+c.profile_pic_url+'" alt="Content Image" class="user-avatar mr-3">\n                            '+c.username+'\n                            <i class="fas fa-chevron-right"></i>\n                        </div>\n                        <img src="'+t.preview_value+'" alt="Content Image" class="content-image">\n                        '+(u?'<p class="chat-post-caption m-3">'+u+"<p>":"")+"\n                    </a>\n                </div>";break;case"text":i='<div class="chat-text '+n+'" >'+a+"</div>";break;default:i='<div class="chat-text '+n+'" >'+e+"</div>"}return i},d=function(e,t,n){e?t.insertBefore(n.find("li:first-child")):t.appendTo(n)};a||(u.empty().addClass("border-light-color"),i(u,o),$('<li class="mt-auto"></li>').appendTo(u)),s.forEach(function(e){var t=e,n=t.value.replace(/(?:\r\n|\r|\n)/g,"<br />");if("left"===t.side.toLowerCase()){var i=$('<li class="chat-item chat-item-left col flex-column-reverse" value="'+t.value+'">\n                <div class="d-flex">\n                '+(t.profile_pic_url?'<div class="chat-img-box"> \n                            <img src="'+t.profile_pic_url+'" alt="User Avatar" class="">\n                        </div>':"")+'\n                <div>\n                    <p class="chat-username text-muted">'+t.username+"</p>\n                    "+c(n,t,"text-left")+'\n                </div>\n                    <small class="chat-time-text">'+l.default.getFormattedDateUtil(t.timestamp)+"</small>\n                </div>\n                </div>\n            </li>");d(a,i,u)}else{var o=$('<li class="chat-item chat-item-right col flex-column-reverse" value="'+t.value+'">\n                <div class="d-flex justify-content-end">\n                    '+c(n,t,"text-right")+'\n                    <small class="pull-right chat-time-text">'+l.default.getFormattedDateUtil(t.timestamp)+"</small>\n                    </div>\n            </li>");d(a,o,u)}})}function o(e,t,n){var i=(n.cursor,n.section);n.username;$("#collapse-"+i).append(c(t.conversations))}function r(e,t,n){var i=t.meta,a=e,o="",r=function(e,t){return'<div class="list-footer text-center js_load-more-box" data-idx="'+e+'" data-cursor="'+t+'">\n        <button type="button" class="btn btn-outline-secondary btn-sm btn-submit">Загрузить еще</button>\n    </div>'};a.empty().addClass("border-light-color"),i.forEach(function(e,t){var n=e.pagination;o+='<li class="list-group-item" data-toggle="collapse" data-target="#collapse-'+t+'" \n                data-username="'+e.username+'"\n                data-userAvatar="'+e.profile_pic_url+'"\n                aria-expanded="true" aria-controls="collapse-'+t+'">\n            <div class="conversation-head mb-1 media pb-2" id="heading-'+t+'">\n                <span class="mr-3">\n                    <img src="'+e.profile_pic_url+'" alt="avatar"\n                    class="media-photo rounded-circle">\n                </span>\n                '+(e.unread_conversations>0?'<span class="badge badge-secondary position-absolute p-2">'+e.unread_conversations+"</span>":"")+'\n                <div class="media-body">\n                    <h4 class="title">\n                        '+e.username+'\n                    </h4>\n                </div>\n            </div>\n            <div id="collapse-'+t+'" class="collapse" aria-labelledby="heading-'+t+'" data-parent="#accordion">\n                '+c(e.conversations)+"\n            </div>\n            "+(n&&n.prev_cursor?r(t,n.prev_cursor):"")+"\n        </li>"}),$(o).appendTo(a),$(".js_load-more-box button").on("click",function(e){var t=$(e.target),i=t.closest(".js_load-more-box"),a=i.data("idx"),o=i.data("cursor"),r=i.closest("li").data("username");n(o,a,r),e.stopPropagation()})}Object.defineProperty(t,"__esModule",{value:!0}),t.messageAreaHendler=void 0,t.clearMassagesList=i,t.fillMassagesList=a,t.appendUserList=o,t.fillUserList=r;var s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){var t="";return e.forEach(function(n){e.length>1?t+='<img src="'+n.profile_pic_url+'" alt=\'image\' class="media-photo mr-1 media-photo--group" style="width: 24px;">':t+='<img src="'+n.profile_pic_url+'" alt=\'image\' class="media-photo mr-1" style="width: 24px;">'}),t},c=function(e){var t="";return e.forEach(function(e){var n=e.is_unread,i=e.last_message,a=i&&parseInt(i.length,10),o=a>0&&e.to.length>1&&n;t+='\n                <div class="media p-1" data-conversation-id="'+e.id+'">\n                    '+u(e.to)+'\n                    <div class="media-body">\n                        '+(o||n?'<span class="summary-dot"></span>':"")+"\n                        \x3c!-- {isUnread ? '<span class=\"summary-dot\"></span>' : ''} --\x3e\n                        <h5 class=\"title "+(n?"font-weight-bold":"")+" "+(o?"mr-2":"")+'">'+e.title+"</h5>\n                        "+(a>0&&1===e.to.length?'<p class="summary text-muted">'+i+"</p>":"")+"\n                    </div>\n                </div>\n            "}),t};t.messageAreaHendler=function(e,t){e.on("keydown",function(e){13===e.keyCode&&(e.ctrlKey?(e.preventDefault(),e.target.value+="\n"):(e.target.value.trim().length&&t.trigger("click"),e.preventDefault()))})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(10),s=i(r),l=n(3),u=i(l),c=n(4),d=i(c),p=n(0),f=n(1),m=i(f),h={form:".auth.register .form-signin",submitBtn:'[type="submit"]'},g=function(){function e(){a(this,e),this.user=u.default,this.$form=$(h.form),this.$email=this.$form.find('input[name="mail"]'),this.$textAreaDescription=$(".register--confirm"),this.formData={email:"test1_email@m.ru",password:"password"}}return o(e,[{key:"init",value:function(){$(".auth.register").length&&this.bindEvents()}},{key:"submitForm",value:function(e){var t=this,n=this.$email.val(),i=this.$form.find('input[name="pass"]'),a=this.$form.find('input[name="pass-confirm"]'),o=this.$form.find('input[name="pass"]').val();if(this.$form.find('input[name="pass-confirm"]').val()!==o)return i.addClass("border-danger"),void a.addClass("border-danger");i.removeClass("border-danger"),a.removeClass("border-danger"),this.$email.val(this.$email.val().toLocaleLowerCase()),this.formData=e||{email:n,password:o},this.user.register(this.formData).then(function(e){e.data&&e.data.token?(d.default.set(p.CONST.cookieStorage.emailConfirmed,"false"),d.default.set(p.CONST.cookieStorage.token,e.data.token),s.default.publish(p.CONST.events.USER_LOGGED)):m.default.showInfoMessage(t.$textAreaDescription,e.status.state,e.status.message||"no result.data found")}).then(function(e){e&&e.status&&(m.default.showInfoMessage(t.$textAreaDescription,e.status.state),$(".login-box").show())}).catch(function(e){$("#register-error-modal").modal("show")})}},{key:"bindEvents",value:function(){var e=this,t=p.CONST.uiSelectors.headerRegBox,n=$(h.submitBtn);n.on("click",function(t){var i=e.$form.get(0);t.preventDefault(),n.is(":disabled")||(i.checkValidity()?e.submitForm():(i.reportValidity&&i.reportValidity(),e.$form.addClass("form-validation")))}),s.default.subscribe(p.CONST.events.USER_LOGGED,function(){window.location.href="/instagram-integration/registration-success.html"}),$(document).on("click",function(e){!$(e.target).closest("nav.navbar").find(".register-box").length&&$(t).hasClass("d-block")&&$(t).addClass("d-none").removeClass("d-block")})}}]),e}();t.default=g},function(e,t,n){"use strict";function i(){var e=["instagram-accounts","autoanswer","stories","autogreeting","follow","unfollow","messages","chat-bot"],t=window.location.pathname;e.forEach(function(e){(t==="/instagram-integration/"+e+".html"||t==="/"+e+".html")&&$('nav.aside-burger-menu a[href*="/'+e+'"]').addClass("text-info").removeClass("text-light")})}Object.defineProperty(t,"__esModule",{value:!0}),t.initMenu=i},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=A.wizardFormName,n=document.forms[t],i=n.limit;if(""===i.value)return i.focus(),!1;var a=g({},D,{user_default_config:g({},D.user_default_config,{criteria:{max_views:i.value}}),user_custom_config:{},type:F.pathType,username:O});if(a.subtype===v.CONST.url.tmTypes.storiesSubT[2]){var o=E($(n).find(A.competitors));a.user_custom_config={competitors:o}}a.subtype===v.CONST.url.tmTypes.storiesSubT[0]&&(a.user_custom_config.attachment={list_id:$(".stories__file-upload-box .file-upload-container").attr("attached-txt-id")},delete a.user_default_config.criteria.max_views),$(n).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),b.default.postStartFollowingList(a).then(function(e){"ok"===e.status.state&&($(".form-submit-finish").find(".alert p").remove(),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function r(e){O=e}function s(e){O=e.username}function l(e,t,n){var i=/^[A-Za-z0-9,._ \n]+$/,a=function(t,a){var o=e.val();n.attr("disabled","disabled"),o.length&&i.test(o)?(e.removeClass("border-danger"),n.removeAttr("disabled","disabled")):a||e.addClass("border-danger")};a(0,"isInit"),e.on("input",a)}function u(){(0,k.attachTxtFileHandler)(".file-upload-container"),l(B,N,U),$(".js_get-stories-type input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");D.subtype=t.toUpperCase(),D.subtype===v.CONST.url.tmTypes.storiesSubT[1]?U.removeAttr("disabled","disabled"):U.attr("disabled","disabled")}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(v.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(v.CONST.events.tasks.NEW_TASK_CREATED)})}function c(e){var t=e.cfg.task_modes,n=A.taskMode;P($(n),t,"просмотров"),$(n+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");D.user_default_config.task_mode=t.toUpperCase()})}function d(){var e={type:F.pathType,subtype:D.subtype},t=function(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")};b.default.getStoriesConfig(e,t).then(function(e){if("ok"===e.status.state){var t=e.data.found,n=t.cfg.criteria.max_views;c(t),$("#limit").val(n)}})}function p(e){var t=A.wizardForm,n=$(t+" fieldset").get(e+1);D.subtype===v.CONST.url.tmTypes.storiesSubT[2]?(l(B,N,U),$(n).find(".js_stories-competitors").removeClass("d-none")):$(n).find(".js_stories-competitors").addClass("d-none")}function f(e){var t=A.wizardForm,n=$(t+" fieldset").get(e+1),i=$(n).find(".stories__file-upload-box"),a=$(n).find(".js_add-file-title"),o=$(n).find(".js_add-settings-step-4");D.subtype===v.CONST.url.tmTypes.storiesSubT[0]?(i.removeClass("d-none"),$(".js_validate-txt-file-is-uploaded").attr("disabled","disabled"),a.removeClass("d-none"),o.addClass("d-none")):(i.addClass("d-none"),a.addClass("d-none"),o.removeClass("d-none"))}function m(e,t){switch(e){case 0:s(t);break;case 1:d();break;case 2:p(e),f(e)}}function h(){var e=$(F.currentPageCls).length;if(e){var t={stepReducer:m,onSubmitHandler:o};S.init(t),u();var n=["По списку","По подписчикам","По активной аудитории конкурентов"];(0,x.initLogsTab)({logsState:I,logsSubtypes:v.CONST.url.tmTypes.storiesSubT,clsConst:F,setUserNameCb:r,textRusArray:n}),T.init({isInStoriesPage:e}),window.PubSub.subscribe(v.CONST.events.autoarnswer.TEXT_FILE_UPLOADED,function(e,t){$(".js_validate-txt-file-is-uploaded").removeAttr("disabled")})}}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.init=h;var v=n(0),q=n(2),b=a(q),_=n(1),y=a(_),w=n(6),S=i(w),C=n(41),T=i(C),x=n(11),k=n(12),E=y.default.getValByCommaSeparator,P=y.default.fillRadioGroupList,O="",I=v.CONST.logsState,F={currentPageCls:".stories-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:v.CONST.url.tmTypes.storiesT,pathSubType:v.CONST.url.tmTypes.storiesSubT[0]},A={wizardForm:".wizard-form",wizardFormName:"wizard-form",fields:".autoanswer-text-fields",taskMode:".js_task-mode",competitors:"textarea.stories-competitors"},D={subtype:v.CONST.url.tmTypes.storiesSubT[0],user_default_config:{task_mode:"SAFE"}},N=".js_add-settings-step-4",R=$(N),B=R.find(".js_stories-competitors textarea"),U=R.find(".js_stories-competitors-btn")},function(e,t,n){"use strict";function i(e){var t=$(e.target).find("option:selected").val(),n=o({},c,{subtype:t});$(".js_logs-container").addClass("d-block"),$("option.js_empty-subtype").remove(),(0,s.getTasksData)(d,n)}function a(e){if(e.isInStoriesPage){var t=["По списку","По подписчикам","По активной аудитории конкурентов"];u.default.addDropdown(p.wrapperSubtype,r.CONST.url.tmTypes.storiesSubT,{logsState:p,dropdownOnSelectCb:i,textRusArray:t}),window.PubSub.subscribe(r.CONST.events.tasks.NEW_TASK_CREATED,function(e,t){(0,s.getTasksData)(d,c)})}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.init=a;var r=n(0),s=n(5),l=n(15),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c={type:r.CONST.url.tmTypes.storiesT,subtype:r.CONST.url.tmTypes.storiesSubT[0]},d={$all:$(".tasks-all"),$stopped:$(".tasks-stopped")},p={wrapperSubtype:$(".subtype--box")}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=A.wizardFormName,n=document.forms[t],i=v({},D,{user_custom_config:{},type:F.pathType,username:O});D.subtype===q.CONST.url.tmTypes.unfollowingSubT[0]&&(i.user_custom_config.attachment={list_id:$(".add-file .file-upload-container").attr("attached-txt-id")}),$(n).find('input[type="text"],input[type="number"],input[type="email"]').each(function(){""===$(this).val()?(e.preventDefault(),$(this).addClass("input-error")):$(this).removeClass("input-error")}),_.default.postStartFollowingList(i).then(function(e){"ok"===e.status.state&&($(".form-submit-finish").find(".alert p").remove(),$(".form-submit-finish").addClass("d-block").find(".alert").append("<p>task_id: "+e.data.task_id+"</p>"))})}function r(){$(A.typeRadioGroup+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");D.subtype=t.toUpperCase()}),$(".form-submit-finish .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(q.CONST.events.tasks.NEW_TASK_CREATED)}),$(".form-submit-finish--error .close").on("click",function(){$("#v-pills-all-tab").trigger("click"),window.PubSub.publish(q.CONST.events.tasks.NEW_TASK_CREATED)})}function s(){var e=A.wizardForm;$(e).find('button[type="submit"]').attr("disabled",!1)}function l(e){!function(e){e===q.CONST.url.tmTypes.unfollowingSubT[0]?$(".add-file").addClass("d-block"):($(".add-file").addClass("d-none").removeClass("d-block"),s())}(e)}function u(e){var t=e.cfg.task_modes,n=A.taskMode;P($(n),t,"отписок"),l(e.id.subtype),$(n+" input[type=radio]").on("click",function(e){var t=$(e.target).attr("value");D.user_default_config.task_mode=t.toUpperCase()})}function c(){var e={type:F.pathType,subtype:D.subtype},t=function(e){var t=e.status.message;$(".form-submit-finish--error").addClass("d-block").find(".alert").append("<p>"+t+"</p>")};_.default.getStoriesConfig(e,t).then(function(e){if("ok"===e.status.state){u(e.data.found)}})}function d(e){O=e}function p(e){O=e.username}function f(e){var t=A.wizardForm,n=$(t+" h3").get(e+1);D.subtype===q.CONST.url.tmTypes.unfollowingSubT[0]?$(n).text("Выберите режим и добавьте файл с пользователями"):$(n).text("Выберите режим")}function m(e){var t=A.wizardForm;if(D.subtype===q.CONST.url.tmTypes.unfollowingSubT[1]){var n=$(t+" fieldset").get(e+1);$(n).find(".form-bottom>.row").after('<div class="row">\n            <label class="">Конкуренты</label>\n            <textarea class="form-control stories-competitors mb-2" rows="1"></textarea></div>')}}function h(e,t){switch(e){case 0:p(t);break;case 1:c(),f(e);break;case 2:m(e)}}function g(){var e=$(F.currentPageCls).length;if(e){var t={stepReducer:h,onSubmitHandler:o};T.init(t),r(),(0,S.attachTxtFileHandler)(".file-upload-container",s);var n=["По списку","От всех","От невзаимных"];(0,E.initLogsTab)({logsState:q.CONST.logsState,logsSubtypes:I,clsConst:F,setUserNameCb:d,textRusArray:n}),k.init({isInStoriesPage:e})}}Object.defineProperty(t,"__esModule",{value:!0});var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.init=g;var q=n(0),b=n(2),_=a(b),y=n(1),w=a(y),S=n(12),C=n(6),T=i(C),x=n(43),k=i(x),E=n(11),P=w.default.fillRadioGroupList,O="",I=q.CONST.url.tmTypes.unfollowingSubT,F={currentPageCls:".unfollow-page",tasksList:".log-tasks",logsTabBtn:"#v-pills-logs-tab",pagination:".logs-pagination",paginationPgNumber:".page-number",pathType:q.CONST.url.tmTypes.unfollowingT,pathSubType:q.CONST.url.tmTypes.unfollowingSubT[0]},A={wizardForm:".wizard-form",wizardFormName:"wizard-form",fields:".autoanswer-text-fields",taskMode:".js_task-mode",typeRadioGroup:".js_get-unfollow-type",competitors:"textarea.stories-competitors"},D={subtype:q.CONST.url.tmTypes.unfollowingSubT[0],user_default_config:{task_mode:"SAFE"}}},function(e,t,n){"use strict";function i(e){var t=e.isInStoriesPage;if(t){var n={type:a.CONST.url.tmTypes.unfollowingT,subtype:a.CONST.url.tmTypes.unfollowingSubT[0],subtypes:a.CONST.url.tmTypes.unfollowingSubT},i=["По списку","От всех","От невзаимных"];r.init({isInCorrectPage:t,initialPath:n,textRusArray:i})}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=i;var a=n(0),o=n(17),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=n(13),u=i(l),c=n(4),d=i(c),p=function(){function e(){a(this,e),this.network=new u.default,this.cookieStorage=d.default,this.settingPost={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}}return r(e,[{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"isEmailConfirmed",value:function(){return"confirmed"===this.cookieStorage.get(s.CONST.cookieStorage.emailConfirmed)}},{key:"getToken",value:function(){return this.cookieStorage.get(s.CONST.cookieStorage.token)}},{key:"getMetadata",value:function(e,t){return this.network.sendRequest(""+s.CONST.getPath("instagramDirect_getMetaData"),{headers:{token:this.getToken()}},t)}},{key:"getMetadataDetailUsers",value:function(e,t){var n=e.cursor?"?cursor="+e.cursor:"";return this.network.sendRequest(s.CONST.getPath("instagramDirect_getMetaData")+"/"+e.username+n,{headers:{token:this.getToken()}},t)}},{key:"getMetadataDetailConversation",value:function(e,t,n){var i=t.cursor?"?cursor="+t.cursor:"";return this.network.sendRequest(s.CONST.getPath("instagramDirect_getMetaData")+"/"+t.username+"/"+t.conversationId+i,{headers:{token:e}},n)}},{key:"postMetadataDetailConversation",value:function(e,t,n){var i=o({},this.settingPost,{body:JSON.stringify({value:t.value}),headers:o({},this.settingPost.headers,{token:this.getToken()})});return this.network.sendRequest(s.CONST.getPath("instagramDirect_postMessage")+"/"+t.username+"/"+t.conversationId+"/text",i,n)}}]),e}(),f=null;f||(f=new p),t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(){$(".auth.login").length&&q()}var n=this,i=e._formId,a=e._buttonSubmitId,o=e._loginBox,s=r.default,u=$(i),d=u.find('input[name="mail"]'),m=$("#description"),h=function(e){var t=function(e){$("#error-modal").modal("show")};return s.login(e,t).then(function(e){e&&e.data&&e.data.token?(c.default.set(f.CONST.cookieStorage.token,e.data.token),$(".nav-link.js_logOut").parent().show(),p.default.showInfoMessage(m,e.status.state,e.status.message||"Login succsess")):e.status&&p.default.showInfoMessage(n.$textAreaDescription,"<p>status: "+e.status.state+"</p><p> message: "+e.status.message+"</p>")}).then(function(e){e&&e.status&&p.default.showInfoMessage(m,e.status.state,e.status.message||"Login error")})},g=function(t){var n=d.val(),i=u.find('input[name="pass"]').val(),a=t||{email:n,password:i};e.isLoginInstagram||(d.val(d.val().toLocaleLowerCase()),h(a).then(function(){window.location.href="/instagram-integration/instagram-accounts.html"}))},v=function(){c.default.remove(f.CONST.cookieStorage.token),l.default.publish(f.CONST.events.USER_LOGOUT)},q=function(){var e=$(o);$(a).on("click",function(e){e.preventDefault();var t=u.get(0);t.checkValidity()&&p.default.isEmail(d.val())?g():(t.reportValidity&&t.reportValidity(),u.addClass("form-validation"))}),$(".nav-link.js_logOut").on("click",function(e){e.preventDefault(),v(),$(e.target).parent().hide(),p.default.showInfoMessage(m,"Logged out")}),l.default.subscribe(f.CONST.events.USER_LOGOUT,function(e){$(f.CONST.uiSelectors.headerNavLoginBtn).addClass("d-block").removeClass("d-none"),$(f.CONST.uiSelectors.headerRegBtn).addClass("d-block").removeClass("d-none"),$(".nav-link.js_logOut").addClass("d-none").removeClass("d-block"),$(".js_message_logged--text").text("Вы вышли из аккаунта")}),$(document).on("click",function(t){var n=$(t.target).closest("nav.navbar").find(e).length,i=$(t.target).attr("id")===f.CONST.uiSelectors.instagram.addAccountBtnId;n||!e.hasClass("d-block")||i||e.addClass("d-none").removeClass("d-block")})};return{init:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginPage=a;var o=n(3),r=i(o),s=n(10),l=i(s),u=n(4),c=i(u),d=n(1),p=i(d),f=n(0)},function(module,exports){if("undefined"==typeof brutusin)window.brutusin=new Object;else if("object"!=typeof brutusin)throw"brutusin global variable already exists";!function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();(void 0===t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t}),String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.format||(String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e});var BrutusinForms=new Object;BrutusinForms.messages={validationError:"Validation error",required:"This field is **required**",invalidValue:"Invalid field value",addpropNameExistent:"This property is already present in the object",addpropNameRequired:"A name is required",minItems:"At least `{0}` items are required",maxItems:"At most `{0}` items are allowed",pattern:"Value does not match pattern: `{0}`",minLength:"Value must be **at least** `{0}` characters long",maxLength:"Value must be **at most** `{0}` characters long",multipleOf:"Value must be **multiple of** `{0}`",minimum:"Value must be **greater or equal than** `{0}`",exclusiveMinimum:"Value must be **greater than** `{0}`",maximum:"Value must be **lower or equal than** `{0}`",exclusiveMaximum:"Value must be **lower than** `{0}`",minProperties:"At least `{0}` properties are required",maxProperties:"At most `{0}` properties are allowed",uniqueItems:"Array items must be unique",addItem:"Add item",true:"True",false:"False"},BrutusinForms.decorators=new Array,BrutusinForms.addDecorator=function(e){BrutusinForms.decorators[BrutusinForms.decorators.length]=e},BrutusinForms.onResolutionStarted=function(e){},BrutusinForms.onResolutionFinished=function(e){},BrutusinForms.onValidationError=function(e,t){e.focus(),e.className.includes(" error")||(e.className+=" error"),alert(t)},BrutusinForms.onValidationSuccess=function(e){e.className=e.className.replace(" error","")},BrutusinForms.postRender=null,BrutusinForms.instances=new Array,BrutusinForms.create=function(schema){function validateDepencyMapIsAcyclic(){function e(t,n,i){if(n.hasOwnProperty(i))return void(error="Schema dependency graph has cycles");if(n[i]=null,!t.hasOwnProperty(i)){t[i]=null;var a=dependencyMap[i];if(a)for(var o=0;o<a.length;o++)e(t,n,a[o]);delete n[i]}}var t=new Object;for(var n in dependencyMap)t.hasOwnProperty(n)||e(t,new Object,n)}function appendChild(e,t,n){e.appendChild(t);for(var i=0;i<BrutusinForms.decorators.length;i++)BrutusinForms.decorators[i](t,n)}function createPseudoSchema(e){var t=new Object;for(var n in e)"items"!==n&&"properties"!==n&&"additionalProperties"!==n&&(t[n]="pattern"===n?new RegExp(e[n]):e[n]);return t}function getDefinition(e){var t=e.split("/"),n=root;for(var i in t)"0"!==i&&(n=n[t[i]]);return n}function containsStr(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function renameRequiredPropeties(e){if(e)if(e.hasOwnProperty("oneOf"))for(var t in e.oneOf)renameRequiredPropeties(e.oneOf[t]);else if(e.hasOwnProperty("$ref")){var n=getDefinition(e.$ref);renameRequiredPropeties(n)}else if("object"===e.type){if(e.properties){e.hasOwnProperty("required")&&Array.isArray(e.required)&&(e.requiredProperties=e.required,delete e.required);for(var i in e.properties)renameRequiredPropeties(e.properties[i])}if(e.patternProperties)for(var a in e.patternProperties){var o=e.patternProperties[a];(o.hasOwnProperty("type")||o.hasOwnProperty("$ref")||o.hasOwnProperty("oneOf"))&&renameRequiredPropeties(e.patternProperties[a])}e.additionalProperties&&(e.additionalProperties.hasOwnProperty("type")||e.additionalProperties.hasOwnProperty("oneOf"))&&renameRequiredPropeties(e.additionalProperties)}else"array"===e.type&&renameRequiredPropeties(e.items)}function populateSchemaMap(e,t){var n=createPseudoSchema(t);if(n.$id=e,schemaMap[e]=n,t){if(t.hasOwnProperty("oneOf")){n.oneOf=new Array,n.type="oneOf";for(var i in t.oneOf){var a=e+"."+i;n.oneOf[i]=a,populateSchemaMap(a,t.oneOf[i])}}else if(t.hasOwnProperty("$ref")){var o=getDefinition(t.$ref);if(o){if(t.hasOwnProperty("title")||t.hasOwnProperty("description")){var r={};for(var s in o)r[s]=o[s];t.hasOwnProperty("title")&&(r.title=t.title),t.hasOwnProperty("description")&&(r.description=t.description),o=r}populateSchemaMap(e,o)}}else if("object"===t.type){if(t.properties){n.properties=new Object;for(var s in t.properties){var a=e+"."+s;n.properties[s]=a;var l=t.properties[s];t.requiredProperties&&(containsStr(t.requiredProperties,s)?l.required=!0:l.required=!1),populateSchemaMap(a,l)}}if(t.patternProperties){n.patternProperties=new Object;for(var u in t.patternProperties){var c=e+"["+u+"]";n.patternProperties[u]=c;var d=t.patternProperties[u];d.hasOwnProperty("type")||d.hasOwnProperty("$ref")||d.hasOwnProperty("oneOf")?populateSchemaMap(c,t.patternProperties[u]):populateSchemaMap(c,SCHEMA_ANY)}}if(t.additionalProperties){var a=e+"[*]";n.additionalProperties=a,t.additionalProperties.hasOwnProperty("type")||t.additionalProperties.hasOwnProperty("oneOf")?populateSchemaMap(a,t.additionalProperties):populateSchemaMap(a,SCHEMA_ANY)}}else"array"===t.type&&(n.items=e+"[#]",populateSchemaMap(n.items,t.items));if(t.hasOwnProperty("dependsOn")){null===t.dependsOn&&(t.dependsOn=["$"]);for(var p=new Array,i=0;i<t.dependsOn.length;i++)t.dependsOn[i]?t.dependsOn[i].startsWith("$")?p[i]=t.dependsOn[i]:e.endsWith("]")?p[i]=e+"."+t.dependsOn[i]:p[i]=e.substring(0,e.lastIndexOf("."))+"."+t.dependsOn[i]:p[i]="$";schemaMap[e].dependsOn=p;for(var i=0;i<p.length;i++){var f=dependencyMap[p[i]];f||(f=new Array,dependencyMap[p[i]]=f),f[f.length]=e}}}}function renderTitle(e,t,n){if(e&&t){var i=document.createElement("label");"any"!==n.type&&"object"!==n.type&&"array"!==n.type&&(i.htmlFor=getInputId());if(appendChild(i,document.createTextNode(t+":"),n),n.description&&(i.title=n.description),n.required){var a=document.createElement("sup");appendChild(a,document.createTextNode("*"),n),appendChild(i,a,n),i.className="required"}appendChild(e,i,n)}}function getInputId(){return formId+"_"+inputCounter}function validate(e){var t=!0;if(e.hasOwnProperty("getValidationError")){var n=e.getValidationError();n?(BrutusinForms.onValidationError(e,n),t=!1):BrutusinForms.onValidationSuccess(e)}if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)validate(e.childNodes[i])||(t=!1);return t}function clear(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function render(e,t,n,i,a,o){var r=getSchemaId(n),s=getSchema(r);renderInfoMap[r]=new Object,renderInfoMap[r].titleContainer=e,renderInfoMap[r].container=t,renderInfoMap[r].parentObject=i,renderInfoMap[r].propertyProvider=a,renderInfoMap[r].value=o,clear(e),clear(t);var l=renderers[s.type];if(l&&!s.dependsOn)s.title?renderTitle(e,s.title,s):a&&renderTitle(e,a.getValue(),s),o||(o=void 0!==initialValue&&null!==initialValue?getInitialValue(n):s.default),l(t,n,i,a,o);else if(s.$ref&&obj.schemaResolver){var u=function(e){if(e&&e.hasOwnProperty(n)&&JSON.stringify(schemaMap[n])!==JSON.stringify(e[n])){cleanSchemaMap(n),cleanData(n),populateSchemaMap(n,e[n]);var t=renderInfoMap[n];t&&render(t.titleContainer,t.container,n,t.parentObject,t.propertyProvider,t.value)}BrutusinForms.onResolutionFinished(i)};BrutusinForms.onResolutionStarted(i),obj.schemaResolver([n],obj.getData(),u)}}function createPropertyProvider(e,t){var n=new Object;return n.getValue=e,n.onchange=t,n}function getInitialValue(id){var ret;try{eval("ret = initialValue"+id.substring(1))}catch(e){ret=null}return ret}function getValue(schema,input){if("function"==typeof input.getValue)return input.getValue();var value;return value="select"===input.tagName.toLowerCase()?input.options[input.selectedIndex].value:input.value,""===value?null:("integer"===schema.type?(value=parseInt(value),isFinite(value)||(value=null)):"number"===schema.type?(value=parseFloat(value),isFinite(value)||(value=null)):"boolean"===schema.type?"input"===input.tagName.toLowerCase()?(value=input.checked)||(value=!1):"select"===input.tagName.toLowerCase()&&(value="true"===input.value||"false"!==input.value&&null):"any"===schema.type&&value&&eval("value="+value),value)}function getSchemaId(e){return e.replace(/\["[^"]*"\]/g,"[*]").replace(/\[\d*\]/g,"[#]")}function getParentSchemaId(e){return e.substring(0,e.lastIndexOf("."))}function getSchema(e){return schemaMap[e]}function cleanSchemaMap(e){for(var t in schemaMap)e.startsWith(t)&&delete schemaMap[t]}function cleanData(e){new Expression(e).visit(data,function(e,t,n){delete t[n]})}function onDependencyChanged(e,t){var n=dependencyMap[e];if(n&&obj.schemaResolver){var i=function(e){if(e)for(var n in e)if(JSON.stringify(schemaMap[n])!==JSON.stringify(e[n])){cleanSchemaMap(n),cleanData(n),populateSchemaMap(n,e[n]);var i=renderInfoMap[n];i&&render(i.titleContainer,i.container,n,i.parentObject,i.propertyProvider,i.value)}BrutusinForms.onResolutionFinished(t)};BrutusinForms.onResolutionStarted(t),obj.schemaResolver(n,obj.getData(),i)}}function Expression(e){(null===e||0===e.length||"."===e)&&(e="$");for(var t=new Array,n=function(e){if(null===e)return null;for(var t=new Array,n=null,i=0,a=0;a<e.length;a++)'"'===e.charAt(a)?null===n?n='"':'"'===n&&(n=null,t[t.length]=e.substring(i,a+1).trim(),i=a+1):"'"===e.charAt(a)?null===n?n="'":"'"===n&&(n=null,t[t.length]=e.substring(i,a+1).trim(),i=a+1):"["===e.charAt(a)?null===n&&(i!==a&&(t[t.length]=e.substring(i,a).trim()),t[t.length]="[",i=a+1):"]"===e.charAt(a)?null===n&&(i!==a&&(t[t.length]=e.substring(i,a).trim()),t[t.length]="]",i=a+1):"."===e.charAt(a)?null===n&&(i!==a&&(t[t.length]=e.substring(i,a).trim()),i=a+1):a===e.length-1&&(t[t.length]=e.substring(i,a+1).trim());return t}(e),i=!1,a=0,o="",r=0;r<n.length;r++){var s=n[r];if("["===s){if(i)throw"Error parsing expression '"+e+"': Nested [ found";i=!0,a=0,o+=s}else if("]"===s){if(!i)throw"Error parsing expression '"+e+"': Unbalanced ] found";i=!1,o+=s,t[t.length]=o,o=""}else if(i){if(a>0)throw"Error parsing expression '"+e+"': Multiple tokens found inside a bracket";o+=s,a++}else t[t.length]=s;if(r===n.length-1&&i)throw"Error parsing expression '"+e+"': Unbalanced [ found"}this.exp=e,this.queue=t,this.visit=function(e,t){function n(e,i,a,o,r){if(null!=a){var s=i.shift();if("$"===s){e="$";var s=i.shift()}if(s)if(Array.isArray(a)){if(!s.startsWith("["))throw"Node '"+e+"' is of type array";var l=s.substring(1,s.length-1);if(l.equals("#"))for(var u=0;u<a.length;u++){var c=a[u];n(e+s,i.slice(0),c,a,u),n(e+"["+u+"]",i.slice(0),c,a,u)}else if("$"===l){var c=a[a.length-1];n(e+s,i.slice(0),c,a,a.length-1)}else{var d=parseInt(l);if(isNaN(d))throw"Element '"+l+"' of node '"+e+"' is not an integer, or the '$' last element symbol,  or the wilcard symbol '#'";if(0>d)throw"Element '"+l+"' of node '"+e+"' is lower than zero";var c=a[d];n(e+s,i.slice(0),c,a,d)}}else{if("object"!=typeof a)throw"boolean"==typeof a||"number"==typeof a||"string"==typeof a?"Node is leaf but still are tokens remaining: "+s:"Node type '"+typeof a+"' not supported for index field '"+e+"'";if("[*]"===s)for(var p in a){var c=a[p];n(e+s,i.slice(0),c,a,p),n(e+'["'+p+'"]',i.slice(0),c,a,p)}else{var c;if(s.startsWith("[")){var l=s.substring(1,s.length-1);if(!l.startsWith('"')&&!l.startsWith("'"))throw"Element '"+l+"' of node '"+e+"' must be a string expression or wilcard '*'";l=l.substring(1,l.length()-1),e+=s,c=a[l]}else e=e.length>0?e+"."+s:s,c=a[s];n(e,i,c,a,s)}}else t(a,o,r)}}n(this.exp,this.queue,e)}}var SCHEMA_ANY={type:"any"},obj=new Object,schemaMap=new Object,dependencyMap=new Object,renderInfoMap=new Object,container,data,error,initialValue,inputCounter=0,root=schema,formId="BrutusinForms#"+BrutusinForms.instances.length;renameRequiredPropeties(schema),populateSchemaMap("$",schema),validateDepencyMapIsAcyclic();var renderers=new Object;return renderers.integer=function(e,t,n,i,a){renderers.string(e,t,n,i,a)},renderers.number=function(e,t,n,i,a){renderers.string(e,t,n,i,a)},renderers.any=function(e,t,n,i,a){renderers.string(e,t,n,i,a)},renderers.string=function(e,t,n,i,a){var o,r=getSchemaId(t),s=getParentSchemaId(r),l=getSchema(r),u=getSchema(s);if("any"===l.type)o=document.createElement("textarea"),a&&(o.value=JSON.stringify(a,null,4),l.readOnly&&(o.disabled=!0));else if(l.media)o=document.createElement("input"),o.type="file",appendChild(o,c,l);else if(l.enum){if(o=document.createElement("select"),!l.required){var c=document.createElement("option"),d=document.createTextNode("");c.value="",appendChild(c,d,l),appendChild(o,c,l)}for(var p=0,f=0;f<l.enum.length;f++){var c=document.createElement("option"),d=document.createTextNode(l.enum[f]);c.value=l.enum[f],appendChild(c,d,l),appendChild(o,c,l),a&&l.enum[f]===a&&(p=f,l.required||p++,l.readOnly&&(o.disabled=!0))}1===l.enum.length?o.selectedIndex=1:o.selectedIndex=p}else{if(o=document.createElement("input"),"integer"===l.type||"number"===l.type)o.type="number",o.step=l.step?""+l.step:"any","number"!=typeof a&&(a=null);else if("date-time"===l.format)try{o.type="datetime-local"}catch(e){o.type="text"}else"email"===l.format?o.type="email":"text"===l.format?o=document.createElement("textarea"):o.type="text";null!==a&&void 0!==a&&(o.value=a,l.readOnly&&(o.disabled=!0))}return o.schema=r,o.setAttribute("autocorrect","off"),o.getValidationError=function(){try{var e=getValue(l,o);if(null===e){if(l.required){if(!u||"object"!==u.type)return BrutusinForms.messages.required;if(u.required)return BrutusinForms.messages.required;for(var t in n)if(null!==n[t])return BrutusinForms.messages.required}}else{if(l.pattern&&!l.pattern.test(e))return BrutusinForms.messages.pattern.format(l.pattern.source);if(l.minLength&&(!e||l.minLength>e.length))return BrutusinForms.messages.minLength.format(l.minLength);if(l.maxLength&&e&&l.maxLength<e.length)return BrutusinForms.messages.maxLength.format(l.maxLength)}if(null!==e&&!isNaN(e)){if(l.multipleOf&&e%l.multipleOf!=0)return BrutusinForms.messages.multipleOf.format(l.multipleOf);if(l.hasOwnProperty("maximum")){if(l.exclusiveMaximum&&e>=l.maximum)return BrutusinForms.messages.exclusiveMaximum.format(l.maximum);if(!l.exclusiveMaximum&&e>l.maximum)return BrutusinForms.messages.maximum.format(l.maximum)}if(l.hasOwnProperty("minimum")){if(l.exclusiveMinimum&&e<=l.minimum)return BrutusinForms.messages.exclusiveMinimum.format(l.minimum);if(!l.exclusiveMinimum&&e<l.minimum)return BrutusinForms.messages.minimum.format(l.minimum)}}}catch(e){return BrutusinForms.messages.invalidValue}},o.onchange=function(){var e;try{e=getValue(l,o)}catch(t){e=null}n?n[i.getValue()]=e:data=e,onDependencyChanged(r,o)},l.description&&(o.title=l.description,o.placeholder=l.description),o.onchange(),o.id=getInputId(),inputCounter++,appendChild(e,o,l),n},renderers.boolean=function(e,t,n,i,a){var o,r=getSchemaId(t),s=getSchema(r);if(s.required)o=document.createElement("input"),o.type="checkbox",!0===a&&(o.checked=!0);else{o=document.createElement("select");var l=document.createElement("option"),u=document.createTextNode("");u.value="",appendChild(l,u,s),appendChild(o,l,s);var c=document.createElement("option"),d=document.createTextNode(BrutusinForms.messages.true);c.value="true",appendChild(c,d,s),appendChild(o,c,s);var p=document.createElement("option"),f=document.createTextNode(BrutusinForms.messages.false);p.value="false",appendChild(p,f,s),appendChild(o,p,s),!0===a?o.selectedIndex=1:!1===a&&(o.selectedIndex=2)}o.onchange=function(){n?n[i.getValue()]=getValue(s,o):data=getValue(s,o),onDependencyChanged(r,o)},o.schema=r,o.id=getInputId(),inputCounter++,s.description&&(o.title=s.description),o.onchange(),appendChild(e,o,s)},renderers.oneOf=function(e,t,n,i,a){var o=getSchemaId(t),r=getSchema(o),s=document.createElement("select"),l=document.createElement("div");l.innerHTML="",s.type="select",s.schema=o;var u=document.createElement("option");u.value=null,appendChild(s,u,r);for(var c=0;c<r.oneOf.length;c++){var d=document.createElement("option"),p=o+"."+c,f=getSchema(p),m=document.createTextNode(f.title);if(d.value=r.oneOf[c],appendChild(d,m,r),appendChild(s,d,r),void 0!==a&&null!==a&&(r.readOnly&&(s.disabled=!0),a.hasOwnProperty("type")&&f.hasOwnProperty("properties")&&f.properties.hasOwnProperty("type"))){var h=getSchema(f.properties.type);a.type===h.enum[0]&&(s.selectedIndex=c+1,render(null,l,t+"."+(s.selectedIndex-1),n,i,a))}}s.onchange=function(){render(null,l,t+"."+(s.selectedIndex-1),n,i,a)},appendChild(e,s,r),appendChild(e,l,r)},renderers.object=function(e,t,n,i,a){function o(e,t,n,i,a,o){var r=getSchemaId(n),s=getSchema(r),l=t.tBodies[0],u=document.createElement("tr"),c=document.createElement("td");c.className="add-prop-name";var d=document.createElement("table"),p=document.createElement("tr"),f=document.createElement("td"),m=document.createElement("td"),h="$"+Object.keys(e).length+"$",g=document.createElement("td");g.className="prop-value";var v=document.createElement("input");v.type="text";var q;o&&(q=RegExp(o)),v.getValidationError=function(){return v.previousValue!==v.value&&e.hasOwnProperty(v.value)?BrutusinForms.messages.addpropNameExistent:v.value?void 0:BrutusinForms.messages.addpropNameRequired};var b=createPropertyProvider(function(){if(v.value){if(!q)return v.value;if(-1!==v.value.search(q))return v.value}return h},function(t){b.getValue()!==t&&(t&&e.hasOwnProperty(t)||(t=h),(e.hasOwnProperty(t)||q&&-1===b.getValue().search(q))&&(e[b.getValue()]=e[t],delete e[t]))});v.onblur=function(){if(v.previousValue!==v.value){for(var t=v.value,n=1;v.previousValue!==t&&e.hasOwnProperty(t);)t=v.value+"("+n+")",n++;return v.value=t,b.onchange(v.previousValue),void(v.previousValue=v.value)}};var _=document.createElement("button");_.setAttribute("type","button"),_.className="remove",appendChild(_,document.createTextNode("x"),s),_.onclick=function(){delete e[v.value],t.deleteRow(u.rowIndex),v.value=null,b.onchange(v.previousValue)},appendChild(f,v,s),appendChild(m,_,s),appendChild(p,f,s),appendChild(p,m,s),appendChild(d,p,s),appendChild(c,d,s),void 0!==o&&(v.placeholder=o),appendChild(u,c,s),appendChild(u,g,s),appendChild(l,u,s),appendChild(t,l,s),render(null,g,n,e,b,a),i&&(v.value=i,v.onblur())}var r=getSchemaId(t),s=getSchema(r),l=new Object;n?(i.getValue()||0===i.getValue())&&(n[i.getValue()]=l):data=l;var u=document.createElement("table");u.className="object";var c=document.createElement("tbody");appendChild(u,c,s);var d=0;if(s.hasOwnProperty("properties")){d=s.properties.length;for(var p in s.properties){var f=document.createElement("tr"),m=document.createElement("td");m.className="prop-name";var h=t+"."+p,g=getSchema(getSchemaId(h)),v=document.createElement("td");v.className="prop-value",appendChild(c,f,g),appendChild(f,m,g),appendChild(f,v,g);var q=function(e){var t=new Object;return t.getValue=function(){return e},t.onchange=function(e){},t}(p),b=null;a&&(b=a[p]),render(m,v,h,l,q,b)}}var _=[];if(s.patternProperties||s.additionalProperties){var y=document.createElement("div");if(appendChild(y,u,s),s.patternProperties)for(var w in s.patternProperties){var S=s.patternProperties[w],C=document.createElement("div");C.className="add-pattern-div";var T=document.createElement("button");if(T.setAttribute("type","button"),T.pattern=w,T.id=t+"["+w+"]",T.onclick=function(){o(l,u,this.id,void 0,void 0,this.pattern)},(s.maxProperties||s.minProperties)&&(T.getValidationError=function(){return s.minProperties&&d+u.rows.length<s.minProperties?BrutusinForms.messages.minProperties.format(s.minProperties):s.maxProperties&&d+u.rows.length>s.maxProperties?BrutusinForms.messages.maxProperties.format(s.maxProperties):void 0}),S.description&&(T.title=S.description),appendChild(T,document.createTextNode("Add "+w),s),appendChild(C,T,s),a)for(var x in a)if(!s.properties||!s.properties.hasOwnProperty(x)){var k=RegExp(w);-1!==x.search(k)&&-1===_.indexOf(x)&&(o(l,u,t+"["+w+"]",x,a[x],w),_.push(x))}appendChild(y,C,s)}if(s.additionalProperties){var E=getSchema(s.additionalProperties),T=document.createElement("button");if(T.setAttribute("type","button"),T.onclick=function(){o(l,u,t+"[*]",void 0)},(s.maxProperties||s.minProperties)&&(T.getValidationError=function(){return s.minProperties&&d+u.rows.length<s.minProperties?BrutusinForms.messages.minProperties.format(s.minProperties):s.maxProperties&&d+u.rows.length>s.maxProperties?BrutusinForms.messages.maxProperties.format(s.maxProperties):void 0}),E.description&&(T.title=E.description),appendChild(T,document.createTextNode("Add"),s),appendChild(y,T,s),a)for(var x in a)s.properties&&s.properties.hasOwnProperty(x)||-1===_.indexOf(x)&&o(l,u,t+'["'+p+'"]',x,a[x])}appendChild(e,y,s)}else appendChild(e,u,s)},renderers.array=function(e,t,n,i,a){function o(e,t,n,i,a){var o=getSchemaId(n),r=getSchema(o),s=document.createElement("tbody"),l=document.createElement("tr");l.className="item";var u=document.createElement("td");u.className="item-index";var c=document.createElement("td");c.className="item-action";var d=document.createElement("td");d.className="item-value";var p=document.createElement("button");p.setAttribute("type","button"),p.className="remove",!0===a&&(p.disabled=!0),appendChild(p,document.createTextNode("x"),r);var f=function(){for(var e=0;e<t.rows.length;e++){t.rows[e].cells[0].innerHTML=e+1}};p.onclick=function(){e.splice(l.rowIndex,1),t.deleteRow(l.rowIndex),f()},appendChild(c,p,r),appendChild(u,document.createTextNode(t.rows.length+1),r),appendChild(l,u,r),appendChild(l,c,r),appendChild(l,d,r),appendChild(s,l,r),appendChild(t,s,r);var m=createPropertyProvider(function(){return l.rowIndex});render(null,d,n,e,m,i)}var r=getSchemaId(t),s=getSchema(r),l=getSchema(s.items),u=new Array;n?(i.getValue()||0===i.getValue())&&(n[i.getValue()]=u):data=u,i&&(i.onchange=function(e){delete n[e],n[i.getValue()]=u});var c=document.createElement("div"),d=document.createElement("table");d.className="array",appendChild(c,d,s),appendChild(e,c,s);var p=document.createElement("button");if(s.readOnly&&(p.disabled=!0),p.setAttribute("type","button"),p.getValidationError=function(){if(s.minItems&&s.minItems>d.rows.length)return BrutusinForms.messages.minItems.format(s.minItems);if(s.maxItems&&s.maxItems<d.rows.length)return BrutusinForms.messages.maxItems.format(s.maxItems);if(s.uniqueItems)for(var e=0;e<u.length;e++)for(var t=e+1;t<u.length;t++)if(JSON.stringify(u[e])===JSON.stringify(u[t]))return BrutusinForms.messages.uniqueItems},p.onclick=function(){o(u,d,t+"[#]",null)},l.description&&(p.title=l.description),appendChild(p,document.createTextNode(BrutusinForms.messages.addItem),s),appendChild(c,d,s),appendChild(c,p,s),a&&a instanceof Array)for(var f=0;f<a.length;f++)o(u,d,t+"["+f+"]",a[f],s.readOnly);appendChild(e,c,s)},obj.render=function(e,t){container=e,initialValue=t;var n=document.createElement("form");if(n.className="brutusin-form",n.onsubmit=function(e){return!1},container?appendChild(container,n):appendChild(document.body,n),error){var i=document.createElement("label");appendChild(i,document.createTextNode(error)),i.className="error-message",appendChild(n,i)}else render(null,n,"$",null,null);dependencyMap.hasOwnProperty("$")&&onDependencyChanged("$"),BrutusinForms.postRender&&BrutusinForms.postRender(obj)},obj.getRenderingContainer=function(){return container},obj.validate=function(){return validate(container)},obj.getData=function(){function e(t,n){if(null===s&&(s=SCHEMA_ANY),n.$ref&&(n=getDefinition(n.$ref)),t instanceof Array){if(0===t.length)return null;for(var i=new Array,a=0;a<t.length;a++)i[a]=e(t[a],n.items);return i}if(""===t)return null;if(t instanceof Object){var i=new Object,o=!1;for(var r in t)if(!r.startsWith("$")||!r.endsWith("$")){var s=null;if(n.hasOwnProperty("properties")&&n.properties.hasOwnProperty(r)&&(s=n.properties[r]),null===s&&n.hasOwnProperty("additionalProperties")&&"object"==typeof n.additionalProperties&&(s=n.additionalProperties),null===s&&n.hasOwnProperty("patternProperties"))for(var l in n.patternProperties){var u=RegExp(l);if(-1!==r.search(u)){s=n.patternProperties[l];break}}var c=e(t[r],s);null!==c&&(i[r]=c,o=!0)}return o||n.required?i:null}return t}return container?e(data,schema):null},BrutusinForms.instances[BrutusinForms.instances.length]=obj,obj},brutusin["json-forms"]=BrutusinForms}()},function(e,t){},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(global){var qq=function(e){"use strict";return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return!!t&&(e===t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e))))},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){if(null==e.style)throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");return null!=t.opacity&&"string"!=typeof e.style.opacity&&void 0!==e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t),this},hasClass:function(t,n){var i=new RegExp("(^| )"+t+"( |$)");return i.test(e.className)||!(!n||!i.test(e.parentNode.className))},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t,n){var i,a=[];return n&&e.querySelector?e.querySelector("."+t):e.querySelectorAll?e.querySelectorAll("."+t):(i=e.getElementsByTagName("*"),qq.each(i,function(e,n){qq(n).hasClass(t)&&a.push(n)}),n?a[0]:a)},getFirstByClass:function(t){return qq(e).getByClass(t,!0)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")},hasAttribute:function(t){var n;return e.hasAttribute?!!e.hasAttribute(t)&&null==/^false$/i.exec(e.getAttribute(t)):void 0!==(n=e[t])&&null==/^false$/i.exec(n)}}};!function(){"use strict";qq.canvasToBlob=function(e,t,n){return qq.dataUriToBlob(e.toDataURL(t,n))},qq.dataUriToBlob=function(e){var t,n,i,a;return n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(n.length),i=new Uint8Array(t),qq.each(n,function(e,t){i[e]=t.charCodeAt(0)}),function(e,t){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=n&&new n;return i?(i.append(e),i.getBlob(t)):new Blob([e],{type:t})}(t,a)},qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return e&&!e.nodeType&&"[object Object]"===Object.prototype.toString.call(e)},qq.isFunction=function(e){return"function"==typeof e},qq.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)||e&&window.ArrayBuffer&&e.buffer&&e.buffer.constructor===ArrayBuffer},qq.isItemList=function(e){return"[object DataTransferItemList]"===Object.prototype.toString.call(e)},qq.isNodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)||e.item&&e.namedItem},qq.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e,i=n.indexOf("{}");return qq.each(t,function(e,t){var a=n.substring(0,i),o=n.substring(i+2);if(n=a+t+o,(i=n.indexOf("{}",i+t.length))<0)return!1}),n},qq.isFile=function(e){return window.File&&"[object File]"===Object.prototype.toString.call(e)},qq.isFileList=function(e){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(e)},qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e,t){var n=function(e){var n=e.toLowerCase();return t?"file"!==n:"file"===n};return!!(window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(e)&&e.type&&n(e.type))||!!(e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&n(e.type))},qq.isBlob=function(e){if(window.Blob&&"[object Blob]"===Object.prototype.toString.call(e))return!0},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&void 0!==qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(e){return e.items&&e.items.length>0&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.sliceBlob=function(e,t,n){return(e.slice||e.mozSlice||e.webkitSlice).call(e,t,n)},qq.arrayBufferToHex=function(e){var t="",n=new Uint8Array(e);return qq.each(n,function(e,n){var i=n.toString(16);i.length<2&&(i="0"+i),t+=i}),t},qq.readBlobToHex=function(e,t,n){var i=qq.sliceBlob(e,t,t+n),a=new FileReader,o=new qq.Promise;return a.onload=function(){o.success(qq.arrayBufferToHex(a.result))},a.onerror=o.failure,a.readAsArrayBuffer(i),o},qq.extend=function(e,t,n){return qq.each(t,function(t,i){n&&qq.isObject(i)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],i,!0)):e[t]=i}),e},qq.override=function(e,t){var n={},i=t(n);return qq.each(i,function(t,i){void 0!==e[t]&&(n[t]=e[t]),e[t]=i}),e},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var i=e.length;for(n<0&&(n+=i);n<i;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie8=function(){return-1!==navigator.userAgent.indexOf("MSIE 8")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return qq.ie()&&-1!==navigator.userAgent.indexOf("rv:11")},qq.edge=function(){return navigator.userAgent.indexOf("Edge")>=0},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.edge()&&!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios6=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios8=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")},qq.ios800=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.iosChrome=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf("CriOS")},qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")},qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari()},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.each=function(e,t){var n;if(e)if(window.Storage&&e.constructor===window.Storage)for(n=0;n<e.length&&!1!==t(e.key(n),e.getItem(e.key(n)));n++);else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e))for(n=0;n<e.length&&!1!==t(n,e[n]);n++);else if(qq.isString(e))for(n=0;n<e.length&&!1!==t(n,e.charAt(n));n++);else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t(n,e[n]))break},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var i=qq.extend([],n);return arguments.length&&(i=i.concat(Array.prototype.slice.call(arguments))),e.apply(t,i)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){var i=[],a="&",o=function(e,n){var a=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==a&&"undefined"!==n&&i.push("object"==typeof e?qq.obj2url(e,a,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(a)+"="+encodeURIComponent(e()):encodeURIComponent(a)+"="+encodeURIComponent(e))};return!n&&t?(a=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",i.push(t),i.push(qq.obj2url(e))):"[object Array]"===Object.prototype.toString.call(e)&&void 0!==e?qq.each(e,function(e,t){o(t,e)}):void 0!==e&&null!==e&&"object"==typeof e?qq.each(e,function(e,t){o(t,e)}):i.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),t?i.join(a):i.join(a).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,function(e,i){e=n?n+"["+e+"]":e,qq.isObject(i)?qq.obj2FormData(i,t,e):qq.isFunction(i)?t.append(e,i()):t.append(e,i)}),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,i){n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}}),t},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;if(t>0)return e.substr(t,e.length-t)},qq.getFilename=function(e){return qq.isInput(e)?e.value.replace(/.*(\/|\\)/,""):qq.isFile(e)&&null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do{(t=e.shift())&&t()}while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}}}(),function(){"use strict";void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return qq}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(),function(){"use strict";qq.Error=function(e){this.message="[Fine Uploader "+qq.version+"] "+e},qq.Error.prototype=new Error}(),qq.version="5.16.2",qq.supportedFeatures=function(){"use strict";function e(){if(window.XMLHttpRequest){return void 0!==qq.createXhrInstance().withCredentials}return!1}function t(){return void 0!==window.XDomainRequest}var n,i,a,o,r,s,l,u,c,d,p,f,m,h,g;return n=function(){var e,t=!0;try{e=document.createElement("input"),e.type="file",qq(e).hide(),e.disabled&&(t=!1)}catch(e){t=!1}return t}(),o=n&&qq.isXhrUploadSupported(),i=o&&!qq.androidStock(),a=o&&function(){var e=document.createElement("span");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!qq.android()&&!qq.ios()}(),r=a&&function(){var e=document.createElement("input");return e.type="file",!!("webkitdirectory"in(e||document.querySelectorAll("input[type=file]")[0]))}(),s=o&&qq.isFileChunkingSupported(),l=o&&s&&function(){try{return!!window.localStorage&&qq.isFunction(window.localStorage.setItem)}catch(e){return!1}}(),u=o&&function(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}(),c=n&&(void 0!==window.postMessage||o),p=e(),d=t(),f=function(){return!!e()||t()}(),m=function(){return void 0!==document.createElement("input").webkitdirectory}(),h=o&&void 0!==window.FileReader,g=function(){return!!o&&(!qq.androidStock()&&!qq.iosChrome())}(),{ajaxUploading:o,blobUploading:i,canDetermineSize:o,chunking:s,deleteFileCors:f,deleteFileCorsXdr:d,deleteFileCorsXhr:p,dialogElement:!!window.HTMLDialogElement,fileDrop:a,folderDrop:r,folderSelection:m,imagePreviews:h,imageValidation:h,itemSizeValidation:o,pause:s,progressBar:g,resume:l,scaling:h&&i,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:n,uploadCors:c,uploadCustomHeaders:o,uploadNonMultipart:o,uploadViaPaste:u}}(),qq.isGenericPromise=function(e){"use strict";return!!(e&&e.then&&qq.isFunction(e.then))},qq.Promise=function(){"use strict";var e,t,n=[],i=[],a=[],o=0;qq.extend(this,{then:function(a,r){return 0===o?(a&&n.push(a),r&&i.push(r)):-1===o?r&&r.apply(null,t):a&&a.apply(null,e),this},done:function(n){return 0===o?a.push(n):n.apply(null,void 0===t?e:t),this},success:function(){return o=1,e=arguments,n.length&&qq.each(n,function(t,n){n.apply(null,e)}),a.length&&qq.each(a,function(t,n){n.apply(null,e)}),this},failure:function(){return o=-1,t=arguments,i.length&&qq.each(i,function(e,n){n.apply(null,t)}),a.length&&qq.each(a,function(e,n){n.apply(null,t)}),this}})},qq.BlobProxy=function(e,t){"use strict";qq.extend(this,{referenceBlob:e,create:function(){return t(e)}})},qq.UploadButton=function(e){"use strict";function t(){var e=document.createElement("input");return e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,i),e.setAttribute("title",r.title),a.setMultiple(r.multiple,e),r.folders&&qq.supportedFeatures.folderSelection&&e.setAttribute("webkitdirectory",""),r.acceptFiles&&e.setAttribute("accept",r.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",r.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),!qq.ie7()&&qq(e).css({height:"100%"}),r.element.appendChild(e),o.attach(e,"change",function(){r.onChange(e)}),o.attach(e,"mouseover",function(){qq(r.element).addClass(r.hoverClass)}),o.attach(e,"mouseout",function(){qq(r.element).removeClass(r.hoverClass)}),o.attach(e,"focus",function(){qq(r.element).addClass(r.focusClass)}),o.attach(e,"blur",function(){qq(r.element).removeClass(r.focusClass)}),e}var n,i,a=this,o=new qq.DisposeSupport,r={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:!1,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:!1,multiple:!1,name:"qqfile",onChange:function(e){},title:null};qq.extend(r,e),i=qq.getUniqueId(),qq(r.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),qq.extend(this,{getInput:function(){return n},getButtonId:function(){return i},setMultiple:function(e,t){var n=t||this.getInput();r.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())?n.setAttribute("multiple",""):e?n.setAttribute("multiple",""):n.removeAttribute("multiple")},setAcceptFiles:function(e){e!==r.acceptFiles&&n.setAttribute("accept",e)},reset:function(){n.parentNode&&qq(n).remove(),qq(r.element).removeClass(r.focusClass),n=null,n=t()}}),n=t()},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(e){"use strict";function t(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(a[n])}),t}return a[e]}function n(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(a[o[n]])}),t}return a[o[e]]}function i(e){var t=[],n=[].concat(e);return qq.each(n,function(e,n){var i=r[n];void 0!==i&&qq.each(i,function(e,n){t.push(a[n])})}),t}var a=[],o={},r={},s={},l={};qq.extend(this,{addFile:function(t){var n=t.status||qq.status.SUBMITTING,i=a.push({name:t.name,originalName:t.name,uuid:t.uuid,size:null==t.size?-1:t.size,status:n,file:t.file})-1;return t.batchId&&(a[i].batchId=t.batchId,void 0===l[t.batchId]&&(l[t.batchId]=[]),l[t.batchId].push(i)),t.proxyGroupId&&(a[i].proxyGroupId=t.proxyGroupId,void 0===s[t.proxyGroupId]&&(s[t.proxyGroupId]=[]),s[t.proxyGroupId].push(i)),a[i].id=i,o[t.uuid]=i,void 0===r[n]&&(r[n]=[]),r[n].push(i),t.onBeforeStatusChange&&t.onBeforeStatusChange(i),e.onStatusChange(i,null,n),i},retrieve:function(e){return qq.isObject(e)&&a.length?void 0!==e.id?t(e.id):void 0!==e.uuid?n(e.uuid):e.status?i(e.status):void 0:qq.extend([],a,!0)},removeFileRef:function(e){var n=t(e);n&&delete n.file},reset:function(){a=[],o={},r={},l={}},setStatus:function(t,n){var i=a[t].status,o=qq.indexOf(r[i],t);r[i].splice(o,1),a[t].status=n,void 0===r[n]&&(r[n]=[]),r[n].push(t),e.onStatusChange(t,i,n)},uuidChanged:function(e,t){var n=a[e].uuid;a[e].uuid=t,o[t]=e,delete o[n]},updateName:function(e,t){a[e].name=t},updateSize:function(e,t){a[e].size=t},setParentId:function(e,t){a[e].parentId=t},getIdsInProxyGroup:function(e){var t=a[e].proxyGroupId;return t?s[t]:[]},getIdsInBatch:function(e){var t=a[e].batchId;return l[t]}})},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_FINALIZING:"upload finalizing",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){"use strict";qq.basePublicApi={addBlobs:function(e,t,n){this.addFiles(e,t,n)},addInitialFiles:function(e){var t=this;qq.each(e,function(e,n){t._addCannedFile(n)})},addFiles:function(e,t,n){this._maybeHandleIos8SafariWorkaround();var i=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId,a=qq.bind(function(e){this._handleNewFile({blob:e,name:this._options.blobs.defaultName},i,c)},this),o=qq.bind(function(e){this._handleNewFile(e,i,c)},this),r=qq.bind(function(e){var t=qq.canvasToBlob(e);this._handleNewFile({blob:t,name:this._options.blobs.defaultName+".png"},i,c)},this),s=qq.bind(function(e){var t=e.quality&&e.quality/100,n=qq.canvasToBlob(e.canvas,e.type,t);this._handleNewFile({blob:n,name:e.name},i,c)},this),l=qq.bind(function(e){if(qq.isInput(e)&&qq.supportedFeatures.ajaxUploading){var t=Array.prototype.slice.call(e.files),n=this;qq.each(t,function(e,t){n._handleNewFile(t,i,c)})}else this._handleNewFile(e,i,c)},this),u=this,c=[];this._currentBatchId=i,e&&(!function(){qq.isFileList(e)&&(e=Array.prototype.slice.call(e)),e=[].concat(e)}(),qq.each(e,function(e,t){qq.isFileOrInput(t)?l(t):qq.isBlob(t)?a(t):qq.isObject(t)?t.blob&&t.name?o(t):t.canvas&&t.name&&s(t):t.tagName&&"canvas"===t.tagName.toLowerCase()?r(t):u.log(t+" is not a valid file container!  Ignoring!","warn")}),this.log("Received "+c.length+" files."),this._prepareItemsForUpload(c,t,n))},cancel:function(e){var t=this._uploadData.retrieve({id:e});t&&t.status===qq.status.UPLOAD_FINALIZING?this.log(qq.format("Ignoring cancel for file ID {} ({}).  Finalizing upload.",e,this.getName(e)),"error"):this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,function(e,n){t.cancel(n)}),this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(e){var t=this._uploadData.retrieve({id:e});return!(!qq.supportedFeatures.pause||!this._options.chunking.enabled)&&(t.status===qq.status.PAUSED?(this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",e,this.getName(e))),this._uploadFile(e),!0):(this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",e,this.getName(e)),"error"),!1))},deleteFile:function(e){return this._onSubmitDelete(e)},doesExist:function(e){return this._handler.isValid(e)},drawThumbnail:function(e,t,n,i,a){var o,r,s=new qq.Promise;return this._imageGenerator?(o=this._thumbnailUrls[e],r={customResizeFunction:a,maxSize:n>0?n:null,scale:n>0},!i&&qq.supportedFeatures.imagePreviews&&(o=this.getFile(e)),null==o?s.failure({container:t,error:"File or URL not found."}):this._imageGenerator.generate(o,t,r).then(function(e){s.success(e)},function(e,t){s.failure({container:e,error:t||"Problem generating thumbnail"})})):s.failure({container:t,error:"Missing image generator module"}),s},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])},getEndpoint:function(e){return this._endpointStore.get(e)},getFile:function(e){var t,n=this._handler.getFile(e);return n||(t=this._uploadData.retrieve({id:e}))&&(n=t.file),n||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(e){return this._uploadData.retrieve({id:e}).name},getParentId:function(e){var t=this.getUploads({id:e}),n=null;return t&&void 0!==t.parentId&&(n=t.parentId),n},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._uploadData.retrieve({id:e}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var e=this._currentItemLimit;return e>0?e-this._netUploadedOrQueued:null},getUploads:function(e){return this._uploadData.retrieve(e)},getUuid:function(e){return this._uploadData.retrieve({id:e}).uuid},isResumable:function(e){return this._handler.hasResumeRecord(e)},log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[Fine Uploader "+qq.version+"] "+e,t):qq.log("[Fine Uploader "+qq.version+"] "+e)},pauseUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(e))return this._uploadData.setStatus(e,qq.status.PAUSED),!0;this.log(qq.format("Unable to pause file ID {} ({}).",e,this.getName(e)),"error")}else this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",e,this.getName(e)),"error");return!1},removeFileRef:function(e){this._handler.expunge(e),this._uploadData.removeFileRef(e)},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],qq.each(this._buttons,function(e,t){t.reset()}),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset(),this._options.session.refreshOnReset&&this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._totalProgress&&this._totalProgress.reset(),this._customResumeDataStore.reset()},retry:function(e){return this._manualRetry(e)},scaleImage:function(e,t){var n=this;return qq.Scaler.prototype.scaleImage(e,t,{log:qq.bind(n.log,n),getFile:qq.bind(n.getFile,n),uploadData:n._uploadData})},setCustomHeaders:function(e,t){this._customHeadersStore.set(e,t)},setCustomResumeData:function(e,t){this._customResumeDataStore.set(t,e)},setDeleteFileCustomHeaders:function(e,t){this._deleteFileCustomHeadersStore.set(e,t)},setDeleteFileEndpoint:function(e,t){this._deleteFileEndpointStore.set(e,t)},setDeleteFileParams:function(e,t){this._deleteFileParamsStore.set(e,t)},setEndpoint:function(e,t){this._endpointStore.set(e,t)},setForm:function(e){this._updateFormSupportAndParams(e)},setItemLimit:function(e){this._currentItemLimit=e},setName:function(e,t){this._uploadData.updateName(e,t)},setParams:function(e,t){this._paramsStore.set(e,t)},setUuid:function(e,t){return this._uploadData.uuidChanged(e,t)},setStatus:function(e,t){if(!this.getUploads({id:e}))throw new qq.Error(e+" is not a valid file ID.");switch(t){case qq.status.DELETED:this._onDeleteComplete(e,null,!1);break;case qq.status.DELETE_FAILED:this._onDeleteComplete(e,null,!0);break;default:var n="Method setStatus called on '"+name+"' not implemented yet for "+t;throw this.log(n),new qq.Error(n)}},uploadStoredFiles:function(){0===this._storedIds.length?this._itemError("noFilesError"):this._uploadStoredFiles()}},qq.basePrivateApi={_addCannedFile:function(e){var t=this;return this._uploadData.addFile({uuid:e.uuid,name:e.name,size:e.size,status:qq.status.UPLOAD_SUCCESSFUL,onBeforeStatusChange:function(n){e.deleteFileEndpoint&&t.setDeleteFileEndpoint(e.deleteFileEndpoint,n),e.deleteFileParams&&t.setDeleteFileParams(e.deleteFileParams,n),e.thumbnailUrl&&(t._thumbnailUrls[n]=e.thumbnailUrl),t._netUploaded++,t._netUploadedOrQueued++}})},_annotateWithButtonId:function(e,t){qq.isFile(e)&&(e.qqButtonId=this._getButtonId(t))},_batchError:function(e){this._options.callbacks.onError(null,null,e,void 0)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:qq.bind(e.log,e),onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,i){e._onDeleteComplete(t,n,i),e._options.callbacks.onDeleteComplete(t,n,i)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(e.log,e),pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createStore:function(e,t){var n={},i=e,a={},o=t,r=function(e){return qq.isObject(e)?qq.extend({},e):e},s=function(){return qq.isFunction(o)?o():o},l=function(e,t){o&&qq.isObject(t)&&qq.extend(t,s()),a[e]&&qq.extend(t,a[e])};return{set:function(e,t){null==t?(n={},i=r(e)):n[t]=r(e)},get:function(e){var t;return t=null!=e&&n[e]?n[e]:r(i),l(e,t),r(t)},addReadOnly:function(e,t){qq.isObject(n)&&(null===e?qq.isFunction(t)?o=t:(o=o||{},qq.extend(o,t)):(a[e]=a[e]||{},qq.extend(a[e],t)))},remove:function(e){return delete n[e]},reset:function(){n={},a={},i=e}}},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,i){e._onUploadStatusChange(t,n,i),e._options.callbacks.onStatusChange(t,n,i),e._maybeAllComplete(t,i),e._totalProgress&&setTimeout(function(){e._totalProgress.onStatusChange(t,n,i)},0)}})},_createUploadButton:function(e){var t,n=this,i=e.accept||this._options.validation.acceptFiles,a=e.allowedExtensions||this._options.validation.allowedExtensions;return t=new qq.UploadButton({acceptFiles:i,element:e.element,focusClass:this._options.classes.buttonFocus,folders:e.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,multiple:function(){return!!qq.supportedFeatures.ajaxUploading&&(!(n._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&n._isAllowedExtension(a,".mov"))&&(void 0===e.multiple?n._options.multiple:e.multiple))}(),name:this._options.request.inputName,onChange:function(e){n._onInputChange(e)},title:null==e.title?this._options.text.fileInputTitle:e.title}),this._disposeSupport.addDisposer(function(){t.dispose()}),n._buttons.push(t),t},_createUploadHandler:function(e,t){var n=this,i={},a={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(n.log,n),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(e,t,a,o){a<0||o<0||(i[e]?i[e].loaded===a&&i[e].total===o||(n._onProgress(e,t,a,o),n._options.callbacks.onProgress(e,t,a,o)):(n._onProgress(e,t,a,o),n._options.callbacks.onProgress(e,t,a,o)),i[e]={loaded:a,total:o})},onComplete:function(e,t,a,o){delete i[e];var r,s=n.getUploads({id:e}).status;s!==qq.status.UPLOAD_SUCCESSFUL&&s!==qq.status.UPLOAD_FAILED&&(r=n._onComplete(e,t,a,o),r instanceof qq.Promise?r.done(function(){n._options.callbacks.onComplete(e,t,a,o)}):n._options.callbacks.onComplete(e,t,a,o))},onCancel:function(e,t,i){var a=new qq.Promise;return n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onFailure:a.failure,onSuccess:function(){i.then(function(){n._onCancel(e,t)}),a.success()},identifier:e}),a},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(e,t){n._onUpload(e,t);var i=n._options.callbacks.onUpload(e,t);return qq.isGenericPromise(i)?(n.log(qq.format("onUpload for {} returned a Promise - waiting for resolution.",e)),i):(new qq.Promise).success()},onUploadChunk:function(e,t,i){n._onUploadChunk(e,i);var a=n._options.callbacks.onUploadChunk(e,t,i);return qq.isGenericPromise(a)?(n.log(qq.format("onUploadChunk for {}.{} returned a Promise - waiting for resolution.",e,i.partIndex)),a):(new qq.Promise).success()},onUploadChunkSuccess:function(e,t,i,a){n._onUploadChunkSuccess(e,t),n._options.callbacks.onUploadChunkSuccess.apply(n,arguments)},onResume:function(e,t,i,a){return n._options.callbacks.onResume(e,t,i,a)},onAutoRetry:function(e,t,i,a){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n.log("Server requested UUID change from '"+n.getUuid(e)+"' to '"+t+"'"),n.setUuid(e,t)},getName:qq.bind(n.getName,n),getUuid:qq.bind(n.getUuid,n),getSize:qq.bind(n.getSize,n),setSize:qq.bind(n._setSize,n),getDataByUuid:function(e){return n.getUploads({uuid:e})},isQueued:function(e){var t=n.getUploads({id:e}).status;return t===qq.status.QUEUED||t===qq.status.SUBMITTED||t===qq.status.UPLOAD_RETRYING||t===qq.status.PAUSED},getIdsInProxyGroup:n._uploadData.getIdsInProxyGroup,getIdsInBatch:n._uploadData.getIdsInBatch,isInProgress:function(e){return n.getUploads({id:e}).status===qq.status.UPLOADING},getCustomResumeData:qq.bind(n._getCustomResumeData,n),setStatus:function(e,t){n._uploadData.setStatus(e,t)}};return qq.each(this._options.request,function(e,t){a[e]=t}),a.customHeaders=this._customHeadersStore,e&&qq.each(e,function(e,t){a[e]=t}),new qq.UploadHandlerController(a,t)},_fileOrBlobRejected:function(e){this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.REJECTED)},_formatSize:function(e){if(0===e)return e+this._options.text.sizeSymbols[0];var t=-1;do{e/=1e3,t++}while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,function(t,n){var i=n.multiple,a=qq.extend({},e._options.validation,!0),o=qq.extend({},n);void 0===i&&(i=e._options.multiple),o.validation&&qq.extend(a,n.validation,!0),qq.extend(o,{multiple:i,validation:a},!0),e._initExtraButton(o)})},_getButton:function(e){var t=this._extraButtonSpecs[e];return t?t.element:e===this._defaultButtonId?this._options.button:void 0},_getButtonId:function(e){var t,n,i=e;if(i instanceof qq.BlobProxy&&(i=i.referenceBlob),i&&!qq.isBlob(i)){if(qq.isFile(i))return i.qqButtonId;if("input"===i.tagName.toLowerCase()&&"file"===i.type.toLowerCase())return i.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(t=i.getElementsByTagName("input"),qq.each(t,function(e,t){if("file"===t.getAttribute("type"))return n=t,!1}),n)return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_getCustomResumeData:function(e){return this._customResumeDataStore.get(e)},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(e){var t=this._extraButtonSpecs[e];return t?t.validation:this._options.validation},_getValidationDescriptor:function(e){return e.file instanceof qq.BlobProxy?{name:qq.getFilename(e.file.referenceBlob),size:e.file.referenceBlob.size}:{name:this.getUploads({id:e.id}).name,size:this.getUploads({id:e.id}).size}},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,function(e,i){n.push(t._getValidationDescriptor(i))}),n},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e=this._options.camera.button,t=e?this._getButtonId(e):this._defaultButtonId,n=this._options;t&&t!==this._defaultButtonId&&(n=this._extraButtonSpecs[t]),n.multiple=!1,null===n.validation.acceptFiles?n.validation.acceptFiles="image/*;capture=camera":n.validation.acceptFiles+=",image/*;capture=camera",qq.each(this._buttons,function(e,i){if(i.getButtonId()===t)return i.setMultiple(n.multiple),i.setAcceptFiles(n.acceptFiles),!1})}},_handleCheckedCallback:function(e){var t=this,n=e.callback();return qq.isGenericPromise(n)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then(function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)},function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)})):(!1!==n?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_handleNewFile:function(e,t,n){var i=this,a=qq.getUniqueId(),o=-1,r=qq.getFilename(e),s=e.blob||e,l=this._customNewFileHandler?this._customNewFileHandler:qq.bind(i._handleNewFileGeneric,i);!qq.isInput(s)&&s.size>=0&&(o=s.size),l(s,r,a,o,n,t,this._options.request.uuidName,{uploadData:i._uploadData,paramsStore:i._paramsStore,addFileToHandler:function(e,t){i._handler.add(e,t),i._netUploadedOrQueued++,i._trackButton(e)}})},_handleNewFileGeneric:function(e,t,n,i,a,o){var r=this._uploadData.addFile({uuid:n,name:t,size:i,batchId:o,file:e});this._handler.add(r,e),this._trackButton(r),this._netUploadedOrQueued++,a.push({id:r,file:e})},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],i=t;null==i&&(i=this._options.paste.defaultName),i+="."+n,this.addFiles({name:i,blob:e})},_handleDeleteSuccess:function(e){if(this.getUploads({id:e}).status!==qq.status.DELETED){var t=this.getName(e);this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this._uploadData.setStatus(e,qq.status.DELETED),this.log("Delete request for '"+t+"' has succeeded.")}},_handleDeleteFailed:function(e,t){var n=this.getName(e);this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+n+"' has failed.","error"),t&&void 0!==t.withCredentials?this._options.callbacks.onError(e,n,"Delete request failed with response code "+t.status,t):this._options.callbacks.onError(e,n,"Delete request failed",t)},_initExtraButton:function(e){var t=this._createUploadButton({accept:e.validation.acceptFiles,allowedExtensions:e.validation.allowedExtensions,element:e.element,folders:e.folders,multiple:e.multiple,title:e.fileInputTitle});this._extraButtonSpecs[t.getButtonId()]=e},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm?(this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return!(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled)&&(!this._options.cors.expected||(!!qq.supportedFeatures.deleteFileCorsXhr||!(!qq.supportedFeatures.deleteFileCorsXdr||!this._options.cors.allowXdr)))},_isAllowedExtension:function(e,t){var n=!1;return!e.length||(qq.each(e,function(e,i){if(qq.isString(i)){var a=new RegExp("\\."+i+"$","i");if(null!=t.match(a))return n=!0,!1}}),n)},_itemError:function(e,t,n){function i(e,t){r=r.replace(e,t)}var a,o,r=this._options.messages[e],s=[],l=[].concat(t),u=l[0],c=this._getButtonId(n),d=this._getValidationBase(c);return qq.each(d.allowedExtensions,function(e,t){qq.isString(t)&&s.push(t)}),a=s.join(", ").toLowerCase(),i("{file}",this._options.formatFileName(u)),i("{extensions}",a),i("{sizeLimit}",this._formatSize(d.sizeLimit)),i("{minSizeLimit}",this._formatSize(d.minSizeLimit)),o=r.match(/(\{\w+\})/g),null!==o&&qq.each(o,function(e,t){i(t,l[e])}),this._options.callbacks.onError(null,u,r,void 0),r},_manualRetry:function(e,t){if(this._onBeforeManualRetry(e))return this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),t?t(e):this._handler.retry(e),!0},_maybeAllComplete:function(e,t){var n=this,i=this._getNotFinished();t===qq.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(e):t===qq.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(e),0===i&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){n._onAllComplete(n._succeededSinceLastAllComplete,n._failedSinceLastAllComplete)},0)},_maybeHandleIos8SafariWorkaround:function(){var e=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari())throw setTimeout(function(){window.alert(e._options.messages.unsupportedBrowserIos8Safari)},0),new qq.Error(this._options.messages.unsupportedBrowserIos8Safari)},_maybeParseAndSendUploadError:function(e,t,n,i){if(!n.success)if(i&&200!==i.status&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+i.status,i);else{var a=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,a,i)}},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,i,a){var o=this;if(t.length>n)if(e||!this._options.validation.stopOnFirstInvalidFile)setTimeout(function(){var e=o._getValidationDescriptor(t[n]),r=o._getButtonId(t[n].file),s=o._getButton(r);o._handleCheckedCallback({name:"onValidate",callback:qq.bind(o._options.callbacks.onValidate,o,e,s),onSuccess:qq.bind(o._onValidateCallbackSuccess,o,t,n,i,a),onFailure:qq.bind(o._onValidateCallbackFailure,o,t,n,i,a),identifier:"Item '"+e.name+"', size: "+e.size})},0);else if(!e)for(;n<t.length;n++)o._fileOrBlobRejected(t[n].id)},_onAllComplete:function(e,t){this._totalProgress&&this._totalProgress.onAllComplete(e,t,this._preventRetries),this._options.callbacks.onAllComplete(qq.extend([],e),qq.extend([],t)),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[]},_onAutoRetry:function(e,t,n,i,a){var o=this;if(o._preventRetries[e]=n[o._options.retry.preventRetryResponseProperty],o._shouldAutoRetry(e)){var r=1e3*o._options.retry.autoAttemptDelay;return o._maybeParseAndSendUploadError.apply(o,arguments),o._options.callbacks.onAutoRetry(e,t,o._autoRetries[e]),o._onBeforeAutoRetry(e,t),o._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),o._retryTimeouts[e]=setTimeout(function(){o.log("Starting retry for "+t+"..."),a?a(e):o._handler.retry(e)},r),!0}},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onBeforeManualRetry:function(e){var t,n=this._currentItemLimit;return this._preventRetries[e]?(this.log("Retries are forbidden for id "+e,"warn"),!1):this._handler.isValid(e)?(t=this.getName(e),!1!==this._options.callbacks.onManualRetry(e,t)&&(n>0&&this._netUploadedOrQueued+1>n?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+t+"' (id: "+e+")..."),!0))):(this.log("'"+e+"' is not a valid file ID","error"),!1)},_onCancel:function(e,t){this._netUploadedOrQueued--,clearTimeout(this._retryTimeouts[e]);var n=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&n>=0&&this._storedIds.splice(n,1),this._uploadData.setStatus(e,qq.status.CANCELED)},_onComplete:function(e,t,n,i){return n.success?(n.thumbnailUrl&&(this._thumbnailUrls[e]=n.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED),!0===n[this._options.retry.preventRetryResponseProperty]&&(this._preventRetries[e]=!0)),this._maybeParseAndSendUploadError(e,t,n,i),!!n.success},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){this.getName(e);n?this._handleDeleteFailed(e,t):this._handleDeleteSuccess(e)},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++)this._annotateWithButtonId(e.files[t],e);this.addFiles(e.files)}else e.value.length>0&&this.addFiles(e);qq.each(this._buttons,function(e,t){t.reset()})},_onProgress:function(e,t,n,i){this._totalProgress&&this._totalProgress.onIndividualProgress(e,n,i)},_onSubmit:function(e,t){},_onSubmitCallbackSuccess:function(e,t){this._onSubmit.apply(this,arguments),this._uploadData.setStatus(e,qq.status.SUBMITTED),this._onSubmitted.apply(this,arguments),this._options.autoUpload?(this._options.callbacks.onSubmitted.apply(this,arguments),this._uploadFile(e)):(this._storeForLater(e),this._options.callbacks.onSubmitted.apply(this,arguments))},_onSubmitDelete:function(e,t,n){var i,a=this.getUuid(e);return t&&(i=qq.bind(t,this,e,a,n)),this._isDeletePossible()?(this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:i||qq.bind(this._deleteHandler.sendDelete,this,e,a,n),identifier:e}),!0):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onSubmitted:function(e){},_onTotalProgress:function(e,t){this._options.callbacks.onTotalProgress(e,t)},_onUploadPrep:function(e){},_onUpload:function(e,t){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onUploadChunk:function(e,t){},_onUploadChunkSuccess:function(e,t){!this._preventRetries[e]&&this._options.retry.enableAuto&&(this._autoRetries[e]=0)},_onUploadStatusChange:function(e,t,n){n===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[e])},_onValidateBatchCallbackFailure:function(e){var t=this;qq.each(e,function(e,n){t._fileOrBlobRejected(n.id)})},_onValidateBatchCallbackSuccess:function(e,t,n,i,a){var o,r=this._currentItemLimit,s=this._netUploadedOrQueued;0===r||s<=r?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],a),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,i),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,i),identifier:"Item '"+t[0].file.name+"', size: "+t[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(t),o=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,s).replace(/\{itemLimit\}/g,r),this._batchError(o))},_onValidateCallbackFailure:function(e,t,n,i){var a=t+1;this._fileOrBlobRejected(e[t].id,e[t].file.name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,a,n,i)},_onValidateCallbackSuccess:function(e,t,n,i){var a=this,o=t+1,r=this._getValidationDescriptor(e[t]);this._validateFileOrBlobData(e[t],r).then(function(){a._upload(e[t].id,n,i),a._maybeProcessNextItemAfterOnValidateCallback(!0,e,o,n,i)},function(){a._maybeProcessNextItemAfterOnValidateCallback(!1,e,o,n,i)})},_prepareItemsForUpload:function(e,t,n){if(0===e.length)return void this._itemError("noFilesError");var i=this._getValidationDescriptors(e),a=this._getButtonId(e[0].file),o=this._getButton(a);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,i,o),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,i,e,t,n,o),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,e),identifier:"batch validation"})},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",function(t){if(e.getInProgress())return t=t||window.event,t.returnValue=e._options.messages.onLeave,e._options.messages.onLeave})},_refreshSessionData:function(){var e=this,t=this._options.session;qq.Session&&null!=this._options.session.endpoint&&(this._session||(qq.extend(t,{cors:this._options.cors}),t.log=qq.bind(this.log,this),t.addFileRecord=qq.bind(this._addCannedFile,this),this._session=new qq.Session(t)),setTimeout(function(){e._session.refresh().then(function(t,n){e._sessionRequestComplete(),e._options.callbacks.onSessionRequestComplete(t,!0,n)},function(t,n){e._options.callbacks.onSessionRequestComplete(t,!1,n)})},0))},_sessionRequestComplete:function(){},_setSize:function(e,t){this._uploadData.updateSize(e,t),this._totalProgress&&this._totalProgress.onNewSize(e)},_shouldAutoRetry:function(e){var t=this._uploadData.retrieve({id:e});return!!(!this._preventRetries[e]&&this._options.retry.enableAuto&&t.status!==qq.status.PAUSED&&(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts))&&(this._autoRetries[e]+=1,!0)},_storeForLater:function(e){this._storedIds.push(e)},_trackButton:function(e){var t;(t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(e).qqButtonId:this._getButtonId(this._handler.getInput(e)))&&(this._buttonIdsForFileIds[e]=t)},_updateFormSupportAndParams:function(e){this._options.form.element=e,this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm&&(this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&this.setEndpoint(this._formSupport.newEndpoint))},_upload:function(e,t,n){var i=this.getName(e);t&&this.setParams(t,e),n&&this.setEndpoint(n,e),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,e,i),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,e,i),onFailure:qq.bind(this._fileOrBlobRejected,this,e,i),identifier:e})},_uploadFile:function(e){this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED)},_uploadStoredFiles:function(){for(var e,t,n=this;this._storedIds.length;)e=this._storedIds.shift(),this._uploadFile(e);(t=this.getUploads({status:qq.status.SUBMITTING}).length)&&(qq.log("Still waiting for "+t+" files to clear submit queue. Will re-parse stored IDs array shortly."),setTimeout(function(){n._uploadStoredFiles()},1e3))},_validateFileOrBlobData:function(e,t){var n=this,i=function(){return e.file instanceof qq.BlobProxy?e.file.referenceBlob:e.file}(),a=t.name,o=t.size,r=this._getButtonId(e.file),s=this._getValidationBase(r),l=new qq.Promise;return l.then(function(){},function(){n._fileOrBlobRejected(e.id,a)}),qq.isFileOrInput(i)&&!this._isAllowedExtension(s.allowedExtensions,a)?(this._itemError("typeError",a,i),l.failure()):this._options.validation.allowEmpty||0!==o?o>0&&s.sizeLimit&&o>s.sizeLimit?(this._itemError("sizeError",a,i),l.failure()):o>0&&o<s.minSizeLimit?(this._itemError("minSizeError",a,i),l.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(i)?new qq.ImageValidation(i,qq.bind(n.log,n)).validate(s.image).then(l.success,function(e){n._itemError(e+"ImageError",a,i),l.failure()}):l.success(),l):(this._itemError("emptyError",a,i),l.failure())},_wrapCallbacks:function(){var e,t,n;e=this,t=function(t,n,i){var a;try{return n.apply(e,i)}catch(n){a=n.message||n.toString(),e.log("Caught exception in '"+t+"' callback - "+a,"error")}};for(n in this._options.callbacks)!function(){var i,a;i=n,a=e._options.callbacks[i],e._options.callbacks[i]=function(){return t(i,a,arguments)}}()}}}(),function(){"use strict";qq.FineUploaderBasic=function(e){var t=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,warnBeforeUnload:!0,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:!0,inputName:"qqfile",method:"POST",omitDefaultParams:!1,params:{},paramsInBody:!0,requireSuccessJson:!0,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:!1},callbacks:{onSubmit:function(e,t){},onSubmitted:function(e,t){},onComplete:function(e,t,n,i){},onAllComplete:function(e,t){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,i){},onResume:function(e,t,n,i){},onProgress:function(e,t,n,i){},onTotalProgress:function(e,t){},onError:function(e,t,n,i){},onAutoRetry:function(e,t,n){},onManualRetry:function(e,t){},onValidateBatch:function(e){},onValidate:function(e){},onSubmitDelete:function(e){},onDelete:function(e){},onDeleteComplete:function(e,t,n){},onPasteReceived:function(e){},onStatusChange:function(e,t,n){},onSessionRequestComplete:function(e,t,n){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},mandatory:!1,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:function(e){return 2e6},success:{endpoint:null,headers:function(e){return null},jsonPayload:!1,method:"POST",params:function(e){return null},resetOnStatus:[]}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"},customKeys:function(e){return[]}},formatFileName:function(e){return e},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{customResizer:null,sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!1}},qq.extend(this._options,e,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._initFormSupportAndParams(),this._customHeadersStore=this._createStore(this._options.request.customHeaders),this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders),this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params),this._endpointStore=this._createStore(this._options.request.endpoint),this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint),this._handler=this._createUploadHandler(),this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found","error")),this._options.warnBeforeUnload&&this._preventLeaveInProgress(),this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this)),this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{},this._scaler.enabled&&(this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)),qq.TotalProgress&&qq.supportedFeatures.progressBar&&(this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),function(e){var n=t._uploadData.retrieve({id:e});return n&&n.size||0})),this._currentItemLimit=this._options.validation.itemLimit,this._customResumeDataStore=this._createStore()},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}(),qq.AjaxRequester=function(e){"use strict";function t(){return qq.indexOf(["GET","POST","HEAD"],w.method)>=0}function n(e){var t=!1;return qq.each(t,function(e,n){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],n)<0)return t=!0,!1}),t}function i(e){return w.cors.expected&&void 0===e.withCredentials}function a(){var e;return(window.XMLHttpRequest||window.ActiveXObject)&&(e=qq.createXhrInstance(),void 0===e.withCredentials&&(e=new XDomainRequest,e.onload=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onprogress=function(){})),e}function o(e,t){var n=y[e]&&y[e].xhr;return n||(n=t||(w.cors.expected?a():qq.createXhrInstance()),y[e].xhr=n),n}function r(e){var t,n=qq.indexOf(_,e),i=w.maxConnections;delete y[e],_.splice(n,1),_.length>=i&&n<i&&(t=_[i-1],u(t))}function s(e,t){var n=o(e),a=w.method,s=!0===t;r(e),s?q(a+" request for "+e+" has failed","error"):i(n)||g(n.status)||(s=!0,q(a+" request for "+e+" has failed - response code "+n.status,"error")),w.onComplete(e,n,s)}function l(e){var t,n=y[e].additionalParams,i=w.mandatedParams;return w.paramsStore.get&&(t=w.paramsStore.get(e)),n&&qq.each(n,function(e,n){t=t||{},t[e]=n}),i&&qq.each(i,function(e,n){t=t||{},t[e]=n}),t}function u(e,t){var n,a=o(e,t),r=w.method,s=l(e),u=y[e].payload;return w.onSend(e),n=c(e,s,y[e].additionalQueryParams),i(a)?(a.onload=f(e),a.onerror=m(e)):a.onreadystatechange=d(e),p(e),a.open(r,n,!0),w.cors.expected&&w.cors.sendCredentials&&!i(a)&&(a.withCredentials=!0),h(e),q("Sending "+r+" request for "+e),u?a.send(u):b||!s?a.send():s&&w.contentType&&w.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?a.send(qq.obj2url(s,"")):s&&w.contentType&&w.contentType.toLowerCase().indexOf("application/json")>=0?a.send(JSON.stringify(s)):a.send(s),a}function c(e,t,n){var i=w.endpointStore.get(e),a=y[e].addToPath;return void 0!=a&&(i+="/"+a),b&&t&&(i=qq.obj2url(t,i)),n&&(i=qq.obj2url(n,i)),i}function d(e){return function(){4===o(e).readyState&&s(e)}}function p(e){var t=w.onProgress;t&&(o(e).upload.onprogress=function(n){n.lengthComputable&&t(e,n.loaded,n.total)})}function f(e){return function(){s(e)}}function m(e){return function(){s(e,!0)}}function h(e){var a=o(e),r=w.customHeaders,s=y[e].additionalHeaders||{},l=w.method,u={};i(a)||(w.acceptHeader&&a.setRequestHeader("Accept",w.acceptHeader),w.allowXRequestedWithAndCacheControl&&(w.cors.expected&&t()&&!n(r)||(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Cache-Control","no-cache"))),!w.contentType||"POST"!==l&&"PUT"!==l||a.setRequestHeader("Content-Type",w.contentType),qq.extend(u,qq.isFunction(r)?r(e):r),qq.extend(u,s),qq.each(u,function(e,t){a.setRequestHeader(e,t)}))}function g(e){return qq.indexOf(w.successfulResponseCodes[w.method],e)>=0}function v(e,t,n,i,a,o,r){if(y[e]={addToPath:n,additionalParams:i,additionalQueryParams:a,additionalHeaders:o,payload:r},_.push(e)<=w.maxConnections)return u(e,t)}var q,b,_=[],y={},w={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onSend:function(e){},onComplete:function(e,t,n){},onProgress:null};if(qq.extend(w,e),q=w.log,qq.indexOf(w.validMethods,w.method)<0)throw new Error("'"+w.method+"' is not a supported method for this type of request!");b="GET"===w.method||"DELETE"===w.method,qq.extend(this,{initTransport:function(e){var t,n,i,a,o,r;return{withPath:function(e){return t=e,this},withParams:function(e){return n=e,this},withQueryParams:function(e){return r=e,this},withHeaders:function(e){return i=e,this},withPayload:function(e){return a=e,this},withCacheBuster:function(){return o=!0,this},send:function(s){return o&&qq.indexOf(["GET","DELETE"],w.method)>=0&&(n.qqtimestamp=(new Date).getTime()),v(e,s,t,n,r,i,a)}}},canceled:function(e){r(e)}})},qq.UploadHandler=function(e){"use strict";var t=e.proxy,n={},i=t.onCancel,a=t.getName;qq.extend(this,{add:function(e,t){n[e]=t,n[e].temp={}},cancel:function(e){var t=this,o=new qq.Promise;i(e,a(e),o).then(function(){t.isValid(e)&&(n[e].canceled=!0,t.expunge(e)),o.success()})},expunge:function(e){delete n[e]},getThirdPartyFileId:function(e){return n[e].key},isValid:function(e){return void 0!==n[e]},reset:function(){n={}},_getFileState:function(e){return n[e]},_setThirdPartyFileId:function(e,t){n[e].key=t},_wasCanceled:function(e){return!!n[e].canceled}})},qq.UploadHandlerController=function(e,t){"use strict";var n,i,a,o=this,r=!1,s=!1,l={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(e,t){},onProgress:function(e,t,n,i){},onComplete:function(e,t,n,i){},onCancel:function(e,t){},onUploadPrep:function(e){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,i){},onAutoRetry:function(e,t,n,i){},onResume:function(e,t,n,i){},onUuidChanged:function(e,t){},getName:function(e){},setSize:function(e,t){},isQueued:function(e){},getIdsInProxyGroup:function(e){},getIdsInBatch:function(e){},isInProgress:function(e){}},u={done:function(e,t,n,i){var o=a._getChunkData(e,t);a._getFileState(e).attemptingResume=!1,delete a._getFileState(e).temp.chunkProgress[t],a._getFileState(e).loaded+=o.size,l.onUploadChunkSuccess(e,a._getChunkDataForCallback(o),n,i)},finalize:function(e){var t=l.getSize(e),n=l.getName(e);i("All chunks have been uploaded for "+e+" - finalizing...."),a.finalizeChunks(e).then(function(o,r){i("Finalize successful for "+e);var s=p.normalizeResponse(o,!0);l.onProgress(e,n,t,t),a._maybeDeletePersistedChunkData(e),p.cleanup(e,s,r)},function(t,a){var o=p.normalizeResponse(t,!1);i("Problem finalizing chunks for file ID "+e+" - "+o.error,"error"),(o.reset||a&&l.chunking.success.resetOnStatus.indexOf(a.status)>=0)&&u.reset(e),l.onAutoRetry(e,n,o,a)||p.cleanup(e,o,a)})},handleFailure:function(e,t,n,o){var r=l.getName(t);i("Chunked upload request failed for "+t+", chunk "+e),a.clearCachedChunk(t,e);var d,f=p.normalizeResponse(n,!1);if(f.reset)u.reset(t);else{var m=a._getFileState(t).chunking.inProgress;d=m?qq.indexOf(m,e):-1,d>=0&&(a._getFileState(t).chunking.inProgress.splice(d,1),a._getFileState(t).chunking.remaining.unshift(e))}a._getFileState(t).temp.ignoreFailure||(s&&(a._getFileState(t).temp.ignoreFailure=!0,i(qq.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(a._getXhrs(t))),JSON.stringify(a._getFileState(t).chunking.inProgress))),qq.each(a._getXhrs(t),function(e,n){i(qq.format("Attempting to abort file {}.{}. XHR readyState {}. ",t,e,n.readyState)),n.abort(),n._cancelled=!0}),a.moveInProgressToRemaining(t),c.free(t,!0)),l.onAutoRetry(t,r,f,o)||p.cleanup(t,f,o))},hasMoreParts:function(e){return!!a._getFileState(e).chunking.remaining.length},nextPart:function(e){var t=a._getFileState(e).chunking.remaining.shift();return t>=a._getTotalChunks(e)&&(t=null),t},reset:function(e){i("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+e,"error"),a._maybeDeletePersistedChunkData(e),a.reevaluateChunking(e),a._getFileState(e).loaded=0,a._getFileState(e).attemptingResume=!1},sendNext:function(e){var t=l.getSize(e),n=l.getName(e),o=u.nextPart(e),r=a._getChunkData(e,o),d=a._getFileState(e),f=d.attemptingResume,m=d.chunking.inProgress||[];if(null==d.loaded&&(d.loaded=0),f&&!1===l.onResume(e,n,r,d.customResumeData)&&(u.reset(e),o=u.nextPart(e),r=a._getChunkData(e,o),f=!1),null==o&&0===m.length)u.finalize(e);else{m.push(o),a._getFileState(e).chunking.inProgress=m,s&&c.open(e,o),s&&c.available()&&a._getFileState(e).chunking.remaining.length&&u.sendNext(e),0===r.blob.size&&(i(qq.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",o,e),"error"),u.handleFailure(o,e,"File is no longer available",null));l.onUploadChunk(e,n,a._getChunkDataForCallback(r)).then(function(n){if(l.isInProgress(e)){i(qq.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",e,o,r.start+1,r.end,t));var s={chunkIdx:o,id:e,overrides:n,resuming:f};a.uploadChunk(s).then(function(t,n){i("Chunked upload request succeeded for "+e+", chunk "+o),a.clearCachedChunk(e,o);var r=a._getFileState(e).chunking.inProgress||[],s=p.normalizeResponse(t,!0),l=qq.indexOf(r,o);i(qq.format("Chunk {} for file {} uploaded successfully.",o,e)),u.done(e,o,s,n),l>=0&&r.splice(l,1),a._maybePersistChunkedState(e),u.hasMoreParts(e)||0!==r.length?u.hasMoreParts(e)?u.sendNext(e):i(qq.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",e,JSON.stringify(r))):u.finalize(e)},function(t,n){u.handleFailure(o,e,t,n)}).done(function(){a.clearXhr(e,o)})}else i(qq.format("Not sending chunked upload request for item {}.{} - no longer in progress.",e,o))},function(t){u.handleFailure(o,e,t,null)})}}},c={_open:[],_openChunks:{},_waiting:[],available:function(){var e=l.maxConnections,t=0,n=0;return qq.each(c._openChunks,function(e,i){t++,n+=i.length}),e-(c._open.length-t+n)},free:function(e,t){var n,o=!t,r=qq.indexOf(c._waiting,e),s=qq.indexOf(c._open,e);delete c._openChunks[e],p.getProxyOrBlob(e)instanceof qq.BlobProxy&&(i("Generated blob upload has ended for "+e+", disposing generated blob."),delete a._getFileState(e).file),r>=0?c._waiting.splice(r,1):o&&s>=0&&(c._open.splice(s,1),(n=c._waiting.shift())>=0&&(c._open.push(n),p.start(n)))},getWaitingOrConnected:function(){var e=[];return qq.each(c._openChunks,function(t,n){n&&n.length&&e.push(parseInt(t))}),qq.each(c._open,function(t,n){c._openChunks[n]||e.push(parseInt(n))}),e=e.concat(c._waiting)},isUsingConnection:function(e){return qq.indexOf(c._open,e)>=0},open:function(e,t){return null==t&&c._waiting.push(e),!!c.available()&&(null==t?(c._waiting.pop(),c._open.push(e)):function(){var n=c._openChunks[e]||[];n.push(t),c._openChunks[e]=n}(),!0)},reset:function(){c._waiting=[],c._open=[]}},d={send:function(e,t){var n=a._getFileState(e);if(!n)return void i("Ignoring send request as this upload may have been cancelled, File ID "+e,"warn");n.loaded=0,i("Sending simple upload request for "+e),a.uploadFile(e).then(function(n,a){i("Simple upload request succeeded for "+e);var o=p.normalizeResponse(n,!0),r=l.getSize(e);l.onProgress(e,t,r,r),p.maybeNewUuid(e,o),p.cleanup(e,o,a)},function(n,a){i("Simple upload request failed for "+e);var o=p.normalizeResponse(n,!1);l.onAutoRetry(e,t,o,a)||p.cleanup(e,o,a)})}},p={cancel:function(e){i("Cancelling "+e),l.paramsStore.remove(e),c.free(e)},cleanup:function(e,t,n){var i=l.getName(e);l.onComplete(e,i,t,n),a._getFileState(e)&&a._clearXhrs&&a._clearXhrs(e),c.free(e)},getProxyOrBlob:function(e){return a.getProxy&&a.getProxy(e)||a.getFile&&a.getFile(e)},initHandler:function(){var e=t?qq[t]:qq.traditional,n=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";a=new e[n+"UploadHandler"](l,{getCustomResumeData:l.getCustomResumeData,getDataByUuid:l.getDataByUuid,getName:l.getName,getSize:l.getSize,getUuid:l.getUuid,log:i,onCancel:l.onCancel,onProgress:l.onProgress,onUuidChanged:l.onUuidChanged,onFinalizing:function(e){l.setStatus(e,qq.status.UPLOAD_FINALIZING)}}),a._removeExpiredChunkingRecords&&a._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(e){return l.isQueued(e)},maybeDefer:function(e,t){return t&&!a.getFile(e)&&t instanceof qq.BlobProxy?(l.onUploadPrep(e),i("Attempting to generate a blob on-demand for "+e),t.create().then(function(t){i("Generated an on-demand blob for "+e),a.updateBlob(e,t),l.setSize(e,t.size),a.reevaluateChunking(e),p.maybeSendDeferredFiles(e)},function(t){var a={};t&&(a.error=t),i(qq.format("Failed to generate blob for ID {}.  Error message: {}.",e,t),"error"),l.onComplete(e,l.getName(e),qq.extend(a,n),null),p.maybeSendDeferredFiles(e),c.free(e)}),!1):p.maybeSendDeferredFiles(e)},maybeSendDeferredFiles:function(e){var t=l.getIdsInProxyGroup(e),n=!1;return t&&t.length?(i("Maybe ready to upload proxy group file "+e),qq.each(t,function(t,i){if(p.isDeferredEligibleForUpload(i)&&a.getFile(i))n=i===e,p.now(i);else if(p.isDeferredEligibleForUpload(i))return!1})):(n=!0,p.now(e)),n},maybeNewUuid:function(e,t){void 0!==t.newUuid&&l.onUuidChanged(e,t.newUuid)},normalizeResponse:function(e,t){var n=e;return qq.isObject(e)||(n={},qq.isString(e)&&!t&&(n.error=e)),n.success=t,n},now:function(e){var t=l.getName(e);if(!o.isValid(e))throw new qq.Error(e+" is not a valid file ID to upload!");l.onUpload(e,t).then(function(n){n&&n.pause?(l.setStatus(e,qq.status.PAUSED),a.pause(e),c.free(e)):r&&a._shouldChunkThisFile(e)?u.sendNext(e):d.send(e,t)},function(n){if(n=n||{},i(e+" upload start aborted due to rejected onUpload Promise - details: "+n,"error"),!l.onAutoRetry(e,t,n.responseJSON||{})){var a=p.normalizeResponse(n.responseJSON,!1);p.cleanup(e,a)}})},start:function(e){var t=p.getProxyOrBlob(e);return t?p.maybeDefer(e,t):(p.now(e),!0)}};qq.extend(this,{add:function(e,t){a.add.apply(this,arguments)},upload:function(e){return!!c.open(e)&&p.start(e)},retry:function(e){return s&&(a._getFileState(e).temp.ignoreFailure=!1),c.isUsingConnection(e)?p.start(e):o.upload(e)},cancel:function(e){var t=a.cancel(e);qq.isGenericPromise(t)?t.then(function(){p.cancel(e)}):!1!==t&&p.cancel(e)},cancelAll:function(){var e,t=c.getWaitingOrConnected();if(t.length)for(e=t.length-1;e>=0;e--)o.cancel(t[e]);c.reset()},getFile:function(e){return a.getProxy&&a.getProxy(e)?a.getProxy(e).referenceBlob:a.getFile&&a.getFile(e)},isProxied:function(e){return!(!a.getProxy||!a.getProxy(e))},getInput:function(e){if(a.getInput)return a.getInput(e)},reset:function(){i("Resetting upload handler"),o.cancelAll(),c.reset(),a.reset()},expunge:function(e){if(o.isValid(e))return a.expunge(e)},isValid:function(e){return a.isValid(e)},hasResumeRecord:function(e){var t=a.isValid(e)&&a._getLocalStorageId&&a._getLocalStorageId(e);return!!t&&!!localStorage.getItem(t)},getResumableFilesData:function(){return a.getResumableFilesData?a.getResumableFilesData():[]},getThirdPartyFileId:function(e){if(o.isValid(e))return a.getThirdPartyFileId(e)},pause:function(e){return!!(o.isResumable(e)&&a.pause&&o.isValid(e)&&a.pause(e))&&(c.free(e),a.moveInProgressToRemaining(e),!0)},isAttemptingResume:function(e){return!!a.isAttemptingResume&&a.isAttemptingResume(e)},isResumable:function(e){return!!a.isResumable&&a.isResumable(e)}}),qq.extend(l,e),i=l.log,r=l.chunking.enabled&&qq.supportedFeatures.chunking,s=r&&l.chunking.concurrent.enabled,n=function(){var e={};return e[l.preventRetryParam]=!0,e}(),p.initHandler()},qq.WindowReceiveMessage=function(e){"use strict";var t={log:function(e,t){}},n={};qq.extend(t,e),qq.extend(this,{receiveMessage:function(e,t){var i=function(e){t(e.data)};window.postMessage?n[e]=qq(window).attach("message",i):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var t=n[e];t&&t()}}})},qq.FormUploadHandler=function(e){"use strict";function t(e){delete c[e],p&&(clearTimeout(d[e]),delete d[e],g.stopReceivingMessages(e));var t=document.getElementById(r._getIframeName(e));t&&(t.setAttribute("src","javascript:false;"),qq(t).remove())}function n(e){return e.split("_")[0]}function i(e){var t=qq.toElement("<iframe src='javascript:false;' name='"+e+"' />");return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}function a(e,t){var i=e.id,a=n(i),o=m(a);u[o]=t,c[a]=qq(e).attach("load",function(){r.getInput(a)&&(h("Received iframe load event for CORS upload request (iframe name "+i+")"),d[i]=setTimeout(function(){var e="No valid message received from loaded iframe for iframe name "+i;h(e,"error"),t({error:e})},1e3))}),g.receiveMessage(i,function(e){h("Received the following window message: '"+e+"'");var t,a=(n(i),r._parseJsonResponse(e)),o=a.uuid;o&&u[o]?(h("Handling response for iframe name "+i),clearTimeout(d[i]),delete d[i],r._detachLoadEvent(i),t=u[o],delete u[o],g.stopReceivingMessages(i),t(a)):o||h("'"+e+"' does not contain a UUID - ignoring.")})}var o=e.options,r=this,s=e.proxy,l=qq.getUniqueId(),u={},c={},d={},p=o.isCors,f=o.inputName,m=s.getUuid,h=s.log,g=new qq.WindowReceiveMessage({log:h});qq.extend(this,new qq.UploadHandler(e)),qq.override(this,function(e){return{add:function(t,n){e.add(t,{input:n}),n.setAttribute("name",f),n.parentNode&&qq(n).remove()},expunge:function(n){t(n),e.expunge(n)},isValid:function(t){return e.isValid(t)&&void 0!==r._getFileState(t).input}}}),qq.extend(this,{getInput:function(e){return r._getFileState(e).input},_attachLoadEvent:function(e,t){var n;p?a(e,t):c[e.id]=qq(e).attach("load",function(){if(h("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(e){h("Error when attempting to access iframe during handling of upload response ("+e.message+")","error"),n={success:!1}}t(n)}})},_createIframe:function(e){return i(r._getIframeName(e))},_detachLoadEvent:function(e){void 0!==c[e]&&(c[e](),delete c[e])},_getIframeName:function(e){return e+"_"+l},_initFormForUpload:function(e){var t=e.method,n=e.endpoint,i=e.params,a=e.paramsInBody,o=e.targetName,r=qq.toElement("<form method='"+t+"' enctype='multipart/form-data'></form>"),s=n;return a?qq.obj2Inputs(i,r):s=qq.obj2url(i,n),r.setAttribute("action",s),r.setAttribute("target",o),r.style.display="none",document.body.appendChild(r),r},_parseJsonResponse:function(e){var t={};try{t=qq.parseJson(e)}catch(e){h("Error when attempting to parse iframe upload response ("+e.message+")","error")}return t}})},qq.XhrUploadHandler=function(e){"use strict";function t(e){qq.each(n._getXhrs(e),function(t,i){var a=n._getAjaxRequester(e,t);i.onreadystatechange=null,i.upload.onprogress=null,i.abort(),a&&a.canceled&&a.canceled(e)})}var n=this,i=e.options.namespace,a=e.proxy,o=e.options.chunking,r=function(e){var t=n._getFileState(e);if(t.chunkSize)return t.chunkSize;var i=o.partSize;return qq.isFunction(i)&&(i=i(e,d(e))),t.chunkSize=i,i},s=e.options.resume,l=o&&e.options.chunking.enabled&&qq.supportedFeatures.chunking,u=s&&e.options.resume.enabled&&l&&qq.supportedFeatures.resume,c=a.getName,d=a.getSize,p=a.getUuid,f=a.getEndpoint,m=a.getDataByUuid,h=a.onUuidChanged,g=a.onProgress,v=a.log,q=a.getCustomResumeData;qq.extend(this,new qq.UploadHandler(e)),qq.override(this,function(e){return{add:function(t,i){if(qq.isFile(i)||qq.isBlob(i))e.add(t,{file:i});else{if(!(i instanceof qq.BlobProxy))throw new Error("Passed obj is not a File, Blob, or proxy");e.add(t,{proxy:i})}n._initTempState(t),u&&n._maybePrepareForResume(t)},expunge:function(i){t(i),n._maybeDeletePersistedChunkData(i),n._clearXhrs(i),e.expunge(i)}}}),qq.extend(this,{clearCachedChunk:function(e,t){var i=n._getFileState(e);i&&delete i.temp.cachedChunks[t]},clearXhr:function(e,t){var i=n._getFileState(e).temp;i.xhrs&&delete i.xhrs[t],i.ajaxRequesters&&delete i.ajaxRequesters[t]},finalizeChunks:function(e,t){var i=n._getTotalChunks(e)-1,a=n._getXhr(e,i);return t?(new qq.Promise).success(t(a),a):(new qq.Promise).success({},a)},getFile:function(e){return n.isValid(e)&&n._getFileState(e).file},getProxy:function(e){return n.isValid(e)&&n._getFileState(e).proxy},getResumableFilesData:function(){var e=[];return n._iterateResumeRecords(function(t,i){n.moveInProgressToRemaining(null,i.chunking.inProgress,i.chunking.remaining);var a={name:i.name,remaining:i.chunking.remaining,size:i.size,uuid:i.uuid};i.key&&(a.key=i.key),i.customResumeData&&(a.customResumeData=i.customResumeData),e.push(a)}),e},isAttemptingResume:function(e){return n._getFileState(e).attemptingResume},isResumable:function(e){return!!o&&n.isValid(e)&&!n._getFileState(e).notResumable},moveInProgressToRemaining:function(e,t,i){var a=n._getFileState(e)||{},o=a.chunking||{},r=t||o.inProgress,s=i||o.remaining;r&&(v(qq.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(r))),r.reverse(),qq.each(r,function(e,t){s.unshift(t)}),r.length=0)},pause:function(e){if(n.isValid(e))return v(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",e,c(e))),n._getFileState(e).paused=!0,t(e),!0},reevaluateChunking:function(e){if(o&&n.isValid(e)){var t,i,a=n._getFileState(e);if(delete a.chunking,a.chunking={},(t=n._getTotalChunks(e))>1||o.mandatory){for(a.chunking.enabled=!0,a.chunking.parts=t,a.chunking.remaining=[],i=0;i<t;i++)a.chunking.remaining.push(i);n._initTempState(e)}else a.chunking.enabled=!1}},updateBlob:function(e,t){n.isValid(e)&&(n._getFileState(e).file=t)},_clearXhrs:function(e){var t=n._getFileState(e).temp;qq.each(t.ajaxRequesters,function(e){delete t.ajaxRequesters[e]}),qq.each(t.xhrs,function(e){delete t.xhrs[e]})},_createXhr:function(e,t){return n._registerXhr(e,t,qq.createXhrInstance())},_getAjaxRequester:function(e,t){var i=null==t?-1:t;return n._getFileState(e).temp.ajaxRequesters[i]},_getChunkData:function(e,t){var i=r(e),a=d(e),o=n.getFile(e),s=i*t,l=s+i>=a?a:s+i,u=n._getTotalChunks(e),c=this._getFileState(e).temp.cachedChunks,p=c[t]||qq.sliceBlob(o,s,l);return c[t]=p,{part:t,start:s,end:l,count:u,blob:p,size:l-s}},_getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}},_getLocalStorageId:function(e){var t=c(e),n=d(e),a=r(e),o=f(e),l=s.customKeys(e),u=qq.format("qq{}resume{}-{}-{}-{}-{}",i,"5.0",t,n,a,o);return l.forEach(function(e){u+="-"+e}),u},_getMimeType:function(e){return n.getFile(e).type},_getPersistableData:function(e){return n._getFileState(e).chunking},_getTotalChunks:function(e){if(o){var t=d(e),n=r(e);return Math.ceil(t/n)}},_getXhr:function(e,t){var i=null==t?-1:t;return n._getFileState(e).temp.xhrs[i]},_getXhrs:function(e){return n._getFileState(e).temp.xhrs},_iterateResumeRecords:function(e){u&&qq.each(localStorage,function(t,n){if(0===t.indexOf(qq.format("qq{}resume",i))){var a=JSON.parse(n);e(t,a)}})},_initTempState:function(e){n._getFileState(e).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(e){n._getFileState(e).notResumable=!0},_maybeDeletePersistedChunkData:function(e){var t;return!!(u&&n.isResumable(e)&&(t=n._getLocalStorageId(e))&&localStorage.getItem(t))&&(localStorage.removeItem(t),!0)},_maybePrepareForResume:function(e){var t,i,a=n._getFileState(e);u&&void 0===a.key&&(t=n._getLocalStorageId(e),(i=localStorage.getItem(t))&&(i=JSON.parse(i),m(i.uuid)?n._markNotResumable(e):(v(qq.format("Identified file with ID {} and name of {} as resumable.",e,c(e))),h(e,i.uuid),a.key=i.key,a.chunking=i.chunking,a.loaded=i.loaded,a.customResumeData=i.customResumeData,a.attemptingResume=!0,n.moveInProgressToRemaining(e))))},_maybePersistChunkedState:function(e){var t,i,a=n._getFileState(e);if(u&&n.isResumable(e)){var o=q(e);t=n._getLocalStorageId(e),i={name:c(e),size:d(e),uuid:p(e),key:a.key,chunking:a.chunking,loaded:a.loaded,lastUpdated:Date.now()},o&&(i.customResumeData=o);try{localStorage.setItem(t,JSON.stringify(i))}catch(t){v(qq.format("Unable to save resume data for '{}' due to error: '{}'.",e,t.toString()),"warn")}}},_registerProgressHandler:function(e,t,i){var a=n._getXhr(e,t),o=c(e),r={simple:function(t,n){var i=d(e);t===n?g(e,o,i,i):g(e,o,t>=i?i-1:t,i)},chunked:function(a,r){var s=n._getFileState(e).temp.chunkProgress,l=n._getFileState(e).loaded,u=a,c=r,p=d(e),f=u-(c-i),m=l;s[t]=f,qq.each(s,function(e,t){m+=t}),g(e,o,m,p)}};a.upload.onprogress=function(e){if(e.lengthComputable){r[null==i?"simple":"chunked"](e.loaded,e.total)}}},_registerXhr:function(e,t,i,a){var o=null==t?-1:t,r=n._getFileState(e).temp;return r.xhrs=r.xhrs||{},r.ajaxRequesters=r.ajaxRequesters||{},r.xhrs[o]=i,a&&(r.ajaxRequesters[o]=a),i},_removeExpiredChunkingRecords:function(){var e=s.recordsExpireIn;n._iterateResumeRecords(function(t,n){var i=new Date(n.lastUpdated);i.setDate(i.getDate()+e),i.getTime()<=Date.now()&&(v("Removing expired resume record with key "+t),localStorage.removeItem(t))})},_shouldChunkThisFile:function(e){var t=n._getFileState(e);if(t)return t.chunking||n.reevaluateChunking(e),t.chunking.enabled}})},qq.DeleteFileAjaxRequester=function(e){"use strict";var t,n={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(e){return{}},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onDelete:function(e){},onDeleteComplete:function(e,t,n){}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:n.method,endpointStore:n.endpointStore,paramsStore:n.paramsStore,mandatedParams:function(){return"POST"===n.method.toUpperCase()?{_method:"DELETE"}:{}}(),maxConnections:n.maxConnections,customHeaders:function(e){return n.customHeaders.get(e)},log:n.log,onSend:n.onDelete,onComplete:n.onDeleteComplete,cors:n.cors})),qq.extend(this,{sendDelete:function(e,i,a){var o=a||{};n.log("Submitting delete file request for "+e),"DELETE"===n.method?t.initTransport(e).withPath(i).withParams(o).send():(o[n.uuidParamName]=i,t.initTransport(e).withParams(o).send())}})},function(){function e(e){var t,n=e.naturalWidth,i=e.naturalHeight,a=document.createElement("canvas");return n*i>1048576&&(a.width=a.height=1,t=a.getContext("2d"),t.drawImage(e,1-n,0),0===t.getImageData(0,0,1,1).data[3])}function t(e,t,n){var i,a,o,r,s=document.createElement("canvas"),l=0,u=n,c=n;for(s.width=1,s.height=n,i=s.getContext("2d"),i.drawImage(e,0,0),a=i.getImageData(0,0,1,n).data;c>l;)o=a[4*(c-1)+3],0===o?u=c:l=c,c=u+l>>1;return r=c/n,0===r?1:r}function n(e,t,n,i){var o=document.createElement("canvas"),r=n.mime||"image/jpeg",s=new qq.Promise;return a(e,t,o,n,i).then(function(){s.success(o.toDataURL(r,n.quality||.8))}),s}function i(e){if(!qq.ios())throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!");if(e.origHeight*e.origWidth>5241e3)return{newHeight:Math.round(Math.sqrt(e.origHeight/e.origWidth*5241e3)),newWidth:Math.round(Math.sqrt(e.origWidth/e.origHeight*5241e3))}}function a(n,a,s,l,u){var c,d=n.naturalWidth,p=n.naturalHeight,f=l.width,m=l.height,h=s.getContext("2d"),g=new qq.Promise;return h.save(),l.resize?o({blob:a,canvas:s,image:n,imageHeight:p,imageWidth:d,orientation:l.orientation,resize:l.resize,targetHeight:m,targetWidth:f}):(qq.supportedFeatures.unlimitedScaledImageSize||(c=i({origWidth:f,origHeight:m}))&&(qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",f,m,c.newWidth,c.newHeight),"warn"),f=c.newWidth,m=c.newHeight),r(s,f,m,l.orientation),qq.ios()?function(){e(n)&&(d/=2,p/=2);var i,a,o,r=1024,s=document.createElement("canvas"),l=u?t(n,d,p):1,c=Math.ceil(r*f/d),g=Math.ceil(r*m/p/l),v=0,q=0;for(s.width=s.height=r,i=s.getContext("2d");v<p;){for(a=0,o=0;a<d;)i.clearRect(0,0,r,r),i.drawImage(n,-a,-v),h.drawImage(s,0,0,r,r,o,q,c,g),a+=r,o+=c;v+=r,q+=g}h.restore(),s=i=null}():h.drawImage(n,0,0,f,m),s.qqImageRendered&&s.qqImageRendered(),g.success(),g)}function o(e){var t=e.blob,n=e.image,i=e.imageHeight,a=e.imageWidth,o=e.orientation,s=new qq.Promise,l=e.resize,u=document.createElement("canvas"),c=u.getContext("2d"),d=e.canvas,p=e.targetHeight,f=e.targetWidth;return r(u,a,i,o),d.height=p,d.width=f,c.drawImage(n,0,0),l({blob:t,height:p,image:n,sourceCanvas:u,targetCanvas:d,width:f}).then(function(){d.qqImageRendered&&d.qqImageRendered(),s.success()},s.failure),s}function r(e,t,n,i){switch(i){case 5:case 6:case 7:case 8:e.width=n,e.height=t;break;default:e.width=t,e.height=n}var a=e.getContext("2d");switch(i){case 2:a.translate(t,0),a.scale(-1,1);break;case 3:a.translate(t,n),a.rotate(Math.PI);break;case 4:a.translate(0,n),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-n);break;case 7:a.rotate(.5*Math.PI),a.translate(t,-n),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-t,0)}}function s(e,t){var n=this;window.Blob&&e instanceof Blob&&function(){var t=new Image,i=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!i)throw Error("No createObjectURL function found to create blob url");t.src=i.createObjectURL(e),n.blob=e,e=t}(),e.naturalWidth||e.naturalHeight||(e.onload=function(){var e=n.imageLoadListeners;e&&(n.imageLoadListeners=null,setTimeout(function(){for(var t=0,n=e.length;t<n;t++)e[t]()},0))},e.onerror=t,this.imageLoadListeners=[]),this.srcImage=e}s.prototype.render=function(e,t){t=t||{};var i,o=this,r=this.srcImage.naturalWidth,s=this.srcImage.naturalHeight,l=t.width,u=t.height,c=t.maxWidth,d=t.maxHeight,p=!this.blob||"image/jpeg"===this.blob.type,f=e.tagName.toLowerCase();if(this.imageLoadListeners)return void this.imageLoadListeners.push(function(){o.render(e,t)});l&&!u?u=s*l/r<<0:u&&!l?l=r*u/s<<0:(l=r,u=s),c&&l>c&&(l=c,u=s*l/r<<0),d&&u>d&&(u=d,l=r*u/s<<0),i={width:l,height:u},qq.each(t,function(e,t){i[e]=t}),"img"===f?function(){var t=e.src;n(o.srcImage,o.blob,i,p).then(function(n){e.src=n,t===e.src&&e.onload()})}():"canvas"===f&&a(this.srcImage,this.blob,e,i,p),"function"==typeof this.onrender&&this.onrender(e)},qq.MegaPixImage=s}(),qq.ImageGenerator=function(e){"use strict";function t(e){return"img"===e.tagName.toLowerCase()}function n(e){return"canvas"===e.tagName.toLowerCase()}function i(){return void 0!==(new Image).crossOrigin}function a(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")}function o(e){var t=e.split("/"),n=t[t.length-1].split("?")[0],i=qq.getExtension(n);switch(i=i&&i.toLowerCase()){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function r(e){var t,n,i,a=document.createElement("a");return a.href=e,t=a.protocol,i=a.port,n=a.hostname,t.toLowerCase()!==window.location.protocol.toLowerCase()||(n.toLowerCase()!==window.location.hostname.toLowerCase()||i!==window.location.port&&!qq.ie())}function s(t,n){t.onload=function(){t.onload=null,t.onerror=null,n.success(t)},t.onerror=function(){t.onload=null,t.onerror=null,e("Problem drawing thumbnail!","error"),n.failure(t,"Problem drawing thumbnail!")}}function l(e,t){e.qqImageRendered=function(){t.success(e)}}function u(i,a){var o=t(i)||n(i);return t(i)?s(i,a):n(i)?l(i,a):(a.failure(i),e(qq.format("Element container of type {} is not supported!",i.tagName),"error")),o}function c(t,n,i){var a=new qq.Promise,o=new qq.Identify(t,e),r=i.maxSize,s=null==i.orient||i.orient,l=function(){n.onerror=null,n.onload=null,e("Could not render preview, file may be too large!","error"),a.failure(n,"Browser cannot render image!")};return o.isPreviewable().then(function(o){var c={parse:function(){return(new qq.Promise).success()}},d=s?new qq.Exif(t,e):c,p=new qq.MegaPixImage(t,l);u(n,a)&&d.parse().then(function(e){var t=e&&e.Orientation;p.render(n,{maxWidth:r,maxHeight:r,orientation:t,mime:o,resize:i.customResizeFunction})},function(t){e(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t)),p.render(n,{maxWidth:r,maxHeight:r,mime:o,resize:i.customResizeFunction})})},function(){e("Not previewable"),a.failure(n,"Not previewable")}),a}function d(e,t,n,i,a){var s=new Image,l=new qq.Promise;u(s,l),r(e)&&(s.crossOrigin="anonymous"),s.src=e,l.then(function(){u(t,n),new qq.MegaPixImage(s).render(t,{maxWidth:i,maxHeight:i,mime:o(e),resize:a})},n.failure)}function p(e,t,n,i){u(t,n),qq(t).css({maxWidth:i+"px",maxHeight:i+"px"}),t.src=e}function f(e,o,s){var l=new qq.Promise,c=s.scale,f=c?s.maxSize:null;return c&&t(o)?a()?r(e)&&!i()?p(e,o,l,f):d(e,o,l,f):p(e,o,l,f):n(o)?d(e,o,l,f):u(o,l)&&(o.src=e),l}qq.extend(this,{generate:function(t,n,i){return qq.isString(t)?(e("Attempting to update thumbnail based on server response."),f(t,n,i||{})):(e("Attempting to draw client-side image preview."),c(t,n,i||{}))}}),this._testing={},this._testing.isImg=t,this._testing.isCanvas=n,this._testing.isCrossOrigin=r,this._testing.determineMimeOfFileName=o},qq.Exif=function(e,t){"use strict";function n(e){for(var t=0,n=0;e.length>0;)t+=parseInt(e.substring(0,2),16)*Math.pow(2,n),e=e.substring(2,e.length),n+=8;return t}function i(t,n){var a=t,o=n;return void 0===a&&(a=2,o=new qq.Promise),qq.readBlobToHex(e,a,4).then(function(e){var t,n=/^ffe([0-9])/.exec(e);n?"1"!==n[1]?(t=parseInt(e.slice(4,8),16),i(a+t+2,o)):o.success(a):o.failure("No EXIF header to be found!")}),o}function a(){var t=new qq.Promise;return qq.readBlobToHex(e,0,6).then(function(e){0!==e.indexOf("ffd8")?t.failure("Not a valid JPEG!"):i().then(function(e){t.success(e)},function(e){t.failure(e)})}),t}function o(t){var n=new qq.Promise;return qq.readBlobToHex(e,t+10,2).then(function(e){n.success("4949"===e)}),n}function r(t,i){var a=new qq.Promise;return qq.readBlobToHex(e,t+18,2).then(function(e){if(i)return a.success(n(e));a.success(parseInt(e,16))}),a}function s(t,n){var i=t+20,a=12*n;return qq.readBlobToHex(e,i,a)}function l(e){for(var t=[],n=0;n+24<=e.length;)t.push(e.slice(n,n+24)),n+=24;return t}function u(e,t){var i=qq.extend([],c),a={};return qq.each(t,function(t,o){var r,s,l,u=o.slice(0,4),c=e?n(u):parseInt(u,16),p=i.indexOf(c);if(p>=0&&(s=d[c].name,l=d[c].bytes,r=o.slice(16,16+2*l),a[s]=e?n(r):parseInt(r,16),i.splice(p,1)),0===i.length)return!1}),a}var c=[274],d={274:{name:"Orientation",bytes:2}};qq.extend(this,{parse:function(){var n=new qq.Promise,i=function(e){t(qq.format("EXIF header parse failed: '{}' ",e)),n.failure(e)};return a().then(function(a){t(qq.format("Moving forward with EXIF header parsing for '{}'",void 0===e.name?"blob":e.name)),o(a).then(function(e){t(qq.format("EXIF Byte order is {} endian",e?"little":"big")),r(a,e).then(function(o){t(qq.format("Found {} APP1 directory entries",o)),s(a,o).then(function(i){var a=l(i),o=u(e,a);t("Successfully parsed some EXIF tags"),n.success(o)},i)},i)},i)},i),n}}),this._testing={},this._testing.parseLittleEndian=n},qq.Identify=function(e,t){"use strict";function n(e,t){var n=!1,i=[].concat(e);return qq.each(i,function(e,i){if(0===t.indexOf(i))return n=!0,!1}),n}qq.extend(this,{isPreviewable:function(){var i=this,a=new qq.Promise,o=!1,r=void 0===e.name?"blob":e.name;return t(qq.format("Attempting to determine if {} can be rendered in this browser",r)),t("First pass: check type attribute of blob object."),this.isPreviewableSync()?(t("Second pass: check for magic bytes in file header."),qq.readBlobToHex(e,0,4).then(function(e){qq.each(i.PREVIEWABLE_MIME_TYPES,function(t,i){if(n(i,e))return("image/tiff"!==t||qq.supportedFeatures.tiffPreviews)&&(o=!0,a.success(t)),!1}),t(qq.format("'{}' is {} able to be rendered in this browser",r,o?"":"NOT")),o||a.failure()},function(){t("Error reading file w/ name '"+r+"'.  Not able to be rendered in this browser."),a.failure()})):a.failure(),a},isPreviewableSync:function(){var n=e.type,i=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),n)>=0,a=!1,o=void 0===e.name?"blob":e.name;return i&&(a="image/tiff"!==n||qq.supportedFeatures.tiffPreviews),!a&&t(o+" is not previewable in this browser per the blob's type attr"),a}})},qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]},qq.ImageValidation=function(e,t){"use strict";function n(e){var t=!1;return qq.each(e,function(e,n){if(n>0)return t=!0,!1}),t}function i(){var n=new qq.Promise;return new qq.Identify(e,t).isPreviewable().then(function(){var i=new Image,a=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;a?(i.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error"),n.failure()},i.onload=function(){n.success({width:this.width,height:this.height})},i.src=a.createObjectURL(e)):(t("No createObjectURL function available to generate image URL!","error"),n.failure())},n.failure),n}function a(e,t){var n;return qq.each(e,function(e,i){if(i>0){var a=/(max|min)(Width|Height)/.exec(e),o=a[2].charAt(0).toLowerCase()+a[2].slice(1),r=t[o];switch(a[1]){case"min":if(r<i)return n=e,!1;break;case"max":if(r>i)return n=e,!1}}}),n}this.validate=function(e){var o=new qq.Promise;return t("Attempting to validate image."),n(e)?i().then(function(t){var n=a(e,t);n?o.failure(n):o.success()},o.success):o.success(),o}},qq.Session=function(e){"use strict";function t(e){if(qq.isArray(e))return!0;i.log("Session response is not an array.","error")}function n(e,n,a,o){var r=!1;n=n&&t(e),n&&qq.each(e,function(e,t){if(null==t.uuid)r=!0,i.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",e),"error");else if(null==t.name)r=!0,i.log(qq.format("Session response item {} did not include a valid name - ignoring.",e),"error");else try{return i.addFileRecord(t),!0}catch(e){r=!0,i.log(e.message,"error")}return!1}),o[n&&!r?"success":"failure"](e,a)}var i={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(e){},log:function(e,t){}};qq.extend(i,e,!0),this.refresh=function(){var e=new qq.Promise,t=function(t,i,a){n(t,i,a,e)},a=qq.extend({},i);return new qq.SessionAjaxRequester(qq.extend(a,{onComplete:t})).queryServer(),e}},qq.SessionAjaxRequester=function(e){"use strict";function t(e,t,n){var a=null;if(null!=t.responseText)try{a=qq.parseJson(t.responseText)}catch(e){i.log("Problem parsing session response: "+e.message,"error"),n=!0}i.onComplete(a,!n,t)}var n,i={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(e,t,n){},log:function(e,t){}};qq.extend(i,e),n=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return i.endpoint}},customHeaders:i.customHeaders,log:i.log,onComplete:t,cors:i.cors})),qq.extend(this,{queryServer:function(){var e=qq.extend({},i.params);i.log("Session query request."),n.initTransport("sessionRefresh").withParams(e).withCacheBuster().send()}})},qq.Scaler=function(e,t){"use strict";var n=e.customResizer,i=e.sendOriginal,a=e.orient,o=e.defaultType,r=e.defaultQuality/100,s=e.failureText,l=e.includeExif,u=this._getSortedSizes(e.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&u.length>0,getFileRecords:function(e,c,d){var p=this,f=[],m=d.blob?d.blob:d;return new qq.Identify(m,t).isPreviewableSync()?(qq.each(u,function(e,i){var u=p._determineOutputType({defaultType:o,requestedType:i.type,refType:m.type});f.push({uuid:qq.getUniqueId(),name:p._getName(c,{name:i.name,type:u,refType:m.type}),blob:new qq.BlobProxy(m,qq.bind(p._generateScaledImage,p,{customResizeFunction:n,maxSize:i.maxSize,orient:a,type:u,quality:r,failedText:s,includeExif:l,log:t}))})}),f.push({uuid:e,name:c,size:m.size,blob:i?m:null})):f.push({uuid:e,name:c,size:m.size,blob:m}),f},handleNewFile:function(e,t,n,i,a,o,r,s){var l=this,u=(e.qqButtonId||e.blob&&e.blob.qqButtonId,[]),c=null,d=s.addFileToHandler,p=s.uploadData,f=s.paramsStore,m=qq.getUniqueId();qq.each(l.getFileRecords(n,t,e),function(e,t){var n,i=t.size;t.blob instanceof qq.BlobProxy&&(i=-1),n=p.addFile({uuid:t.uuid,name:t.name,size:i,batchId:o,proxyGroupId:m}),t.blob instanceof qq.BlobProxy?u.push(n):c=n,t.blob?(d(n,t.blob),a.push({id:n,file:t.blob})):p.setStatus(n,qq.status.REJECTED)}),null!==c&&(qq.each(u,function(e,t){var n={qqparentuuid:p.retrieve({id:c}).uuid,qqparentsize:p.retrieve({id:c}).size};n[r]=p.retrieve({id:t}).uuid,p.setParentId(t,c),f.addReadOnly(t,n)}),u.length&&function(){var e={};e[r]=p.retrieve({id:c}).uuid,f.addReadOnly(c,e)}())}})},qq.extend(qq.Scaler.prototype,{scaleImage:function(e,t,n){"use strict";if(!qq.supportedFeatures.scaling)throw new qq.Error("Scaling is not supported in this browser!");var i=new qq.Promise,a=n.log,o=n.getFile(e),r=n.uploadData.retrieve({id:e}),s=r&&r.name,l=r&&r.uuid,u={customResizer:t.customResizer,sendOriginal:!1,orient:t.orient,defaultType:t.type||null,defaultQuality:t.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:t.maxSize}]},c=new qq.Scaler(u,a);return qq.Scaler&&qq.supportedFeatures.imagePreviews&&o?qq.bind(function(){var t=c.getFileRecords(l,s,o)[0];t&&t.blob instanceof qq.BlobProxy?t.blob.create().then(i.success,i.failure):(a(e+" is not a scalable image!","error"),i.failure())},this)():(i.failure(),a("Could not generate requested scaled image for "+e+".  Scaling is either not possible in this browser, or the file could not be located.","error")),i},_determineOutputType:function(e){"use strict";var t=e.requestedType,n=e.defaultType,i=e.refType;return n||t?t&&qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),t)>=0?"image/tiff"===t?qq.supportedFeatures.tiffPreviews?t:n:t:n:"image/jpeg"!==i?"image/png":i},_getName:function(e,t){"use strict";var n=e.lastIndexOf("."),i=t.type||"image/png",a=t.refType,o="",r=qq.getExtension(e),s="";return t.name&&t.name.trim().length&&(s=" ("+t.name+")"),n>=0?(o=e.substr(0,n),a!==i&&(r=i.split("/")[1]),o+=s+"."+r):o=e+s,o},_getSortedSizes:function(e){"use strict";return e=qq.extend([],e),e.sort(function(e,t){return e.maxSize>t.maxSize?1:e.maxSize<t.maxSize?-1:0})},_generateScaledImage:function(e,t){"use strict";var n=this,i=e.customResizeFunction,a=e.log,o=e.maxSize,r=e.orient,s=e.type,l=e.quality,u=e.failedText,c=e.includeExif&&"image/jpeg"===t.type&&"image/jpeg"===s,d=new qq.Promise,p=new qq.ImageGenerator(a),f=document.createElement("canvas");return a("Attempting to generate scaled version for "+t.name),p.generate(t,f,{maxSize:o,orient:r,customResizeFunction:i}).then(function(){var e=f.toDataURL(s,l),i=function(){a("Success generating scaled version for "+t.name);var n=qq.dataUriToBlob(e);d.success(n)};c?n._insertExifHeader(t,e,a).then(function(t){e=t,i()},function(){a("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error"),i()}):i()},function(){a("Failed attempt to generate scaled version for "+t.name,"error"),d.failure(u)}),d},_insertExifHeader:function(e,t,n){"use strict";var i=new FileReader,a=new qq.Promise,o="";return i.onload=function(){o=i.result,a.success(qq.ExifRestorer.restore(o,t))},i.onerror=function(){n("Problem reading "+e.name+" during attempt to transfer EXIF data to scaled version.","error"),a.failure()},i.readAsDataURL(e),a},_dataUriToBlob:function(e){"use strict";var t,n,i,a;return t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),a=new Uint8Array(i),qq.each(t,function(e,t){a[e]=t.charCodeAt(0)}),this._createBlob(i,n)},_createBlob:function(e,t){"use strict";var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=n&&new n;return i?(i.append(e),i.getBlob(t)):new Blob([e],{type:t})}}),qq.ExifRestorer=function(){var e={};return e.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e.encode64=function(e){var t,n,i,a,o,r="",s="",l="",u=0;do{t=e[u++],n=e[u++],s=e[u++],i=t>>2,a=(3&t)<<4|n>>4,o=(15&n)<<2|s>>6,l=63&s,isNaN(n)?o=l=64:isNaN(s)&&(l=64),r=r+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),t=n=s="",i=a=o=l=""}while(u<e.length);return r},e.restore=function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),a=this.exifManipulation(t,i);return"data:image/jpeg;base64,"+this.encode64(a)},e.exifManipulation=function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)},e.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(t=e[n],255==t[0]&225==t[1])return t;return[]},e.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),a=i.indexOf(255,3),o=i.slice(0,a),r=i.slice(a),s=o;return s=s.concat(t),s=s.concat(r)},e.slice2Segments=function(e){for(var t=0,n=[];;){if(255==e[t]&218==e[t+1])break;if(255==e[t]&216==e[t+1])t+=2;else{var i=256*e[t+2]+e[t+3],a=t+i+2,o=e.slice(t,a);n.push(o),t=a}if(t>e.length)break}return n},e.decode64=function(e){var t,n,i,a,o,r="",s="",l=0,u=[];if(/[^A-Za-z0-9\+\/\=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=this.KEY_STR.indexOf(e.charAt(l++)),a=this.KEY_STR.indexOf(e.charAt(l++)),o=this.KEY_STR.indexOf(e.charAt(l++)),s=this.KEY_STR.indexOf(e.charAt(l++)),t=i<<2|a>>4,n=(15&a)<<4|o>>2,r=(3&o)<<6|s,u.push(t),64!=o&&u.push(n),64!=s&&u.push(r),t=n=r="",i=a=o=s=""}while(l<e.length);return u},e}(),qq.TotalProgress=function(e,t){"use strict";var n={},i=0,a=0,o=-1,r=-1,s=function(t,n){t===o&&n===r||e(t,n),o=t,r=n},l=function(e,t){var n=!0;return qq.each(e,function(e,i){if(qq.indexOf(t,i)>=0)return n=!1,!1}),n},u=function(e){p(e,-1,-1),delete n[e]},c=function(e,t,n){(0===t.length||l(t,n))&&(s(a,a),this.reset())},d=function(e){var i=t(e);i>0&&(p(e,0,i),n[e]={loaded:0,total:i})},p=function(e,t,o){var r=n[e]?n[e].loaded:0,l=n[e]?n[e].total:0;-1===t&&-1===o?(i-=r,a-=l):(t&&(i+=t-r),o&&(a+=o-l)),s(i,a)};qq.extend(this,{onAllComplete:c,onStatusChange:function(e,t,n){n===qq.status.CANCELED||n===qq.status.REJECTED?u(e):n===qq.status.SUBMITTING&&d(e)},onIndividualProgress:function(e,t,i){p(e,t,i),n[e]={loaded:t,total:i}},onNewSize:function(e){d(e)},reset:function(){n={},i=0,a=0}})},qq.PasteSupport=function(e){"use strict";function t(e){return e.type&&0===e.type.indexOf("image/")}function n(){a&&a()}var i,a;i={targetElement:null,callbacks:{log:function(e,t){},pasteReceived:function(e){}}},qq.extend(i,e),function(){a=qq(i.targetElement).attach("paste",function(e){var n=e.clipboardData;n&&qq.each(n.items,function(e,n){if(t(n)){var a=n.getAsFile();i.callbacks.pasteReceived(a)}})})}(),qq.extend(this,{reset:function(){n()}})},qq.FormSupport=function(e,t,n){"use strict";function i(e){e.getAttribute("action")&&(r.newEndpoint=e.getAttribute("action"))}function a(e,t){if(!e.checkValidity||e.checkValidity())return!0;n("Form did not pass validation checks - will not upload.","error"),t()}function o(e){var n=e.submit;qq(e).attach("submit",function(i){i=i||window.event,i.preventDefault?i.preventDefault():i.returnValue=!1,a(e,n)&&t()}),e.submit=function(){a(e,n)&&t()}}var r=this,s=e.interceptSubmit,l=e.element,u=e.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:u,attachedToForm:!1,getFormInputsAsObject:function(){return null==l?null:r._form2Obj(l)}}),l=function(e){return e&&(qq.isString(e)&&(e=document.getElementById(e)),e&&(n("Attaching to form element."),i(e),s&&o(e))),e}(l),this.attachedToForm=!!l},qq.extend(qq.FormSupport.prototype,{_form2Obj:function(e){"use strict";var t={},n=function(e){var t=["button","image","reset","submit"];return qq.indexOf(t,e.toLowerCase())<0},i=function(e){return qq.indexOf(["checkbox","radio"],e.toLowerCase())>=0},a=function(e){return!(!i(e.type)||e.checked)||e.disabled&&"hidden"!==e.type.toLowerCase()},o=function(e){var t=null;return qq.each(qq(e).children(),function(e,n){if("option"===n.tagName.toLowerCase()&&n.selected)return t=n.value,!1}),t};return qq.each(e.elements,function(e,i){if(!qq.isInput(i,!0)&&"textarea"!==i.tagName.toLowerCase()||!n(i.type)||a(i)){if("select"===i.tagName.toLowerCase()&&!a(i)){var r=o(i);null!==r&&(t[i.name]=r)}}else t[i.name]=i.value}),t}}),qq.traditional=qq.traditional||{},qq.traditional.FormUploadHandler=function(e,t){"use strict";function n(e,t){var n,i,o;try{i=t.contentDocument||t.contentWindow.document,o=i.body.innerHTML,s("converting iframe's innerHTML to JSON"),s("innerHTML = "+o),o&&o.match(/^<pre/i)&&(o=i.body.firstChild.firstChild.nodeValue),n=a._parseJsonResponse(o)}catch(e){s("Error when attempting to parse form upload response ("+e.message+")","error"),n={success:!1}}return n}function i(t,n){var i=e.paramsStore.get(t),s="get"===e.method.toLowerCase()?"GET":"POST",l=e.endpointStore.get(t),u=o(t);return i[e.uuidName]=r(t),i[e.filenameParam]=u,a._initFormForUpload({method:s,endpoint:l,params:i,paramsInBody:e.paramsInBody,targetName:n.name})}var a=this,o=t.getName,r=t.getUuid,s=t.log;this.uploadFile=function(t){var o,r=a.getInput(t),l=a._createIframe(t),u=new qq.Promise;return o=i(t,l),o.appendChild(r),a._attachLoadEvent(l,function(i){s("iframe loaded");var o=i||n(t,l);a._detachLoadEvent(t),e.cors.expected||qq(l).remove(),o.success?u.success(o):u.failure(o)}),s("Sending upload request for "+t),o.submit(),qq(o).remove(),u},qq.extend(this,new qq.FormUploadHandler({options:{isCors:e.cors.expected,inputName:e.inputName},proxy:{onCancel:e.onCancel,getName:o,getUuid:r,log:s}}))},qq.traditional=qq.traditional||{},qq.traditional.XhrUploadHandler=function(e,t){"use strict";var n=this,i=t.getName,a=t.getSize,o=t.getUuid,r=t.log,s=e.forceMultipart||e.paramsInBody,l=function(t,n,o){var r=a(t),l=i(t);e.omitDefaultParams||(n[e.chunking.paramNames.partIndex]=o.part,n[e.chunking.paramNames.partByteOffset]=o.start,n[e.chunking.paramNames.chunkSize]=o.size,n[e.chunking.paramNames.totalParts]=o.count,n[e.totalFileSizeName]=r),s&&!e.omitDefaultParams&&(n[e.filenameParam]=l)},u=new qq.traditional.AllChunksDoneAjaxRequester({cors:e.cors,endpoint:e.chunking.success.endpoint,headers:e.chunking.success.headers,jsonPayload:e.chunking.success.jsonPayload,log:r,method:e.chunking.success.method,params:e.chunking.success.params}),c=function(e,t){var n=new qq.Promise;return t.onreadystatechange=function(){if(4===t.readyState){var i=f(e,t);i.success?n.success(i.response,t):n.failure(i.response,t)}},n},d=function(t){var r=e.paramsStore.get(t),s=i(t),l=a(t);return r[e.uuidName]=o(t),r[e.filenameParam]=s,r[e.totalFileSizeName]=l,r[e.chunking.paramNames.totalParts]=n._getTotalChunks(t),r},p=function(t,n){return qq.indexOf([200,201,202,203,204],t.status)<0||e.requireSuccessJson&&!n.success||n.reset},f=function(e,t){var n;return r("xhr - server response received for "+e),r("responseText = "+t.responseText),n=m(!0,t),{success:!p(t,n),response:n}},m=function(t,n){var i={};try{r(qq.format("Received response status {} with body: {}",n.status,n.responseText)),i=qq.parseJson(n.responseText)}catch(n){t&&e.requireSuccessJson&&r("Error when attempting to parse xhr response text ("+n.message+")","error")}return i},h=function(t){var i=new qq.Promise;return u.complete(t,n._createXhr(t),d(t),e.customHeaders.get(t)).then(function(e){i.success(m(!1,e),e)},function(e){i.failure(m(!1,e),e)}),i},g=function(t){var n,r=t.fileOrBlob,l=t.id,u=t.xhr,c=t.xhrOverrides||{},d=t.customParams||{},p=t.params||{},f=c.params||{},m=s?new FormData:null,h=c.method||e.method,g=c.endpoint||e.endpointStore.get(l),v=i(l),q=a(l);return e.omitDefaultParams?(n=qq.extend({},d),qq.extend(n,f)):(n=qq.extend({},d),qq.extend(n,f),qq.extend(n,p),n[e.uuidName]=o(l),n[e.filenameParam]=v,s?n[e.totalFileSizeName]=q:e.paramsInBody||(n[e.inputName]=v)),e.paramsInBody||(g=qq.obj2url(n,g)),u.open(h,g,!0),e.cors.expected&&e.cors.sendCredentials&&(u.withCredentials=!0),s?(e.paramsInBody&&qq.obj2FormData(n,m),m.append(e.inputName,r),m):r},v=function(t){var i=t.headerOverrides,a=t.id,o=t.xhr;if(i)qq.each(i,function(e,t){o.setRequestHeader(e,t)});else{var r=e.customHeaders.get(a),l=n.getFile(a);o.setRequestHeader("Accept","application/json"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Cache-Control","no-cache"),s||(o.setRequestHeader("Content-Type","application/octet-stream"),o.setRequestHeader("X-Mime-Type",l.type)),qq.each(r,function(e,t){o.setRequestHeader(e,t)})}};qq.extend(this,{uploadChunk:function(t){var i,a,o,r=t.id,s=t.chunkIdx,u=t.overrides||{},d=t.resuming,p=n._getChunkData(r,s),f=n._createXhr(r,s),m={};return i=c(r,f),n._registerProgressHandler(r,s,p.size),o=e.paramsStore.get(r),l(r,m,p),d&&(m[e.resume.paramNames.resuming]=!0),a=g({fileOrBlob:p.blob,id:r,customParams:o,params:m,xhr:f,xhrOverrides:u}),v({headerOverrides:u.headers,id:r,xhr:f}),f.send(a),i},uploadFile:function(t){var i,a,o,r,s=n.getFile(t);return a=n._createXhr(t),n._registerProgressHandler(t),i=c(t,a),o=e.paramsStore.get(t),r=g({fileOrBlob:s,id:t,customParams:o,xhr:a}),v({id:t,xhr:a}),a.send(r),i}}),qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"traditional"},e),proxy:qq.extend({getEndpoint:e.endpointStore.get},t)})),qq.override(this,function(n){return{finalizeChunks:function(i){return t.onFinalizing(i),e.chunking.success.endpoint?h(i):n.finalizeChunks(i,qq.bind(m,this,!0))}}})},qq.traditional.AllChunksDoneAjaxRequester=function(e){"use strict";var t,n={cors:{allowXdr:!1,expected:!1,sendCredentials:!1},endpoint:null,log:function(e,t){},method:"POST"},i={},a={get:function(e){return qq.isFunction(n.endpoint)?n.endpoint(e):n.endpoint}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",contentType:n.jsonPayload?"application/json":"application/x-www-form-urlencoded",validMethods:[n.method],method:n.method,endpointStore:a,allowXRequestedWithAndCacheControl:!1,cors:n.cors,log:n.log,onComplete:function(e,t,n){var a=i[e];delete i[e],n?a.failure(t):a.success(t)}})),qq.extend(this,{complete:function(e,a,o,r){var s=new qq.Promise;return n.log("Submitting All Chunks Done request for "+e),i[e]=s,t.initTransport(e).withParams(n.params(e)||o).withHeaders(n.headers(e)||r).send(a),s}})},qq.DragAndDrop=function(e){"use strict";function t(e,t){var n=Array.prototype.slice.call(e);u.callbacks.dropLog("Grabbed "+e.length+" dropped files."),t.dropDisabled(!1),u.callbacks.processingDroppedFilesComplete(n,t.getElement())}function n(e){var t=new qq.Promise;return e.isFile?e.file(function(n){n.qqPath=i(e),f.push(n),t.success()},function(n){u.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+n.code+".","error"),t.failure()}):e.isDirectory&&a(e).then(function(e){var i=e.length;qq.each(e,function(e,a){n(a).done(function(){0===(i-=1)&&t.success()})}),e.length||t.success()},function(n){u.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+n.code+".","error"),t.failure()}),t}function i(e){var t=e.name,n=e.fullPath,i=n.lastIndexOf(t);return n=n.substr(0,i),"/"===n.charAt(0)&&(n=n.substr(1)),n}function a(e,t,n,i){var o=i||new qq.Promise,r=t||e.createReader();return r.readEntries(function(t){var i=n?n.concat(t):t;t.length?setTimeout(function(){a(e,r,i,o)},0):o.success(i)},o.failure),o}function o(e,t){var i=[],a=new qq.Promise;return u.callbacks.processingDroppedFiles(),t.dropDisabled(!0),e.files.length>1&&!u.allowMultipleItems?(u.callbacks.processingDroppedFilesComplete([]),u.callbacks.dropError("tooManyFilesError",""),t.dropDisabled(!1),a.failure()):(f=[],qq.isFolderDropSupported(e)?qq.each(e.items,function(e,t){var o=t.webkitGetAsEntry();o&&(o.isFile?f.push(t.getAsFile()):i.push(n(o).done(function(){i.pop(),0===i.length&&a.success()})))}):f=e.files,0===i.length&&a.success()),a}function r(e){var n=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:c,element:e,onEnter:function(t){qq(e).addClass(u.classes.dropActive),t.stopPropagation()},onLeaveNotDescendants:function(t){qq(e).removeClass(u.classes.dropActive)},onDrop:function(e){o(e.dataTransfer,n).then(function(){t(f,n)},function(){u.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});return m.addDisposer(function(){n.dispose()}),qq(e).hasAttribute(d)&&qq(e).hide(),p.push(n),n}function s(e){var t;return qq.each(e.dataTransfer.types,function(e,n){if("Files"===n)return t=!0,!1}),t}function l(e){return qq.safari()?e.x<0||e.y<0:0===e.x&&0===e.y}var u,c="qq-hidezones",d="qq-hide-dropzone",p=[],f=[],m=new qq.DisposeSupport;u={dropZoneElements:[],allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(u,e,!0),function(){var e=u.dropZoneElements,t=function(){setTimeout(function(){qq.each(e,function(e,t){qq(t).hasAttribute(d)&&qq(t).hide(),qq(t).removeClass(u.classes.dropActive)})},10)};qq.each(e,function(t,n){var i=r(n);e.length&&qq.supportedFeatures.fileDrop&&m.attach(document,"dragenter",function(t){!i.dropDisabled()&&s(t)&&qq.each(e,function(e,t){t instanceof HTMLElement&&qq(t).hasAttribute(d)&&qq(t).css({display:"block"})})})}),m.attach(document,"dragleave",function(e){l(e)&&t()}),m.attach(qq(document).children()[0],"mouseenter",function(e){t()}),m.attach(document,"drop",function(e){s(e)&&(e.preventDefault(),t())}),m.attach(document,c,t)}(),qq.extend(this,{setupExtraDropzone:function(e){u.dropZoneElements.push(e),r(e)},removeDropzone:function(e){var t,n=u.dropZoneElements;for(t in n)if(n[t]===e)return n.splice(t,1)},dispose:function(){m.dispose(),qq.each(p,function(e,t){t.dispose()})}}),this._testing={},this._testing.extractDirectoryPath=i},qq.DragAndDrop.callbacks=function(){"use strict";return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(e,t){},dropError:function(e,t){qq.log("Drag & drop error code '"+e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}},qq.UploadDropZone=function(e){"use strict";function t(){return qq.safari()||qq.firefox()&&qq.windows()}function n(e){if(!qq.supportedFeatures.fileDrop)return!1;var t,n=e.dataTransfer,i=qq.safari();return t=!(!qq.ie()||!qq.supportedFeatures.fileDrop)||"none"!==n.effectAllowed,n&&t&&(n.files&&n.files.length||!i&&n.types.contains&&n.types.contains("Files")||n.types.includes&&n.types.includes("Files"))}function i(e){return void 0!==e&&(s=e),s}function a(){function e(){t=document.createEvent("Event"),t.initEvent(o.HIDE_ZONES_EVENT_NAME,!0,!0)}var t;if(window.CustomEvent)try{t=new CustomEvent(o.HIDE_ZONES_EVENT_NAME)}catch(t){e()}else e();document.dispatchEvent(t)}var o,r,s,l,u=new qq.DisposeSupport;o={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(o,e),r=o.element,function(e){l||(t?u.attach(document,"dragover",function(e){e.preventDefault()}):u.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),l=!0)}(),function(){u.attach(r,"dragover",function(e){if(n(e)){var t=qq.ie()&&qq.supportedFeatures.fileDrop?null:e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",e.stopPropagation(),e.preventDefault()}}),u.attach(r,"dragenter",function(e){if(!i()){if(!n(e))return;o.onEnter(e)}}),u.attach(r,"dragleave",function(e){if(n(e)){o.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);qq(this).contains(t)||o.onLeaveNotDescendants(e)}}),u.attach(r,"drop",function(e){if(!i()){if(!n(e))return;e.preventDefault(),e.stopPropagation(),o.onDrop(e),a()}})}(),qq.extend(this,{dropDisabled:function(e){return i(e)},dispose:function(){u.dispose()},getElement:function(){return r}}),this._testing={},this._testing.isValidFileDrag=n},function(){"use strict";qq.uiPublicApi={addInitialFiles:function(e){this._parent.prototype.addInitialFiles.apply(this,arguments),this._templating.addCacheToDom()},clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments),this._templating.clearFiles()},addExtraDropzone:function(e){this._dnd&&this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){if(this._dnd)return this._dnd.removeDropzone(e)},getItemByFileId:function(e){if(!this._templating.isHiddenForever(e))return this._templating.getFileContainer(e)},reset:function(){this._parent.prototype.reset.apply(this,arguments),this._templating.reset(),!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()),this._dnd&&(this._dnd.dispose(),this._dnd=this._setupDragAndDrop()),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0,this._setupClickAndEditEventHandlers()},setName:function(e,t){var n=this._options.formatFileName(t);this._parent.prototype.setName.apply(this,arguments),this._templating.updateFilename(e,n)},pauseUpload:function(e){var t=this._parent.prototype.pauseUpload.apply(this,arguments);return t&&this._templating.uploadPaused(e),t},continueUpload:function(e){var t=this._parent.prototype.continueUpload.apply(this,arguments);return t&&this._templating.uploadContinued(e),t},getId:function(e){return this._templating.getFileId(e)},getDropTarget:function(e){return this.getFile(e).qqDropTarget}},qq.uiPrivateApi={_getButton:function(e){var t=this._parent.prototype._getButton.apply(this,arguments);return t||e===this._defaultButtonId&&(t=this._templating.getButton()),t},_removeFileItem:function(e){this._templating.removeFile(e)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent(),this._focusinEventSupported=!qq.firefox(),this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var e=this,t=this._options.dragAndDrop.extraDropzones,n=this._templating,i=n.getDropZone();return i&&t.push(i),new qq.DragAndDrop({dropZoneElements:t,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){n.showDropProcessing()},processingDroppedFilesComplete:function(t,i){n.hideDropProcessing(),qq.each(t,function(e,t){t.qqDropTarget=i}),t.length&&e.addFiles(t,null,null)},dropError:function(t,n){e._itemError(t,n)},dropLog:function(t,n){e.log(t,n)}}})},_bindFileButtonsClickEvent:function(){var e=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(t,n){e.log(t,n)},onDeleteFile:function(t){e.deleteFile(t)},onCancel:function(t){e.cancel(t)},onRetry:function(t){e.retry(t)},onPause:function(t){e.pauseUpload(t)},onContinue:function(t){e.continueUpload(t)},onGetName:function(t){return e.getName(t)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var e=this,t=this._templating;return{templating:t,log:function(t,n){e.log(t,n)},onGetUploadStatus:function(t){return e.getUploads({id:t}).status},onGetName:function(t){return e.getName(t)},onSetName:function(t,n){e.setName(t,n)},onEditingStatusChange:function(e,n){var i=qq(t.getEditInput(e)),a=qq(t.getFileContainer(e));n?(i.addClass("qq-editing"),t.hideFilename(e),t.hideEditIcon(e)):(i.removeClass("qq-editing"),t.showFilename(e),t.showEditIcon(e)),a.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(e,t,n){this._parent.prototype._onUploadStatusChange.apply(this,arguments),this._isEditFilenameEnabled()&&this._templating.getFileContainer(e)&&n!==qq.status.SUBMITTED&&(this._templating.markFilenameEditable(e),this._templating.hideEditIcon(e)),t===qq.status.UPLOAD_RETRYING&&n===qq.status.UPLOADING?(this._templating.hideRetry(e),this._templating.setStatusText(e),qq(this._templating.getFileContainer(e)).removeClass(this._classes.retrying)):n===qq.status.UPLOAD_FAILED&&this._templating.hidePause(e)},_bindFilenameInputFocusInEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(e)},_bindFilenameInputFocusEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(e)},_bindFilenameClickEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(e)},_storeForLater:function(e){this._parent.prototype._storeForLater.apply(this,arguments),this._templating.hideSpinner(e)},_onAllComplete:function(e,t){this._parent.prototype._onAllComplete.apply(this,arguments),this._templating.resetTotalProgress()},_onSubmit:function(e,t){var n=this.getFile(e);n&&n.qqPath&&this._options.dragAndDrop.reportDirectoryPaths&&this._paramsStore.addReadOnly(e,{qqpath:n.qqPath}),this._parent.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onSubmitted:function(e){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(e),this._templating.showEditIcon(e),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(e)))},_onProgress:function(e,t,n,i){this._parent.prototype._onProgress.apply(this,arguments),this._templating.updateProgress(e,n,i),0===i||100===Math.round(n/i*100)?(this._templating.hideCancel(e),this._templating.hidePause(e),this._templating.hideProgress(e),this._templating.setStatusText(e,this._options.text.waitingForResponse),this._displayFileSize(e)):this._displayFileSize(e,n,i)},_onTotalProgress:function(e,t){this._parent.prototype._onTotalProgress.apply(this,arguments),this._templating.updateTotalProgress(e,t)},_onComplete:function(e,t,n,i){function a(t){s&&(r.setStatusText(e),qq(s).removeClass(l._classes.retrying),r.hideProgress(e),l.getUploads({id:e}).status!==qq.status.UPLOAD_FAILED&&r.hideCancel(e),r.hideSpinner(e),t.success?l._markFileAsSuccessful(e):(qq(s).addClass(l._classes.fail),r.showCancel(e),r.isRetryPossible()&&!l._preventRetries[e]&&(qq(s).addClass(l._classes.retryable),r.showRetry(e)),l._controlFailureTextDisplay(e,t)))}var o=this._parent.prototype._onComplete.apply(this,arguments),r=this._templating,s=r.getFileContainer(e),l=this;return o instanceof qq.Promise?o.done(function(e){a(e)}):a(n),o},_markFileAsSuccessful:function(e){var t=this._templating;this._isDeletePossible()&&t.showDeleteButton(e),qq(t.getFileContainer(e)).addClass(this._classes.success),this._maybeUpdateThumbnail(e)},_onUploadPrep:function(e){this._parent.prototype._onUploadPrep.apply(this,arguments),this._templating.showSpinner(e)},_onUpload:function(e,t){var n=this._parent.prototype._onUpload.apply(this,arguments);return this._templating.showSpinner(e),n},_onUploadChunk:function(e,t){this._parent.prototype._onUploadChunk.apply(this,arguments),t.partIndex>0&&this._handler.isResumable(e)&&this._templating.allowPause(e)},_onCancel:function(e,t){this._parent.prototype._onCancel.apply(this,arguments),this._removeFileItem(e),0===this._getNotFinished()&&this._templating.resetTotalProgress()},_onBeforeAutoRetry:function(e){var t,n,i;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments),this._showCancelLink(e),this._options.retry.showAutoRetryNote&&(t=this._autoRetries[e],n=this._options.retry.maxAutoAttempts,i=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,t),i=i.replace(/\{maxAuto\}/g,n),this._templating.setStatusText(e,i),qq(this._templating.getFileContainer(e)).addClass(this._classes.retrying))},_onBeforeManualRetry:function(e){return this._parent.prototype._onBeforeManualRetry.apply(this,arguments)?(this._templating.resetProgress(e),qq(this._templating.getFileContainer(e)).removeClass(this._classes.fail),this._templating.setStatusText(e),this._templating.showSpinner(e),this._showCancelLink(e),!0):(qq(this._templating.getFileContainer(e)).addClass(this._classes.retryable),this._templating.showRetry(e),!1)},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(e,t,n){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(e,t,n){this._parent.prototype._onDeleteComplete.apply(this,arguments),this._templating.hideSpinner(e),n?(this._templating.setStatusText(e,this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(e)):this._removeFileItem(e)},_sendDeleteRequest:function(e,t,n){this._templating.hideDeleteButton(e),this._templating.showSpinner(e),this._templating.setStatusText(e,this._options.deleteFile.deletingStatusText),this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(e,t,n){var i,a=this.getName(e),o=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,a),r=(this.getUuid(e),arguments),s=this;i=this._options.showConfirm(o),qq.isGenericPromise(i)?i.then(function(){s._sendDeleteRequest.apply(s,r)}):!1!==i&&s._sendDeleteRequest.apply(s,r)},_addToList:function(e,t,n){var i,a,o=0,r=this._handler.isProxied(e)&&this._options.scaling.hideScaled;this._options.display.prependFiles&&(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(o=this._filesInBatchAddedToUi-1),i={index:o}),n||(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),this._options.multiple||(a=this.getUploads({id:e}),this._handledProxyGroup=this._handledProxyGroup||a.proxyGroupId,a.proxyGroupId===this._handledProxyGroup&&a.proxyGroupId||(this._handler.cancelAll(),this._clearList(),this._handledProxyGroup=null))),n?(this._templating.addFileToCache(e,this._options.formatFileName(t),i,r),this._templating.updateThumbnail(e,this._thumbnailUrls[e],!0,this._options.thumbnails.customResizer)):(this._templating.addFile(e,this._options.formatFileName(t),i,r),this._templating.generatePreview(e,this.getFile(e),this._options.thumbnails.customResizer)),this._filesInBatchAddedToUi+=1,(n||this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading)&&this._displayFileSize(e)},_clearList:function(){this._templating.clearFiles(),this.clearStoredFiles()},_displayFileSize:function(e,t,n){var i=this.getSize(e),a=this._formatSize(i);i>=0&&(void 0!==t&&void 0!==n&&(a=this._formatProgress(t,n)),this._templating.updateSize(e,a))},_formatProgress:function(e,t){function n(e,t){i=i.replace(e,t)}var i=this._options.text.formatProgress;return n("{percent}",Math.round(e/t*100)),n("{total_size}",this._formatSize(t)),i},_controlFailureTextDisplay:function(e,t){var n,i,a;n=this._options.failedUploadTextDisplay.mode,i=this._options.failedUploadTextDisplay.responseProperty,"custom"===n?(a=t[i],a||(a=this._options.text.failUpload),this._templating.setStatusText(e,a),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,a)):"default"===n?this._templating.setStatusText(e,this._options.text.failUpload):"none"!==n&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(e,t){this._templating.getFileContainer(e).title=t},_showCancelLink:function(e){this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading||this._templating.showCancel(e)},_itemError:function(e,t,n){var i=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(i)},_batchError:function(e){this._parent.prototype._batchError.apply(this,arguments),this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,n=e._options.paste.defaultName;return e._options.showPrompt(t,n)}},_fileOrBlobRejected:function(e,t){this._totalFilesInBatch-=1,this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e,t,n){this._totalFilesInBatch=e.length,this._filesInBatchAddedToUi=0,this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(e){var t=this._thumbnailUrls[e];this.getUploads({id:e}).status===qq.status.DELETED||!t&&!this._options.thumbnails.placeholders.waitUntilResponse&&qq.supportedFeatures.imagePreviews||this._templating.updateThumbnail(e,t,this._options.thumbnails.customResizer)},_addCannedFile:function(e){var t=this._parent.prototype._addCannedFile.apply(this,arguments);return this._addToList(t,this.getName(t),!0),this._templating.hideSpinner(t),this._templating.hideCancel(t),this._markFileAsSuccessful(t),t},_setSize:function(e,t){this._parent.prototype._setSize.apply(this,arguments),this._templating.updateSize(e,this._formatSize(t))},_sessionRequestComplete:function(){this._templating.addCacheToDom(),this._parent.prototype._sessionRequestComplete.apply(this,arguments)}}}(),qq.FineUploader=function(e,t){"use strict";var n=this;this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic,this._parent.apply(this,arguments),qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:!1},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},thumbnails:{customResizer:null,maxCount:0,placeholders:{waitUntilResponse:!1,notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:!1},showMessage:function(e){if(n._templating.hasDialog("alert"))return n._templating.showDialog("alert",e);setTimeout(function(){window.alert(e)},0)},showConfirm:function(e){return n._templating.hasDialog("confirm")?n._templating.showDialog("confirm",e):window.confirm(e)},showPrompt:function(e,t){return n._templating.hasDialog("prompt")?n._templating.showDialog("prompt",e,t):window.prompt(e,t)}},!0),qq.extend(this._options,e,!0),this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text}),this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()?this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari):!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()),this._setupClickAndEditEventHandlers(),qq.DragAndDrop&&qq.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(qq.PasteSupport?this._setupPastePrompt():this.log("Paste support module not found.","error")),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)},qq.extend(qq.FineUploader.prototype,qq.basePublicApi),qq.extend(qq.FineUploader.prototype,qq.basePrivateApi),qq.extend(qq.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi),qq.Templating=function(e){"use strict";var t,n,i,a,o,r,s,l,u={content:document.createDocumentFragment(),map:{}},c=!1,d=0,p=!1,f=[],m=-1,h={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},g={button:"qq-upload-button-selector",alertDialog:"qq-alert-dialog-selector",dialogCancelButton:"qq-cancel-button-selector",confirmDialog:"qq-confirm-dialog-selector",dialogMessage:"qq-dialog-message-selector",dialogOkButton:"qq-ok-button-selector",promptDialog:"qq-prompt-dialog-selector",uploader:"qq-uploader-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropText:"qq-upload-drop-area-text-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},v={},q=new qq.Promise,b=new qq.Promise,_=function(e){var t=new qq.Promise;return b.then(function(n){U(n,e),e.src?t.success():(e.src=n.src,e.onload=function(){e.onload=null,G(e),t.success()})},function(){B(e),t.success()}),t},y=function(e,n,i){var a=$(e);return t("Generating new thumbnail for "+e),n.qqThumbnailId=e,h.imageGenerator.generate(n,a,i).then(function(){d++,G(a),v[e].success()},function(){v[e].failure(),h.placeholders.waitUntilUpdate||L(e,a)})},w=function(){if(f.length){p=!0;var e=f.shift();e.update?H(e):M(e)}else p=!1},S=function(e){return R(P(e),g.cancel)},C=function(e){return R(P(e),g.continueButton)},T=function(e){return R(o,g[e+"Dialog"])},x=function(e){return R(P(e),g.deleteButton)},k=function(){return R(o,g.dropProcessing)},E=function(e){return R(P(e),g.editNameIcon)},P=function(e){return u.map[e]||qq(r).getFirstByClass("qq-file-id-"+e)},O=function(e){return R(P(e),g.file)},I=function(e){return R(P(e),g.pause)},F=function(e){return null==e?R(o,g.totalProgressBarContainer)||R(o,g.totalProgressBar):R(P(e),g.progressBarContainer)||R(P(e),g.progressBar)},A=function(e){return R(P(e),g.retry)},D=function(e){return R(P(e),g.size)},N=function(e){return R(P(e),g.spinner)},R=function(e,t){return e&&qq(e).getFirstByClass(t)},$=function(e){return s&&R(P(e),g.thumbnail)},B=function(e){e&&qq(e).addClass(h.classes.hide)},U=function(e,t){var n=e.style.maxWidth,i=e.style.maxHeight;i&&n&&!t.style.maxWidth&&!t.style.maxHeight&&qq(t).css({maxWidth:n,maxHeight:i})},L=function(e,t){var n=v[e]||(new qq.Promise).failure(),i=new qq.Promise;return q.then(function(e){n.then(function(){i.success()},function(){U(e,t),t.onload=function(){t.onload=null,i.success()},t.src=e.src,G(t)})}),i},j=function(e,t,n){var i=n,a=i.firstChild;t>0&&(a=qq(i).children()[t].nextSibling),i.insertBefore(e,a)},M=function(e){var t=e.id,n=e.optFileOrBlob,i=n&&n.qqThumbnailId,a=$(t),o={customResizeFunction:e.customResizeFunction,maxSize:m,orient:!0,scale:!0};qq.supportedFeatures.imagePreviews?a?h.limits.maxThumbs&&h.limits.maxThumbs<=d?(L(t,a),w()):_(a).done(function(){v[t]=new qq.Promise,v[t].done(function(){setTimeout(w,h.limits.timeBetweenThumbs)}),null!=i?V(t,i):y(t,n,o)}):w():a&&(_(a),w())},H=function(e){var t=e.id,n=e.thumbnailUrl,i=e.showWaitingImg,a=$(t),o={customResizeFunction:e.customResizeFunction,scale:l,maxSize:m};if(a)if(n){if(!(h.limits.maxThumbs&&h.limits.maxThumbs<=d))return i&&_(a),h.imageGenerator.generate(n,a,o).then(function(){G(a),d++,setTimeout(w,h.limits.timeBetweenThumbs)},function(){L(t,a),setTimeout(w,h.limits.timeBetweenThumbs)});L(t,a),w()}else L(t,a),w()},z=function(e,t){var n=F(e),i=null==e?g.totalProgressBar:g.progressBar;n&&!qq(n).hasClass(i)&&(n=qq(n).getFirstByClass(i)),n&&(qq(n).css({width:t+"%"}),n.setAttribute("aria-valuenow",t))},G=function(e){e&&qq(e).removeClass(h.classes.hide)},V=function(e,n){var i=$(e),a=$(n);t(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",e,n,n)),v[n].then(function(){d++,v[e].success(),t(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",n,e)),i.src=a.src,G(i)},function(){v[e].failure(),h.placeholders.waitUntilUpdate||L(e,i)})};qq.extend(h,e),t=h.log,qq.supportedFeatures.imagePreviews||(h.limits.timeBetweenThumbs=0,h.limits.maxThumbs=0),o=h.containerEl,s=void 0!==h.imageGenerator,a=function(){var e,a,o,r,u,c,d,p,f,v,q;if(t("Parsing template"),null==h.templateIdOrEl)throw new Error("You MUST specify either a template element or ID!");if(qq.isString(h.templateIdOrEl)){if(null===(e=document.getElementById(h.templateIdOrEl)))throw new Error(qq.format("Cannot find template script at ID '{}'!",h.templateIdOrEl));a=e.innerHTML}else{if(void 0===h.templateIdOrEl.innerHTML)throw new Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");a=h.templateIdOrEl.innerHTML}if(a=qq.trimStr(a),r=document.createElement("div"),r.appendChild(qq.toElement(a)),q=qq(r).getFirstByClass(g.uploader),h.button&&(c=qq(r).getFirstByClass(g.button))&&qq(c).remove(),qq.DragAndDrop&&qq.supportedFeatures.fileDrop||(f=qq(r).getFirstByClass(g.dropProcessing))&&qq(f).remove(),d=qq(r).getFirstByClass(g.drop),d&&!qq.DragAndDrop&&(t("DnD module unavailable.","info"),qq(d).remove()),qq.supportedFeatures.fileDrop?qq(q).hasAttribute("qq-drop-area-text")&&d&&(v=qq(d).getFirstByClass(g.dropText))&&qq(v).remove():(q.removeAttribute("qq-drop-area-text"),d&&qq(d).hasAttribute("qq-hide-dropzone")&&qq(d).css({display:"none"})),p=qq(r).getFirstByClass(g.thumbnail),s?p&&(m=parseInt(p.getAttribute("qq-max-size")),m=m>0?m:null,l=qq(p).hasAttribute("qq-server-scale")):p&&qq(p).remove(),s=s&&p,n=qq(r).getByClass(g.editFilenameInput).length>0,i=qq(r).getByClass(g.retry).length>0,null==(o=qq(r).getFirstByClass(g.list)))throw new Error("Could not find the file list container in the template!");return u=o.children[0].cloneNode(!0),o.innerHTML="",r.getElementsByTagName("DIALOG").length&&document.createElement("dialog"),t("Template parsing complete"),{template:r,fileTemplate:u}}(),function(){var e=h.placeholders.thumbnailNotAvailable,n=h.placeholders.waitingForThumbnail,i={maxSize:m,scale:l};s&&(e?h.imageGenerator.generate(e,new Image,i).then(function(e){q.success(e)},function(){q.failure(),t("Problem loading 'not available' placeholder image at "+e,"error")}):q.failure(),n?h.imageGenerator.generate(n,new Image,i).then(function(e){b.success(e)},function(){b.failure(),t("Problem loading 'waiting for thumbnail' placeholder image at "+n,"error")}):b.failure())}(),qq.extend(this,{render:function(){t("Rendering template in DOM."),d=0,o.appendChild(a.template.cloneNode(!0)),B(k()),this.hideTotalProgress(),r=h.fileContainerEl||R(o,g.list),t("Template rendering complete")},renderFailure:function(e){var t=qq.toElement(e);o.innerHTML="",o.appendChild(t)},reset:function(){o.innerHTML="",this.render()},clearFiles:function(){r.innerHTML=""},disableCancel:function(){c=!0},addFile:function(e,t,n,i,s){var l,d=a.fileTemplate.cloneNode(!0),p=R(d,g.file),f=R(o,g.uploader),m=s?u.content:r;s&&(u.map[e]=d),qq(d).addClass("qq-file-id-"+e),f.removeAttribute("qq-drop-area-text"),p&&(qq(p).setText(t),p.setAttribute("title",t)),d.setAttribute("qq-file-id",e),n?j(d,n.index,m):m.appendChild(d),i?(d.style.display="none",qq(d).addClass("qq-hidden-forever")):(B(F(e)),B(D(e)),B(x(e)),B(A(e)),B(I(e)),B(C(e)),c&&this.hideCancel(e),(l=$(e))&&!l.src&&b.then(function(e){l.src=e.src,e.style.maxHeight&&e.style.maxWidth&&qq(l).css({maxHeight:e.style.maxHeight,maxWidth:e.style.maxWidth}),G(l)}))},addFileToCache:function(e,t,n,i){this.addFile(e,t,n,i,!0)},addCacheToDom:function(){r.appendChild(u.content),u.content=document.createDocumentFragment(),u.map={}},removeFile:function(e){qq(P(e)).remove()},getFileId:function(e){var t=e;if(t){for(;null==t.getAttribute("qq-file-id");)t=t.parentNode;return parseInt(t.getAttribute("qq-file-id"))}},getFileList:function(){return r},markFilenameEditable:function(e){var t=O(e);t&&qq(t).addClass(h.classes.editable)},updateFilename:function(e,t){var n=O(e);n&&(qq(n).setText(t),n.setAttribute("title",t))},hideFilename:function(e){B(O(e))},showFilename:function(e){G(O(e))},isFileName:function(e){return qq(e).hasClass(g.file)},getButton:function(){return h.button||R(o,g.button)},hideDropProcessing:function(){B(k())},showDropProcessing:function(){G(k())},getDropZone:function(){return R(o,g.drop)},isEditFilenamePossible:function(){return n},hideRetry:function(e){B(A(e))},isRetryPossible:function(){return i},showRetry:function(e){G(A(e))},getFileContainer:function(e){return P(e)},showEditIcon:function(e){var t=E(e);t&&qq(t).addClass(h.classes.editable)},isHiddenForever:function(e){return qq(P(e)).hasClass("qq-hidden-forever")},hideEditIcon:function(e){var t=E(e);t&&qq(t).removeClass(h.classes.editable)},isEditIcon:function(e){return qq(e).hasClass(g.editNameIcon,!0)},getEditInput:function(e){return R(P(e),g.editFilenameInput)},isEditInput:function(e){return qq(e).hasClass(g.editFilenameInput,!0)},updateProgress:function(e,t,n){var i,a=F(e);a&&n>0&&(i=Math.round(t/n*100),100===i?B(a):G(a),z(e,i))},updateTotalProgress:function(e,t){this.updateProgress(null,e,t)},hideProgress:function(e){var t=F(e);t&&B(t)},hideTotalProgress:function(){this.hideProgress()},resetProgress:function(e){z(e,0),this.hideTotalProgress(e)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(e){if(!c){var t=S(e);t&&qq(t).removeClass(h.classes.hide)}},hideCancel:function(e){B(S(e))},isCancel:function(e){return qq(e).hasClass(g.cancel,!0)},allowPause:function(e){G(I(e)),B(C(e))},uploadPaused:function(e){this.setStatusText(e,h.text.paused),this.allowContinueButton(e),B(N(e))},hidePause:function(e){B(I(e))},isPause:function(e){return qq(e).hasClass(g.pause,!0)},isContinueButton:function(e){return qq(e).hasClass(g.continueButton,!0)},allowContinueButton:function(e){G(C(e)),B(I(e))},uploadContinued:function(e){this.setStatusText(e,""),this.allowPause(e),G(N(e))},showDeleteButton:function(e){G(x(e))},hideDeleteButton:function(e){B(x(e))},isDeleteButton:function(e){return qq(e).hasClass(g.deleteButton,!0)},isRetry:function(e){return qq(e).hasClass(g.retry,!0)},updateSize:function(e,t){var n=D(e);n&&(G(n),qq(n).setText(t))},setStatusText:function(e,t){var n=R(P(e),g.statusText);n&&(null==t?qq(n).clearText():qq(n).setText(t))},hideSpinner:function(e){qq(P(e)).removeClass("qq-in-progress"),B(N(e))},showSpinner:function(e){qq(P(e)).addClass("qq-in-progress"),G(N(e))},generatePreview:function(e,t,n){this.isHiddenForever(e)||(f.push({id:e,customResizeFunction:n,optFileOrBlob:t}),!p&&w())},updateThumbnail:function(e,t,n,i){this.isHiddenForever(e)||(f.push({customResizeFunction:i,update:!0,id:e,thumbnailUrl:t,showWaitingImg:n}),!p&&w())},hasDialog:function(e){return qq.supportedFeatures.dialogElement&&!!T(e)},showDialog:function(e,t,n){var i=T(e),a=R(i,g.dialogMessage),o=i.getElementsByTagName("INPUT")[0],r=R(i,g.dialogCancelButton),s=R(i,g.dialogOkButton),l=new qq.Promise,u=function(){r.removeEventListener("click",c),s&&s.removeEventListener("click",d),l.failure()},c=function(){r.removeEventListener("click",c),i.close()},d=function(){i.removeEventListener("close",u),s.removeEventListener("click",d),i.close(),l.success(o&&o.value)};return i.addEventListener("close",u),r.addEventListener("click",c),s&&s.addEventListener("click",d),o&&(o.value=n),a.textContent=t,i.showModal(),l}})},qq.UiEventHandler=function(e,t){"use strict";function n(e){i.attach(e,a.eventType,function(e){e=e||window.event;var t=e.target||e.srcElement;a.onHandled(t,e)})}var i=new qq.DisposeSupport,a={eventType:"click",attachTo:null,onHandled:function(e,t){}};qq.extend(this,{addHandler:function(e){n(e)},dispose:function(){i.dispose()}}),qq.extend(t,{getFileIdFromItem:function(e){return e.qqFileId},getDisposeSupport:function(){return i}}),qq.extend(a,e),a.attachTo&&n(a.attachTo)},qq.FileButtonsClickHandler=function(e){"use strict";function t(e,t){qq.each(a,function(n,a){var o,r=n.charAt(0).toUpperCase()+n.slice(1);if(i.templating["is"+r](e))return o=i.templating.getFileId(e),qq.preventDefault(t),i.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",i.onGetName(o),o)),a(o),!1})}var n={},i={templating:null,log:function(e,t){},onDeleteFile:function(e){},onCancel:function(e){},onRetry:function(e){},onPause:function(e){},onContinue:function(e){},onGetName:function(e){}},a={cancel:function(e){i.onCancel(e)},retry:function(e){i.onRetry(e)},deleteButton:function(e){i.onDeleteFile(e)},pause:function(e){i.onPause(e)},continueButton:function(e){i.onContinue(e)}};qq.extend(i,e),i.eventType="click",i.onHandled=t,i.attachTo=i.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(i,n))},qq.FilenameClickHandler=function(e){"use strict";function t(e,t){if(i.templating.isFileName(e)||i.templating.isEditIcon(e)){var a=i.templating.getFileId(e);i.onGetUploadStatus(a)===qq.status.SUBMITTED&&(i.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",i.onGetName(a),a)),qq.preventDefault(t),n.handleFilenameEdit(a,e,!0))}}var n={},i={templating:null,log:function(e,t){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(e){},onGetName:function(e){}};qq.extend(i,e),i.eventType="click",i.onHandled=t,qq.extend(this,new qq.FilenameEditHandler(i,n))},qq.FilenameInputFocusInHandler=function(e,t){"use strict";function n(e,n){if(i.templating.isEditInput(e)){var a=i.templating.getFileId(e);i.onGetUploadStatus(a)===qq.status.SUBMITTED&&(i.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",i.onGetName(a),a)),t.handleFilenameEdit(a,e))}}var i={templating:null,onGetUploadStatus:function(e){},log:function(e,t){}};t||(t={}),i.eventType="focusin",i.onHandled=n,qq.extend(i,e),qq.extend(this,new qq.FilenameEditHandler(i,t))},qq.FilenameInputFocusHandler=function(e){"use strict";e.eventType="focus",e.attachTo=null,qq.extend(this,new qq.FilenameInputFocusInHandler(e,{}))},qq.FilenameEditHandler=function(e,t){"use strict";function n(e){var t=s.onGetName(e),n=t.lastIndexOf(".");return n>0&&(t=t.substr(0,n)),t}function i(e){var t=s.onGetName(e);return qq.getExtension(t)}function a(e,t){var n,a=e.value;void 0!==a&&qq.trimStr(a).length>0&&(n=i(t),void 0!==n&&(a=a+"."+n),s.onSetName(t,a)),s.onEditingStatusChange(t,!1)}function o(e,n){t.getDisposeSupport().attach(e,"blur",function(){a(e,n)})}function r(e,n){t.getDisposeSupport().attach(e,"keyup",function(t){13===(t.keyCode||t.which)&&a(e,n)})}var s={templating:null,log:function(e,t){},onGetUploadStatus:function(e){},onGetName:function(e){},onSetName:function(e,t){},onEditingStatusChange:function(e,t){}};qq.extend(s,e),s.attachTo=s.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(s,t)),qq.extend(t,{handleFilenameEdit:function(e,t,i){var a=s.templating.getEditInput(e);s.onEditingStatusChange(e,!0),a.value=n(e),i&&a.focus(),o(a,e),r(a,e)}})}}(window)},function(e,t,n){"use strict";e.exports=n(48)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function i(e){return e&&DataView.prototype.isPrototypeOf(e)}function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader,n=u(t);return t.readAsArrayBuffer(e),n}function d(e){var t=new FileReader,n=u(t);return t.readAsText(e),n}function p(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:y.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:y.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():y.arrayBuffer&&y.blob&&i(e)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||S(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return C.indexOf(t)>-1?t:e}function g(e,t){t=t||{};var n=t.body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(a))}}),t}function q(e){var t=new s;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var a=n.join(":").trim();t.append(i,a)}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new s(t.headers),this.url=t.url||"",this._initBody(e)}function _(e,t){return new Promise(function(n,i){function a(){r.abort()}var o=new g(e,t);if(o.signal&&o.signal.aborted)return i(new x("Aborted","AbortError"));var r=new XMLHttpRequest;r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:q(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;n(new b(t,e))},r.onerror=function(){i(new TypeError("Network request failed"))},r.ontimeout=function(){i(new TypeError("Network request failed"))},r.onabort=function(){i(new x("Aborted","AbortError"))},r.open(o.method,o.url,!0),"include"===o.credentials?r.withCredentials=!0:"omit"===o.credentials&&(r.withCredentials=!1),"responseType"in r&&y.blob&&(r.responseType="blob"),o.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",a),r.onreadystatechange=function(){4===r.readyState&&o.signal.removeEventListener("abort",a)}),r.send(void 0===o._bodyInit?null:o._bodyInit)})}Object.defineProperty(t,"__esModule",{value:!0}),t.Headers=s,t.Request=g,t.Response=b,n.d(t,"DOMException",function(){return x}),t.fetch=_;var y={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(y.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],S=ArrayBuffer.isView||function(e){return e&&w.indexOf(Object.prototype.toString.call(e))>-1};s.prototype.append=function(e,t){e=a(e),t=o(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},s.prototype.delete=function(e){delete this.map[a(e)]},s.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},s.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},s.prototype.set=function(e,t){this.map[a(e)]=o(t)},s.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},s.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},s.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];b.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})};var x=self.DOMException;try{new x}catch(e){x=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},x.prototype=Object.create(Error.prototype),x.prototype.constructor=x}_.polyfill=!0,self.fetch||(self.fetch=_,self.Headers=s,self.Request=g,self.Response=b)},function(e,t,n){e.exports=n(21)}]);